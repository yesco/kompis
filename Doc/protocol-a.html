<html lang="en">
<head>
<title>LysKOM Protocol A</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name=description content="LysKOM Protocol A">
<meta name=generator content="makeinfo 4.2">
<link href="http://www.gnu.org/software/texinfo/" rel=generator-home>
<!--
This is the LysKOM Protocol A specification, edition
11.1.  It specifies version 11 of the
protocol.  It was first distributed with version 2.1.2 of
lyskomd.

<p>Copyright &copy; 1995-2003 Lysator ACS.

<blockquote>
Permission is granted to make and distribute verbatim copies of this
specification provided the copyright notice and this permission notice
are preserved on all copies.

<p>Modified versions of this document may be redistributed with the added
condition that all modifications not cleared with the LysKOM development group
are clearly marked and that the entire modified work be redistributed under the
same conditions as the original.

<p>Permission is granted to copy and distribute translations of this manual into
another language under the same conditions as for modified versions. 
</blockquote>
-->
</head>
<body>
<h1>LysKOM Protocol A</h1>
<a href="http://www.lysator.liu.se/" ><img
src="http://www.lysator.liu.se/icons/lyslogo.gif" alt="Lysator"
width=40 border=0 height=40 align=left ></a>

<a href="http://www.lysator.liu.se/lyskom/" ><img
src="http://www.lysator.liu.se/icons/lyskom.gif" alt="LysKOM" width=40
border=0 height=40 align=left ></a>
<br clear=all>

<p><hr>
Node:<a name="Top">Top</a>,
Next:<a rel=next accesskey=n href="#About%20this%20document">About this document</a>,
Up:<a rel=up accesskey=u href="#dir">(dir)</a>
<br>

<h2>LysKOM Protocol A</h2>

<p>This document specifies version 11 of LysKOM Protocol A. 
This is edition 11.1 of the specification.  It was
first distributed with version 2.1.2 of lyskomd.

<p>The most up-to-date version if this document can always be found at
<a href="http://www.lysator.liu.se/lyskom/protocol/">http://www.lysator.liu.se/lyskom/protocol/</a>.

<ul>
<li><a accesskey=1 href="#About%20this%20document">About this document</a>:          Copyright information. 
<li><a accesskey=2 href="#Preface">Preface</a>:                      What is LysKOM?  Who wrote this document? 
<li><a accesskey=3 href="#Concepts">Concepts</a>:                     Articles, conferences, aux-items, <small>...</small>
<li><a accesskey=4 href="#Fundamentals">Fundamentals</a>:                 The building blocks of Protocol A. 
<li><a accesskey=5 href="#LysKOM%20Data%20Types">LysKOM Data Types</a>:            Domain-specific data types used in Protocol A. 
<li><a accesskey=6 href="#Protocol%20Requests">Protocol Requests</a>:            Each request explained in depth. 
<li><a accesskey=7 href="#Asynchronous%20Messages">Asynchronous Messages</a>:        Unsolicited information from the server. 
<li><a accesskey=8 href="#Error%20Codes">Error Codes</a>:                  All error codes with explanations. 
<li><a accesskey=9 href="#Aux-Item%20Types">Aux-Item Types</a>:               All predefined aux-item types. 
<li><a href="#Name%20Expansion">Name Expansion</a>:               Looking up the name of a conference or person. 
<li><a href="#LysKOM%20Content%20Types">LysKOM Content Types</a>:         Predefined content types for articles. 
<li><a href="#The%20User%20Area">The User Area</a>:                Store client-specific settings in the server. 
<li><a href="#Membership%20visibility">Membership visibility</a>:        How the security features interacts. 
<li><a href="#Garb">Garb</a>:                         Old texts are deleted automatically. 
<li><a href="#Measured%20Properties">Measured Properties</a>:          Load average, number of processed requests... 
<li><a href="#Extracted%20grammar">Extracted grammar</a>:            If you want to generate code, read this. 
<li><a href="#Writing%20Clients">Writing Clients</a>:              A few tips for client writers. 
<li><a href="#Importing%20and%20Exporting%20E-Mail">Importing and Exporting E-Mail</a>:   A few thoughts on e-mail integration. 
<li><a href="#Some%20Client-specific%20Aux-Item%20Types">Some Client-specific Aux-Item Types</a>:   Informative info about more aux-items. 
<li><a href="#Future%20changes">Future changes</a>:               The protocol is not yet perfect. 
<li><a href="#Protocol%20Version%20History">Protocol Version History</a>:     The protocol was even less perfect before. 
<li><a href="#Document%20Edition%20History">Document Edition History</a>:     Changes in this document. 
<li><a href="#Index">Index</a>:                        Index of protocol elements. 
</ul>

<p><hr>
Node:<a name="About%20this%20document">About this document</a>,
Next:<a rel=next accesskey=n href="#Preface">Preface</a>,
Previous:<a rel=previous accesskey=p href="#Top">Top</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>About this document</h2>

This is the LysKOM Protocol A specification, edition
11.1.  It specifies version 11 of the
protocol.  It was first distributed with version 2.1.2 of
lyskomd.

<p>Copyright &copy; 1995-2003 Lysator ACS.

<blockquote>
Permission is granted to make and distribute verbatim copies of this
specification provided the copyright notice and this permission notice
are preserved on all copies.

<p>Modified versions of this document may be redistributed with the added
condition that all modifications not cleared with the LysKOM development group
are clearly marked and that the entire modified work be redistributed under the
same conditions as the original.

<p>Permission is granted to copy and distribute translations of this manual into
another language under the same conditions as for modified versions. 
</blockquote>

<p><hr>
Node:<a name="Preface">Preface</a>,
Next:<a rel=next accesskey=n href="#Concepts">Concepts</a>,
Previous:<a rel=previous accesskey=p href="#About%20this%20document">About this document</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Preface</h2>

<p>LysKOM is a conferencing system<a rel=footnote href="#fn-1"><sup>1</sup></a>.  Similar
systems were QZ-KOM and PortaCOM<a rel=footnote href="#fn-2"><sup>2</sup></a>.  The LysKOM system is copyrighted by Lysator Academic
Computing Society and distributed under conditions of the GNU Public
License.  LysKOM and its documentation is provided "as is" without
warranty of any kind.

<p>Anything described here as "unspecified" is liable to change in
future protocol versions.

<p>This specification is the work of several people.  The main contributors have
been
Per Cederqvist <a href="mailto:ceder@lysator.liu.se">ceder@lysator.liu.se</a>,
David Byers <a href="mailto:byers@lysator.liu.se">byers@lysator.liu.se</a>,
Pär Emanuelsson <a href="mailto:pell@lysator.liu.se">pell@lysator.liu.se</a>,
Thomas Bellman <a href="mailto:bellman@lysator.liu.se">bellman@lysator.liu.se</a>,
Lars Aronsson <a href="mailto:aronsson@lysator.liu.se">aronsson@lysator.liu.se</a>,
Linus Tolke <a href="mailto:linus@lysator.liu.se">linus@lysator.liu.se</a> and
Kent Engström <a href="mailto:kent@lysator.liu.se">kent@lysator.liu.se</a>.

<p>The LysKOM developers can be reached by email to
<a href="mailto:lyskom@lysator.liu.se">lyskom@lysator.liu.se</a>.  If you find any errors in this
document, please report them at
<a href="http://bugzilla.lysator.liu.se/">http://bugzilla.lysator.liu.se/</a>.  Use <code>lyskomd</code> as the
product, and <code>documentation</code> as component.

<p><hr>
Node:<a name="Concepts">Concepts</a>,
Next:<a rel=next accesskey=n href="#Fundamentals">Fundamentals</a>,
Previous:<a rel=previous accesskey=p href="#Preface">Preface</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Concepts used in LysKOM</h2>

<p>This chapter introduces the concepts used in LysKOM, such as articles,
conferences and sessions.

<ul>
<li><a accesskey=1 href="#Articles">Articles</a>:                     Reading and writing articles is what
                                  LysKOM is about. 
<li><a accesskey=2 href="#Conferences">Conferences</a>:                  Articles are organized in conferences. 
<li><a accesskey=3 href="#Persons%20and%20Sessions">Persons and Sessions</a>:         Persons log on to the LysKOM system. 
<li><a accesskey=4 href="#The%20Misc-Info%20List">The Misc-Info List</a>:           How articles are organized in comment
                                  chains and in conferences. 
<li><a accesskey=5 href="#The%20Aux-Item%20List">The Aux-Item List</a>:            A generic extension mechanism. 
<li><a accesskey=6 href="#Security">Security</a>:                     Some persons have more privileges than
                                  others. 
<li><a accesskey=7 href="#Membership%20and%20Reading">Membership and Reading</a>:       You don't have to read anything twice. 
</ul>

<p><hr>
Node:<a name="Articles">Articles</a>,
Next:<a rel=next accesskey=n href="#Conferences">Conferences</a>,
Up:<a rel=up accesskey=u href="#Concepts">Concepts</a>
<br>

<h3>Articles</h3>

<p>An article is represented as a value of the type <code>Text-Stat</code> and a
string containing the article contents.  An article will usually have one
or more recipients and may be a comment or footnote to other articles. 
Each article is kept in the database until it is older than the
<code>nice</code> value of each of its recipients and it is not marked by any
user.

<p>There is an array of <code>Misc-Info</code> included in the
<code>Text-Stat</code>.  This array contains information about recipients,
senders, comments and footnotes.

<p>Each article is identified by a number, the global<a rel=footnote href="#fn-3"><sup>3</sup></a>
article number (the <code>Text-No</code>).  Global numbers are assigned in
ascending order to new articles, and are never reused.  If an article
has recipients it will also have a local number for each recipient
(the <code>Local-Text-No</code>).  Local numbers are used in some data
structures to provide more compact storage and to provide an ordering
of articles for a particular recipient.  Local numbers are assigned in
ascending order and are never reused for a particular recipient,
though different recipients will have articles with the same local
numbers.

<p>Occasionally it is necessary to map between local and global numbers. 
The server call <code><a href="#local-to-global">local-to-global</a></code>
 does this.

<p><hr>
Node:<a name="Conferences">Conferences</a>,
Next:<a rel=next accesskey=n href="#Persons%20and%20Sessions">Persons and Sessions</a>,
Previous:<a rel=previous accesskey=p href="#Articles">Articles</a>,
Up:<a rel=up accesskey=u href="#Concepts">Concepts</a>
<br>

<h3>Conferences</h3>

<p>Conferences hold articles.  They are represented in the protocol as a
data type called <code>Conference</code>.  Each conference has a
<dfn>creator</dfn>, the person who created the conference, and a
<dfn>supervisor</dfn>, a conference whose members can modify the conference. 
If the supervisor is a person, the members of that person's mailbox
are supervisors, which in most cases is only that person.  Persons are
a special case: in addition to those who are supervisors for a certain
person because of the <code>supervisor</code> field, the person is always a
supervisor of himself.  There is one exception to this special case:
the person cannot use <code><a href="#set-supervisor">set-supervisor</a></code> to change who is his
supervisor.

<p>We have also introduced a type called <code>UConference</code> (pronounced
micro-conf-stat) which holds a subset of the information contained in
the full <code>Conference</code> type.  Use the <code>UConference</code> type
whenever possible since it places a much smaller load on the LysKOM
server.

<p>Each conference has a type, which is essentially a collection of
boolean flags.  Currently the flags <code>rd-prot</code>,
<code>letterbox</code>, <code>secret</code>, <code>original</code>,
<code>allow-anonymous</code> and <code>forbid-secret</code> are defined.

<dl>
<dt><code>rd-prot</code>
<dd>The conference is protected from reading by non-members.  Persons become
members by having one of the existing members or supervisors add him or
her to the conference.  This restriction is enforced by the server. 
<br><dt><code>original</code>
<dd>Conferences of this type are intended for original articles only. 
Comments are to be redirected to the <code>super-conf</code> instead.  This
restriction is not enforced by the server; clients must implement this
functionality.  (See <a href="#Recipients%20of%20comments">Recipients of comments</a>, for a summary of how
a client should select the recipients of a comment.) 
<br><dt><code>letterbox</code>
<dd>Conferences of this type are connected to persons.  Letters to a person
are sent to the mailbox and the name of the mailbox is synchronized
with the person name.  It is currently not possible to explicitly set or
clear this flag on a conference. 
<br><dt><code>secret</code>
<dd>Conferences of this type are secret.  The server will not divulge any
information about the existence of the conference to persons who are not
members or supervisors of the conference.  If a mailbox is made secret,
that person cannot log in using the person name, but must specify a
person number instead. 
<br><dt><code>allow-anonymous</code>
<dd>Conferences of this type accept anonymous articles.  Other conferences
will reject anonymous articles. 
<br><dt><code>forbid-secret</code>
<dd>Conferences of this type do not allow secret members.  If a conference is
changed to this type, preexisting secret members remain secret. 
</dl>

<p><hr>
Node:<a name="Persons%20and%20Sessions">Persons and Sessions</a>,
Next:<a rel=next accesskey=n href="#The%20Misc-Info%20List">The Misc-Info List</a>,
Previous:<a rel=previous accesskey=p href="#Conferences">Conferences</a>,
Up:<a rel=up accesskey=u href="#Concepts">Concepts</a>
<br>

<h3>Persons and Sessions</h3>

<p>Persons are represented in the protocol by values of the type
<code>Person</code>.  Associated with persons are statistics, a set of personal
flags and a set of privileges (see <a href="#Security">Security</a>).  Persons are also
associated with a conference that has the same number as the person and
the <code>letterbox</code> bit set.

<p>Connections to the server are represented as values of the type
<code>Static-Session-Info</code>, <code>Session-Info-Ident</code> or
<code>Session-Info</code>.  Sessions have session number that are unique for
each session in the lifetime of the server execution.  A single user can
have several sessions running at once.  The session is not released until
the network connection is closed; a user can log in and out repeatedly
in a single session.

<p><hr>
Node:<a name="The%20Misc-Info%20List">The Misc-Info List</a>,
Next:<a rel=next accesskey=n href="#The%20Aux-Item%20List">The Aux-Item List</a>,
Previous:<a rel=previous accesskey=p href="#Persons%20and%20Sessions">Persons and Sessions</a>,
Up:<a rel=up accesskey=u href="#Concepts">Concepts</a>
<br>

<h3>The Misc-Info List</h3>

<p>The <code>Misc-Info</code> list contains tagged data.  The fields are sent in
groups pertaining to a particular type of information: information about
recipient; carbon copy recipient; blank carbon copy recipient;
comment to; footnote to; comment in
and footnote in.  The information groups may be sent in any order and
there may be any number of groups.  Within each group the elements are
always sent in the order listed below.

<h4>Recipient</h4>

<dl>
<dt><code>recpt</code>
<dd>Starts a recipient group.  It contains the conference number of a
recipient of the article. 
<br><dt><code>loc-no</code>
<dd>Always present within a recipient group.  It contains the local text
number of the article in the conference specified by the preceding
<code>recpt</code> field. 
<br><dt><code>rec-time</code>
<dd>If the recipient is a person, this element is added by the server when
the recipient marks the article as read.  It contains the time when the
text was read. 
<br><dt><code>sent-by</code>
<dd>Present when the recipient was added by a person other than the author
(after the article was created.) It contains the person number of the
person who added the recipient. 
<br><dt><code>sent-at</code>
<dd>Present when the recipient was added after the article was created.  It
contains the time when the recipient was added. 
</dl>

<h4>Carbon Copy (CC) Recipient</h4>

<p>The carbon-copy recipient group is identical to the recipient group
above.  The difference is how new comments to an article with a recipient
or carbon-copy recipient are treated.  A comment to an article is sent to
all recipients, but not to carbon-copy recipients of the original
article.  This difference is enforced by the clients.

<dl>
<dt><code>cc-recpt</code>
<dd>Starts a carbon-copy recipient group.  It contains the conference number
of a carbon-copy recipient of the article. 
<br><dt><code>loc-no</code>
<dd>Always present in a CC recipient group.  It contains the local text
number of the article in the conference specified by the most recent
<code>cc-recpt</code> field. 
<br><dt><code>rec-time</code>
<dd>Present after the CC recipient has read the article.  It contains the
time when the article was read.  Since only persons can read articles
this will only be seen if the CC recipient is a person. 
<br><dt><code>sent-by</code>
<dd>Present when a CC recipient was added by a person other than the author
after the article had been created.  It contains the person number of the
person who added the CC recipient. 
<br><dt><code>sent-at</code>
<dd>Present when a CC recipient was added after the article had been
created.  It is the time when the CC recipient was added. 
</dl>

<h4>Blank Carbon Copy (BCC) Recipient</h4>

<p>The blank carbon-copy recipient group is identical to the carbon-copy
recipient group above.  The difference is the visibility of the
information.  A carbon-copy recipient group is visible to anyone that is
allowed to fetch both the text status of the involved text and the
conference status of the involved conference.  (That is, as long as the
conference isn't secret everybody is allowed to see the carbon-copy
recipient group.)

<p>A BCC recipient group is basically only visible to members and
supervisors of the recipient.  Persons that have the right to become a
member of the recipient can also see it, as can the author of the text
(unless the recipient is secret to him).  This is enforced by the
server.

<p>This type of group was introduced in protocol version 10.  When
old-style calls such as <code><a href="#get-text-stat-old">get-text-stat-old</a></code>
are used this will be converted to a CC recipient group by the server
for the benefit of clients that don't understand this group.  (This
conversion will of course only be performed when the user is allowed
to se the blank carbon copy.)

<dl>
<dt><code>bcc-recpt</code>
<dd>Starts a blank carbon-copy recipient group.  It contains the conference
number of a blank carbon-copy recipient of the article. 
<br><dt><code>loc-no</code>
<dd>Always present in a BCC recipient group.  It contains the local text
number of the article in the conference specified by the most recent
<code>bcc-recpt</code> field. 
<br><dt><code>rec-time</code>
<dd>Present after the BCC recipient has read the article.  It contains the
time when the article was read.  Since only persons can read articles
this will only be seen if the BCC recipient is a person. 
<br><dt><code>sent-by</code>
<dd>Present when a BCC recipient was added by a person other than the author
after the article had been created.  It contains the person number of the
person who added the BCC recipient. 
<br><dt><code>sent-at</code>
<dd>Present when a BCC recipient was added after the article had been
created.  It is the time when the BCC recipient was added. 
</dl>

<h4>Comment To</h4>

<dl>
<dt><code>comm-to</code>
<dd>Always present when the article is a comment to another article. 
<br><dt><code>sent-by</code>
<dd>Present when the article was added as a comment by a person other than
the author, after the article had been created.  It contains the person
number of the person who added the article as a comment. 
<br><dt><code>sent-at</code>
<dd>Present when the article was added as a comment after the article had
been created.  It contains the time when it was added as a comment. 
</dl>

<h4>Footnote To</h4>

<dl>
<dt><code>footn-to</code>
<dd>Always present when the article is a footnote to another article. 
<br><dt><code>sent-at</code>
<dd>Present when the article was added as a footnote after the article had
been created.  It contains the time when it was added as a footnote. 
</dl>

<h4>Comment in</h4>

<dl>
<dt><code>comm-in</code>
<dd>Present when there are comments to this article.  It contains the article
number which is a comment to this article. 
</dl>

<h4>Footnote in</h4>

<dl>
<dt><code>footn-in</code>
<dd>Present when there are footnotes to this article.  It contains the
article number which is a footnote to this article. 
</dl>

<p><hr>
Node:<a name="The%20Aux-Item%20List">The Aux-Item List</a>,
Next:<a rel=next accesskey=n href="#Security">Security</a>,
Previous:<a rel=previous accesskey=p href="#The%20Misc-Info%20List">The Misc-Info List</a>,
Up:<a rel=up accesskey=u href="#Concepts">Concepts</a>
<br>

<h3>The Aux-Item List</h3>

<p>The aux-item list is used as a generic extension mechanism in the LysKOM
server and in protocol A.

<ul>
<li><a accesskey=1 href="#About%20Aux-Items">About Aux-Items</a>:              An introduction to aux-items. 
<li><a accesskey=2 href="#Aux-Item%20Inheritance">Aux-Item Inheritance</a>:         Comments can inherit aux items. 
<li><a accesskey=3 href="#Predefined%20Aux-Item%20Types">Predefined Aux-Item Types</a>:    Predefined aux-items are part of the protocol. 
<li><a accesskey=4 href="#Client-Specific%20Aux-Item%20Types">Client-Specific Aux-Item Types</a>:   Clients can allocate aux-items for
                                    their private use. 
<li><a accesskey=5 href="#Experimental%20Aux-Item%20Types">Experimental Aux-Item Types</a>:   A block of aux-items are reserved for
                                    experimental use. 
<li><a accesskey=6 href="#Defining%20New%20Aux-Item%20Types">Defining New Aux-Item Types</a>:   Creating new aux-item types is easy. 
</ul>

<p><hr>
Node:<a name="About%20Aux-Items">About Aux-Items</a>,
Next:<a rel=next accesskey=n href="#Aux-Item%20Inheritance">Aux-Item Inheritance</a>,
Up:<a rel=up accesskey=u href="#The%20Aux-Item%20List">The Aux-Item List</a>
<br>

<h4>About Aux-Items</h4>

<p>Aux-items were introduced in protocol version 10 as a mechanism for
extending the conference, text and server information structures without
changing the protocol.  (There is no need for aux-items on persons -
just add an aux-item to the corresponding mailbox.)

<p>The exact structure of an aux item is specified elsewhere
(see <a href="#Auxiliary%20Information">Auxiliary Information</a>).  The important fields here are the
<code>aux-no</code>, <code>tag</code> and <code>data</code> fields.

<p>The <code>aux-no</code> field is used to identify an item.  The
<code>aux-no</code> together with a text or conference number uniquely
identifies a particular aux item.  Items are numbered from one and up
within each item list.  Once assigned, the <code>aux-no</code> for an item
is never changed.  New items are guaranteed to be assigned numbers that
have never been used before within a particular list.

<p>The <code>tag</code> field identifies the type of aux item.  It is used by
the server and by clients to figure out how to interpret the data
field, and by the server to decide if the item needs special
treatment.

<p>The <code>data</code> field is a simple string.  The meaning of the string
is determined by the <code>tag</code> field, but since it is a string,
clients that have no understanding of the contents can successfully
parse the item anyway (in contrast to items in the misc-info list.)

<p><hr>
Node:<a name="Aux-Item%20Inheritance">Aux-Item Inheritance</a>,
Next:<a rel=next accesskey=n href="#Predefined%20Aux-Item%20Types">Predefined Aux-Item Types</a>,
Previous:<a rel=previous accesskey=p href="#About%20Aux-Items">About Aux-Items</a>,
Up:<a rel=up accesskey=u href="#The%20Aux-Item%20List">The Aux-Item List</a>
<br>

<h4>Aux-Item Inheritance</h4>

<p>An aux item that is placed on a text can be inherited.  This means
that if a comment or footnote to the text is created, an almost
identical item will be created on the new text.  The <code>tag</code>,
<code>creator</code>, <code>flags</code> and <code>data</code> field will be
inherited unchanged.  The <code>aux-no</code> might be given a different
value.  A non-zero <code>inherit-limit</code> field will be decremented. 
The <code>created-at</code> timestamp will be set to the time when the new
comment or footnote is created.

<p>Inheritance only happens at text creation time.  If a comment or
footnote link is added later with <code><a href="#add-comment">add-comment</a></code> or
<code><a href="#add-footnote">add-footnote</a></code>, no items will be inherited.  Also, if the link
is removed (via <code><a href="#sub-comment">sub-comment</a></code> or <code><a href="#sub-footnote">sub-footnote</a></code>), the
inherited items will still be in place.

<p>Inheritance only happens when the <code>inherit</code> bit is set, and if
<code>inherit-limit</code> is 0 or greater than 1.  See <a href="#Auxiliary%20Information">Auxiliary Information</a>, for more information.

<p>Inheritance has no meaning for items placed on the server or on a
conference.

<p>It is possible for a predefined aux-item to behave in a way that isn't
consistent with the description in this section.  The documentation
for the specific aux-item should document any deviations.

<p><hr>
Node:<a name="Predefined%20Aux-Item%20Types">Predefined Aux-Item Types</a>,
Next:<a rel=next accesskey=n href="#Client-Specific%20Aux-Item%20Types">Client-Specific Aux-Item Types</a>,
Previous:<a rel=previous accesskey=p href="#Aux-Item%20Inheritance">Aux-Item Inheritance</a>,
Up:<a rel=up accesskey=u href="#The%20Aux-Item%20List">The Aux-Item List</a>
<br>

<h4>Predefined Aux-Item Types</h4>

<p>Predefined Aux-Item types are part of Protocol A, and clients should
support all of them.  As with other parts of the protocol, changes to
these definitions will be made backwards-compatible, if possible.

<p>Creation and deletion of items with a predefined type can cause
arbitrarily complex and wondrous behavior in the server.  Furthermore,
the server may place constraints on the items with regard to content,
flags, who can create them, to what objects they can be attached and
so forth.  The server may also silently enforce specific values for any
field of an item, regardless of what the client requests.

<p>All items with tags in the range 1-9999 and 30000 and up are considered
predefined.  If a client attempts to create an item with a tag in this
range, but the server has no idea what that tag means, the server will
return an error (<code>illegal-aux-item</code>).

<p>Some items with tags in the range 10000-19999 are also predefined. 
They are items that initially were reserved for private use for a
specific client, but where it was later discovered that the tag was
generally useful.  They should ideally have been assigned a number in
the 1-9999 range from the beginning, but if they already have a
widespread use they can be redefined to be predefined.  Such
redefinition will always be made in cooperation with the client
writer.

<p>See <a href="#Aux-Item%20Types">Aux-Item Types</a>, for the complete list of predefined Aux-Item
types.

<p><hr>
Node:<a name="Client-Specific%20Aux-Item%20Types">Client-Specific Aux-Item Types</a>,
Next:<a rel=next accesskey=n href="#Experimental%20Aux-Item%20Types">Experimental Aux-Item Types</a>,
Previous:<a rel=previous accesskey=p href="#Predefined%20Aux-Item%20Types">Predefined Aux-Item Types</a>,
Up:<a rel=up accesskey=u href="#The%20Aux-Item%20List">The Aux-Item List</a>
<br>

<h4>Client-Specific Aux-Item Types</h4>

<p>Client-specific items do not cause the server to perform any magic.  All
the flags (except the delete flag) are left untouched, the data is not
validated in any way, and anyone can create any item.  If you need more
server support than this, your item should be on the predefined list.

<p>All tags in the range 10000-19999 are reserved for clients.  Blocks of
100 numbers at a time can be assigned to specific clients.  A client
should never create items with tags in a range assigned to another
client or in an unassigned range.  Assigned ranges will never change,
except that specific aux-items may be redefined as predefined, as
explained in <a href="#Predefined%20Aux-Item%20Types">Predefined Aux-Item Types</a>.

<p>Currently, the following ranges are assigned to clients:
<ul>
<li>10000-10099: The Elisp Client
<li>10100-10199: komimportmail
<li>10200-10299: Private test use (should never be used on a public server)
</ul>

<p>If you want a range of numbers, send e-mail to the LysKOM development
group, or request it via Bugzilla.

<p><hr>
Node:<a name="Experimental%20Aux-Item%20Types">Experimental Aux-Item Types</a>,
Next:<a rel=next accesskey=n href="#Defining%20New%20Aux-Item%20Types">Defining New Aux-Item Types</a>,
Previous:<a rel=previous accesskey=p href="#Client-Specific%20Aux-Item%20Types">Client-Specific Aux-Item Types</a>,
Up:<a rel=up accesskey=u href="#The%20Aux-Item%20List">The Aux-Item List</a>
<br>

<h4>Experimental Aux-Item Types</h4>

<p>Experimental numbers are free for all.  Use 'em any way you
want.  All
numbers in the range 20000-29999 are for experimental use.

<p><hr>
Node:<a name="Defining%20New%20Aux-Item%20Types">Defining New Aux-Item Types</a>,
Previous:<a rel=previous accesskey=p href="#Experimental%20Aux-Item%20Types">Experimental Aux-Item Types</a>,
Up:<a rel=up accesskey=u href="#The%20Aux-Item%20List">The Aux-Item List</a>
<br>

<h4>Defining New Aux-Item Types</h4>

<p>If you want a new predefined item type, just document what it does, what
the data format looks like and what the server is to do with the item
and send this to the LysKOM development group.  We'll assign a number to
your item and put the documentation in this document.

<p>If you're not sure what you want the data to look like yet, make a note
in your documentation that the data format might change.  Once you have a
data format you're happy with, update the documentation so others may
use your item.

<p>If you need serious magic in the server (more than can be specified with
the lyskomd configuration file), you'll probably have to write the code
yourself, or hope that the development group thinks your idea is so cool
we do the job for you.

<p>The idea is not to reject any type of item, unless there's already an
item type that does the job just as well.  Adding item types should be a
much less painful process than adding new calls.

<p><hr>
Node:<a name="Security">Security</a>,
Next:<a rel=next accesskey=n href="#Membership%20and%20Reading">Membership and Reading</a>,
Previous:<a rel=previous accesskey=p href="#The%20Aux-Item%20List">The Aux-Item List</a>,
Up:<a rel=up accesskey=u href="#Concepts">Concepts</a>
<br>

<h3>Security</h3>

<p>Security in LysKOM is based on two components.  Each person has a set
of privileges and each session has a security level.  Rights in the
system require both the sufficient privileges and a sufficient
security level.  The privileges currently available are <code>wheel</code>,
<code>admin</code>, <code>statistic</code>, <code>create-conf</code>, <code>create-pers</code>
and <code>change-name</code>.  Security levels range from 0 to 255.

<dl>
<dt><code>wheel</code>
<dd><em>Normally not assigned</em>
<dl>
<dt>Level 0
<dd>Person may always log in, even when LysKOM is crowded. 
<br><dt>Level 6
<dd>Person may set Priv-Bits for all persons. 
<br><dt>Level 7
<dd>Person may set password for all persons. 
<br><dt>Level 8
<dd>Person acts as supervisor for everything. 
<br><dt>Level 10
<dd>Person can read all articles. 
</dl>

<br><dt><code>admin</code>
<dd><em>Normally not assigned</em>
<dl>
<dt>Level 1
<dd>Shut down the server<br>
Set motd-of-kom<br>
Read last-login
<br><dt>Level 2
<dd>Read status of secret conferences and persons<br>
Read the protected parts of person and conference statuses<br>
Read the entire text status, even when there are secret recipients
<br><dt>Level 3
<dd>Change everybody's names
<br><dt>Level 4
<dd>Add/remove members<br>
Add/remove recipients to articles
<br><dt>Level 5
<dd>Set super-conference<br>
Remove articles
<br><dt>Level 6
<dd>Set administrator
</dl>

<br><dt><code>statistic</code>
<dd><em>Normally not assigned</em>
<dl>
<dt>Level 2
<dd>Read the statistics portions of persons, even if protected
</dl>

<br><dt><code>create-conf</code>
<dd><em>Normally not assigned</em><a rel=footnote href="#fn-4"><sup>4</sup></a>
<dl>
<dt>Level 0
<dd>Create conferences
</dl>

<br><dt><code>create-pers</code>
<dd><em>Normally not assigned</em><a rel=footnote href="#fn-5"><sup>5</sup></a>
<dl>
<dt>Level 0
<dd>Create persons
</dl>

<br><dt><code>change-name</code>
<dd><em>Normally assigned</em>
<dl>
<dt>Level 0
<dd>Change names of conferences he is supervisor for
</dl>

</dl>

<p><hr>
Node:<a name="Membership%20and%20Reading">Membership and Reading</a>,
Previous:<a rel=previous accesskey=p href="#Security">Security</a>,
Up:<a rel=up accesskey=u href="#Concepts">Concepts</a>
<br>

<h3>Membership and Reading</h3>

<p>Persons' memberships in conferences are represented in the protocol as
arrays of <code>Membership</code>-typed values.  This structure contains
information about how and when the membership was created and which
texts have been read in the conference.

<p>There are two kinds of memberships.  An active membership indicates that
the person is actively participating in the conference, wants to know if
there are unread texts and wants to receive messages send to the
conference.  A passive membership is similar to no membership at all.  The
person is still a member but will not receive messages sent to the
conference and will not be notified when there are new texts.  From the
user's perspective, passive membership should be like no membership at
all, but the server still remembers what the user has read in the
conference while he or she was an active member.  Since protocol version
10 a bit in the membership type field of the membership structure
indicates the type of membership.  Previously the server did not support
passive memberships, but there was a convention that clients should
treat the priority level zero as a passive membership.

<p>The membership record indicates which texts have been read through the
<code>read-ranges</code> field, which contains a list of ranges of local
text numbers that has been read.

<p>Finding out which articles a person has read in a particular conference
requires a few calls.  Normally, a client will retrieve a batch of
perhaps 50 articles at a time.  The outline of the process is as follows:

<ol type=1 start=1>
</p><li>Fetch the membership to get the <code>read-ranges</code>. 
<li>Use <code><a href="#local-to-global">local-to-global</a></code> to translate a number of local
numbers to global numbers. 
<li>Remove the global numbers corresponding to local numbers contained
in <code>read-texts</code> from the result. 
<li>Get and translate more texts as needed.
</ol>

<p>The process is complicated because of the translation between local
and global text numbers.  If the server does not implement the
<code><a href="#local-to-global">local-to-global</a></code>
 call, it is possible to use the less
efficient but perfectly serviceable <code><a href="#get-map">get-map</a></code>
 call
instead.

<p><hr>
Node:<a name="Fundamentals">Fundamentals</a>,
Next:<a rel=next accesskey=n href="#LysKOM%20Data%20Types">LysKOM Data Types</a>,
Previous:<a rel=previous accesskey=p href="#Concepts">Concepts</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Fundamentals of Protocol A</h2>

<p>The data types in protocol A come in two flavors.  The first (vanilla)
are the simple data types from which the LysKOM (chocolate) data types
are built.  Simple data types include things like integers and strings
while complex data types include things such as conferences and people.

<ul>
<li><a accesskey=1 href="#Notation">Notation</a>:                     The grammar used in this document. 
<li><a accesskey=2 href="#Simple%20Data%20Types">Simple Data Types</a>:            BOOL, INT32, ARRAY, <small>...</small>
<li><a accesskey=3 href="#Connecting%20to%20the%20Server">Connecting to the Server</a>:     The initial handshake. 
<li><a accesskey=4 href="#Client-Server%20Dialog">Client-Server Dialog</a>:         Requests, replies, asynchronous messages. 
<li><a accesskey=5 href="#Protocol%20Error%20Messages">Protocol Error Messages</a>:      How the server reacts to syntax errors. 
</ul>

<p><hr>
Node:<a name="Notation">Notation</a>,
Next:<a rel=next accesskey=n href="#Simple%20Data%20Types">Simple Data Types</a>,
Up:<a rel=up accesskey=u href="#Fundamentals">Fundamentals</a>
<br>

<h3>Notation</h3>

<p>This specification uses a BNF-like grammar to describe the protocol and
its data elements.

<p>Data fields have been given names that start with a lower-case letter.

<p>Fundamental data types have names in all-caps (such as <code>INT32</code> and
<code>ARRAY</code>).

<p>Derived data types have names that start with an upper-case letter.  (If
the type contains more than one word, all words start with an upper-case
letter, like this: <code>Text-Stat</code>.)  The operator <code>::=</code> defines
the name to its left.

<p>Comments start with <code>!</code> (exclamation mark) and alternatives are
separated by a <code>|</code> (vertical bar.) A <code>;</code> (semicolon)
terminates statements in the grammar.  In some specifications there are
literal strings.  There is to be no whitespace before or after literal
strings unless there is whitespace in the literal itself.

<p><hr>
Node:<a name="Simple%20Data%20Types">Simple Data Types</a>,
Next:<a rel=next accesskey=n href="#Connecting%20to%20the%20Server">Connecting to the Server</a>,
Previous:<a rel=previous accesskey=p href="#Notation">Notation</a>,
Up:<a rel=up accesskey=u href="#Fundamentals">Fundamentals</a>
<br>

<h3>Simple Data Types</h3>

<p><a name="INT32"></a>
<a name="INT16"></a>
<a name="INT8"></a>
<a name="BOOL"></a>

<h4>Integers</h4>

<p><code>INT32</code>, <code>INT16</code>, <code>INT8</code> and <code>BOOL</code> are non-negative
integers which must fit in 32, 16, 8 and 1 bits, respectively.  They are
transmitted to the server in ASCII-encoded decimal notation.

<p><a name="FLOAT"></a>

<h4>Floating point numbers</h4>

<p><code>FLOAT</code> are floating point numbers.  They are represented as if
printed via <code>printf("%g", val);</code> in C.  See <cite>7.19.6.1 The
fprintf function</cite> in <cite>ISO/IEC 9899:1999 Programming languages -
C</cite> for the details.  See <a href="libc.html#Floating-Point%20Conversions">The %g conversion</a>, if you don't
have the C standard handy.

<p><a name="HOLLERITH"></a>

<h4>Strings</h4>

<p><code>HOLLERITH</code> denotes character strings of arbitrary length.  They are
transmitted as <code><var>n</var>H<var>text</var></code> where <var>text</var> is the string and
<var>n</var> is the number of characters in <var>text</var> in decimal
notation.  All byte values are allowed in the string itself, including
nulls.

<p>Long live FORTRAN!

<p>The character set used in the strings is not yet specified by Protocol
A.  In the future, some Unicode encoding will probably be used, but it
is not yet decided which one or how the transition will be handled. 
<a href="http://bugzilla.lysator.liu.se/show_bug.cgi?id=99">Bug 99</a> is
about the need for a Unicode roadmap; check that bug for the current
state of the plans.

<p>For now, which character set to use is a local policy of each server
installation.  There is not yet any way in the protocol to specify the
character set that a certain server uses.  Most clients currently
assume that ISO 8859-1 (Latin-1) is used, and the default collate
table of lyskomd also assumes ISO 8859-1.  Conference names must
currently use an 8-bit character set encoding where whitespace is
defined as in ASCII, or conference matching won't work. 
<code><a href="#get-collate-table">get-collate-table</a></code> contains some more information about
character set issues.

<p><a name="BITSTRING"></a>

<h4>Bit Strings</h4>

<p><code>BITSTRING</code> is a string of bits, commonly used for a set of
boolean-valued flags.  Bit strings are denoted as

<br><pre>        BITSTRING ( name-1; name-2; name-3; <small>...</small> )
</pre>

<p>in this specification.  They are transmitted as a sequence of ASCII ones
and zeroes in the order the fields are listed.

<p>For instance, given the specification

<br><pre>        shape-of-world ::= BITSTRING (
                is-flat;
                is-round;
                is-2d;
                is-3d;
        )
</pre>

<p>most peoples idea of <code>shape-of-world</code> would be sent as <code>0101</code>
(round and three-dimensional.)

<p><a name="ENUMERATION"></a>

<h4>Enumerations</h4>

<p><code>ENUMERATION</code> is an integer constant.  It is transmitted as an INT32,
but only fixed values are permitted.  Clients should be prepared to
receive numbers outside the enumeration and either handle this
gracefully as an error or use a reasonable default value in place of an
invalid enumeration value.

<p>An enumeration is specified as

<br><pre>        ENUMERATION (
                name-1=value-1;
                name-2=value-2;
                name-3=value-3;
                <small>...</small>
        )
</pre>

<p>This specification states that name-1 is represented by the integer
value-1, name-2 is represented by value-2 and name-3 is represented by
value-3.

<p>An enumeration can also be inherited from a SELECTION data type:

<br><pre>        Info-type ::= ENUMERATION-OF(Misc-Info)
</pre>

<p>This means that Info-type is an enumeration, that contains the same keys
and values as the SELECTION Misc-Info.

<p>For example, in the following specification, the constant guwal will be
transmitted as the integer 2, ciokwe as the integer 3, and hopi as the
integer 5.

<br><pre>      language ::= ENUMERATION ( hakka      = 1;
                                 guwal      = 2;
                                 ciokwe     = 3;
                                 yoruba     = 4;
                                 hopi       = 5;
                )
</pre>

<p><a name="ARRAY"></a>

<h4>Arrays</h4>

<p><code>ARRAY</code> is a list of a fixed number of elements of a single type. 
The specification for an array is <code>ARRAY <var>type</var></code> where
<var>type</var> is the type of the array elements.

<p>Arrays are transmitted as an <code><var>n</var> { <var>element</var>
<var>element</var> <small>...</small> }</code> where <var>n</var> is the number of elements and
each <var>element</var> is an element of the array.  A special case is when
the array is empty, in which case the server transmits it as <code>0 *</code>. 
Note that the client must always transmit empty arrays as <code>0 {
}</code>.

<p>In some calls the client can ask the server not to send the array
contents, only its length.  In these cases the array is transmitted as
<code><var>n</var> *</code> where <var>n</var> is the number of elements in the array.

<p><a name="SELECTION"></a>

<h4>Selection</h4>

<p><code>SELECTION</code> is tagged data.  It consists of an INT32 selector
followed by a tail of an arbitrary type and is specified as

<br><pre>        SELECTION (
                <var>n</var>=<var>name</var>        <var>tail</var> : <var>type</var>;
                <var>n</var>=<var>name</var>        <var>tail</var> : <var>type</var>;
                <small>...</small>
        )
</pre>

<p>where each <var>n</var> is the selector value, <var>name</var> the selector
name and <var>tail</var> the name of the selector tail and <var>type</var>
its type.  <var>name</var> and <var>tail</var> are often very similar, such
as <code>sent-by</code> and <code>sender</code>.

<p>When transmitted, the selector is transmitted as an INT32 followed by
the tail belonging to that selector.  For instance, given the
specification

<br><pre>        description ::= SELECTION (
               1=name           the_name : HOLLERITH;
               2=age            years    : INT32;
        )
</pre>

<p>two legal messages of the type <code>description</code> are <code>1
4HJohn</code> and <code>2 18</code>.

<p><a name="RPC"></a>

<h4>RPC</h4>

<p><code>RPC</code> is a notation used to specify calls to the server.  An RPC
specification has the following form:

<br><pre>        RPC (
                <var>call</var> [<var>n</var>] ( <var>request</var> ) -&gt; ( <var>reply</var> ) ;
                <var>call</var> [<var>n</var>] ( <var>request</var> ) -&gt; ( <var>reply</var> ) ;
        )
</pre>

<p>where each <var>call</var> is the name of a call, <var>n</var> is the call
number, <var>request</var> is a single data element sent as a request and
<var>reply</var> is a single data element sent in reply from the server.

<p>RPC calls are transmitted as <var>n</var> <var>request</var> where <var>n</var> and
<var>request</var> have the same meaning as above.  Note that in the
client-server dialog a reference number must also be supplied with each
request.  This reference number is not part of the RPC itself, but is
required for communications; see <a href="#Client-Server%20Dialog">Client-Server Dialog</a>.

<h4>Structure</h4>

<p>Structures are collections of several data items.  In the specification
they are written as

<br><pre>        ( <var>name</var> : <var>type</var> ;
          <var>name</var> : <var>type</var> ;
          <small>...</small>
        )
</pre>

<p>where each <var>name</var> is the name of a data field and the
corresponding <var>type</var> is its type.

<p>Structures are transmitted as a sequence of their fields.

<p><hr>
Node:<a name="Connecting%20to%20the%20Server">Connecting to the Server</a>,
Next:<a rel=next accesskey=n href="#Client-Server%20Dialog">Client-Server Dialog</a>,
Previous:<a rel=previous accesskey=p href="#Simple%20Data%20Types">Simple Data Types</a>,
Up:<a rel=up accesskey=u href="#Fundamentals">Fundamentals</a>
<br>

<h3>Connecting to the Server</h3>

<p>The client-server dialog consists of two phases, establishing the connection
and the LysKOM session itself.

<p>A connection to the server is initiated by connecting to the appropriate
network port<a rel=footnote href="#fn-6"><sup>6</sup></a> and
sending a single letter which is used to select a protocol version. 
This letter should always be <code>A</code><a rel=footnote href="#fn-7"><sup>7</sup></a>.

<p>The protocol version letter should be
followed by connection information required by that protocol.  In
protocol A the connection information is a <code>HOLLERITH</code> string saying who
the user connecting is followed by a linefeed character.

<p>The format of the string should be <code><var>username</var> % <var>hostname</var></code>.

<p>When the server has accepted the connection it replies with the string
<code>LysKOM</code> on a single line.

<br><pre>        % telnet kom.lysator.liu.se 4894
        Trying 130.236.254.151 ...
        Connected to varg.lysator.liu.se.
        Escape character is '^]'.
        A26Hbyers%kajsa.lysator.liu.se
        LysKOM
</pre>

<p>Besides the string <code>LysKOM</code>, the server may respond with
<code>%%LysKOM unsupported protocol.</code> or <code>%% No connections left.</code>.

<p>The <code>%%LysKOM unsupported protocol.</code> reply is sent if the server
does not understand the requested protocol, that is, if the first
character is anything but an <code>A</code>.  The connection will be closed
by the server as soon as this string has been sent.

<p>The <code>%% No connections left.</code> reply is sent if the server is not
accepting additional connections.  This error is transient.  The next
connection attempt may succeed.  Clients should wait a few seconds before
attempting to make another connection after receiving this error. 
The connection will be closed by the server as soon as this string has
been sent.

<p><hr>
Node:<a name="Client-Server%20Dialog">Client-Server Dialog</a>,
Next:<a rel=next accesskey=n href="#Protocol%20Error%20Messages">Protocol Error Messages</a>,
Previous:<a rel=previous accesskey=p href="#Connecting%20to%20the%20Server">Connecting to the Server</a>,
Up:<a rel=up accesskey=u href="#Fundamentals">Fundamentals</a>
<br>

<h3>Client-Server Dialog</h3>

<p>After connecting (see <a href="#Connecting%20to%20the%20Server">Connecting to the Server</a>), calls to the
server can be made.  Most calls require
the user to log in, but some calls can be made without a log-in.  Calls
to the server are made by sending a reference number followed by the
call as specified.  The call <em>must</em> be terminated with a linefeed
character (ASCII 0x0A).

<br><pre>        server-call ::=
                ( ref-no        :       INT32;
                  request       :       Protocol-Request;
                )
</pre>

<p>The client may send several requests without waiting for the replies. 
However, the server will only buffer a limited amount of replies, so
the client must check for pending replies from the server at least
each time it sends requests to the server.

<p>At some future point the server will reply with the result of the
request or an error code preceded by an indicator and the reference
number.  The replies will be sent in the same order as the
requests<a rel=footnote href="#fn-8"><sup>8</sup></a>.

<br><pre>        server-reply ::= ok-reply | error-reply | protocol-error;

        ok-reply ::=
                ( "="
                  ref-no        :       INT32;
                  reply-data;
                )

        error-reply ::=
                ( "%"
                  ref-no        :       INT32;
                  error-code    :       INT32;
                  error-status  :       INT32;
                )

        protocol-error ::= "%% LysKOM protocol error."
                         | "%%Insane token length."
                         | "%%Insane array size."
</pre>

<p>Our notation is not flexible enough to specify the two-way nature of
the communication.  <code>ref-no</code> in the reply is always the same as
<code>ref-no</code> in the corresponding request.  <code>reply-data</code>
depends on which request was made and is specified together with each
request.

<p>Note that there is no whitespace after the initial indicator in the
reply.

<p>Data elements sent from the client to the server are separated by one or
more space characters (ASCII 32).  An entire call is terminated by a
linefeed character (ASCII 10).

<p>Earlier versions of the protocol specified that data elements could be
separated by any number of linefeed (ASCII 10), return (ASCII 13), tab
(ASCII 9) or space (ASCII 32) characters.  Servers should be forgiving
and understand requests using the older conventions, but clients must
conform to the current convention of separating data elements with
spaces and terminating all requests with a linefeed character.  The
<code>not-implemented</code> error code will not be returned properly
unless the client follows this requirement.

<p>The server may return two different types of errors.  Normal
<code>error-reply</code> errors are replies to syntactically correct calls
to the server, while <code>protocol-error</code> are replies to syntactically
incorrect calls.  See <a href="#Protocol%20Error%20Messages">Protocol Error Messages</a>, for more information
about <code>protocol-error</code>.

<p>If a call cannot complete successfully, LysKOM will respond with an
<code>error-reply</code>.  The meaning of <code>error-code</code> and
<code>error-status</code> varies depending on the request; see <a href="#Error%20Codes">Error Codes</a>, and the documentation for each call, for a list of available
<code>error-code</code> values and what they mean.

<p>A client should be prepared for any error code in response to any
call, no matter if the response makes any sense or not.  The value
returned in <code>error-status</code> was more or less undefined before
protocol version 10.  For protocol version 10 or newer, the meaning of
<code>error-status</code> is defined in this document.

<p>The meaning of <code>error-status</code> can be modified by any call.  In
particular the calls that deal with Misc-Info lists set
<code>error-status</code> to the index of the misc item that caused the error
(if the error was caused by a misc item.)

<p>Client should handle the error messages listed with each call in a
graceful manner.  In addition, the following error types should always
be handled gracefully: <code>temporary-failure</code>,
<code>internal-error</code>, <code>feature-disabled</code>,
<code>not-implemented</code>, <code>obsolete-call</code>,
<code>ldb-error</code>,
<code>out-of-memory</code>.  Client should also be able to handle any
error in any situation without choking completely since bugs might
cause the wrong error message to be sent or new errors might be added
later on.

<p>The server may send asynchronous messages (see <a href="#Asynchronous%20Messages">Asynchronous Messages</a>) to the client at any time (but not in the middle of a
reply).  Two important asynchronous messages are
<code>async-new-text</code> (see <a href="#async-new-text">async-new-text</a>) and
<code>async-send-message</code> (see <a href="#async-send-message">async-send-message</a>).

<p><hr>
Node:<a name="Protocol%20Error%20Messages">Protocol Error Messages</a>,
Previous:<a rel=previous accesskey=p href="#Client-Server%20Dialog">Client-Server Dialog</a>,
Up:<a rel=up accesskey=u href="#Fundamentals">Fundamentals</a>
<br>

<h3>Protocol Error Messages</h3>

<p>Protocol error messages are sent in reply to syntactically incorrect
calls to the server.  These
should never appear in the client-server dialog.  If they do, there is
probably a bug in the client.

<dl>
<dt>"%% LysKOM protocol error."
<dd>The client has sent a request that does not comply with protocol A.  The
server will attempt to recover from this error, but additional calls may
be silently lost, and the server may send replies that the client does
not expect, and in some cases recovery may not be possible. 
This error is also returned when the client sends an array
that is longer than the maximum allowed by the server.

<br><dt>"%%Insane token length."
<dd>The client has sent a single token that is insanely long.  Typically this
means that the client has sent several kilobytes worth of digits, or
something similar.  This is never returned for long strings.  The server
will automatically disconnect a client who sends a token with an insane
length.

<br><dt>"%%Insane array size."
<dd>The client has send an array with a negative length.  The server is not
easily fooled.  The server will automatically disconnect a client who
sends an array with an insane length.

</dl>

<p><hr>
Node:<a name="LysKOM%20Data%20Types">LysKOM Data Types</a>,
Next:<a rel=next accesskey=n href="#Protocol%20Requests">Protocol Requests</a>,
Previous:<a rel=previous accesskey=p href="#Fundamentals">Fundamentals</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>LysKOM Data Types</h2>

<p>In this section the data types specific to LysKOM are defined.  Most of
these will probably make very little sense until you know what calls
there are.  This section does not include the server calls or
asynchronous messages, even though these are also data types.

<p>Since the types defined here are all based on the simple types, the
definitions are more concise in this section.

<ul>
<li><a accesskey=1 href="#Common%20Types">Common Types</a>:                 Simple types used over and over again. 
<li><a accesskey=2 href="#Auxiliary%20Information">Auxiliary Information</a>:        Aux-items and related types. 
<li><a accesskey=3 href="#Conference%20Types">Conference Types</a>:             A few flags for conferences. 
<li><a accesskey=4 href="#Conference%20Search%20Results">Conference Search Results</a>:    Name lookup returns these types. 
<li><a accesskey=5 href="#Conference%20Status%20Types">Conference Status Types</a>:      Information about a conference. 
<li><a accesskey=6 href="#Archaic%20way%20to%20list%20conferences">Archaic way to list conferences</a>:   Archaic name lookup result type. 
<li><a accesskey=7 href="#Mapping%20Local%20to%20Global%20Text%20Numbers">Mapping Local to Global Text Numbers</a>:   The Text-Mapping type. 
<li><a accesskey=8 href="#Server%20Information">Server Information</a>:           Information about an installation. 
<li><a accesskey=9 href="#Person%20Status%20Types">Person Status Types</a>:          Information about a person. 
<li><a href="#Membership%20Information">Membership Information</a>:       Persons are members of conferences. 
<li><a href="#Article%20Marks">Article Marks</a>:                Persons can mark articles. 
<li><a href="#Article%20Information">Article Information</a>:          Information about an article. 
<li><a href="#Who%20Information">Who Information</a>:              Old-style info about logged-on users. 
<li><a href="#Session%20Information">Session Information</a>:          New-style info about logged-on users. 
<li><a href="#Statistics">Statistics</a>:                   The server measures several things. 
</ul>

<p><hr>
Node:<a name="Common%20Types">Common Types</a>,
Next:<a rel=next accesskey=n href="#Auxiliary%20Information">Auxiliary Information</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Common Types</h3>

<p>The types defined in this section are fairly simple and used in many of
the more complex data types.

<p><a name="Time"></a>

<h4>Time</h4>

<br><pre>        Time ::=
              ( seconds         :       <a href="#INT32">INT32</a>;
                minutes         :       <a href="#INT32">INT32</a>;
                hours           :       <a href="#INT32">INT32</a>;
                day             :       <a href="#INT32">INT32</a>;
                month           :       <a href="#INT32">INT32</a>;
                year            :       <a href="#INT32">INT32</a>;
                day-of-week     :       <a href="#INT32">INT32</a>;
                day-of-year     :       <a href="#INT32">INT32</a>;
                is-dst          :       <a href="#BOOL">BOOL</a>;
              )
</pre>

<p><code>Time</code> is used to specify times in several data structures.  The
fields <code>seconds</code>, <code>minutes</code> and <code>hours</code> give wall clock
time.  <code>day</code> is the day of month and <code>month</code> is the current
month, starting with zero for January.  <code>year</code> is the number of
years since 1900.  <code>day-of-week</code> is the current weekday, with zero
used for Sunday.  <code>day-of-year</code> is how many days of the year have
passed starting with zero and <code>is-dst</code> is true when the time
indicated is daylight savings time.

<p>When the server receives a <code>Time</code> structure from a client it
ignores the <code>day-of-week</code> and <code>day-of-year</code> fields.

<p>All times are expressed in the time zone of the server, unless the
<code><a href="#set-connection-time-format">set-connection-time-format</a></code>
 request is used.

<p><a name="Conf-No"></a>

<h4>Conference Numbers</h4>

<br><pre>        Conf-No         ::=     <a href="#INT16">INT16</a>;
</pre>

<p>This type denotes a conference number.

<p><a name="Text-No"></a>
<a name="Local-Text-No"></a>
<a name="Text-List"></a>

<h4>Text Numbers</h4>

<br><pre>        Text-No         ::=     <a href="#INT32">INT32</a>;
        Local-Text-No   ::=     <a href="#INT32">INT32</a>;
        Text-List       ::=
              ( first-local-no  :       <a href="#Local-Text-No">Local-Text-No</a>;
                texts           :       <a href="#ARRAY">ARRAY</a> <a href="#Text-No">Text-No</a>;
              )
</pre>

<p>These three types are used to indicate articles in the LysKOM database. 
<code>Text-No</code> is a global text number and <code>Local-Text-No</code> a local
text number.  <code>Text-List</code> is used when a mapping from local to
global numbers are required.

<p><a name="Pers-No"></a>
<a name="Session-No"></a>

<h4>Person and Session Numbers</h4>

<br><pre>        Pers-No         ::=     <a href="#Conf-No">Conf-No</a>;
        Session-No      ::=     <a href="#INT32">INT32</a>;
</pre>

<p><code>Pers-No</code> is used to indicate a person.  <code>Session-No</code> is used
in a few data structures relating to information about active LysKOM
sessions.

<p><hr>
Node:<a name="Auxiliary%20Information">Auxiliary Information</a>,
Next:<a rel=next accesskey=n href="#Conference%20Types">Conference Types</a>,
Previous:<a rel=previous accesskey=p href="#Common%20Types">Common Types</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Auxiliary Information</h3>

<p><a name="Aux-No"></a>
<a name="Aux-Item"></a>
<a name="Aux-Item-Input"></a>
<a name="Aux-Item-Flags"></a>
<br><pre>        Aux-No   ::=    <a href="#INT32">INT32</a>;

        Aux-Item ::=
              ( aux-no      :       <a href="#Aux-No">Aux-No</a>;
                tag         :       <a href="#INT32">INT32</a>;
                creator     :       <a href="#Pers-No">Pers-No</a>;
                created-at  :       <a href="#Time">Time</a>;
                flags       :       <a href="#Aux-Item-Flags">Aux-Item-Flags</a>;
                inherit-limit :     <a href="#INT32">INT32</a>;
                data        :       <a href="#HOLLERITH">HOLLERITH</a>;
              )

        Aux-Item-Input ::=
              ( tag         :       <a href="#INT32">INT32</a>;
                flags       :       <a href="#Aux-Item-Flags">Aux-Item-Flags</a>;
                inherit-limit :     <a href="#INT32">INT32</a>;
                data        :       <a href="#HOLLERITH">HOLLERITH</a>;
              )

        Aux-Item-Flags ::= BITSTRING
              ( deleted;
                inherit;
                secret;
                hide-creator;
                dont-garb;
                reserved2;
                reserved3;
                reserved4;
              )
</pre>

<p>Aux-Item-Input contains a subset of the fields of an Aux-Item.  It is
used when the client wants to send an Aux-Item to the server, and it
only contains the elements that the client can affect.  The fields in
Aux-Item and Aux-Item-Input have the following meaning:

<dl>
<dt><code>aux-no</code>
<dd>The number of the item within the list where it is found.  This number
together with a conference or text number uniquely identifies a
particular aux-item.  (There is also a global list of Aux-Items for
the server.  That list is manipulated via the
<code><a href="#modify-system-info">modify-system-info</a></code>
 request, and when using that request
the <code>aux-no</code> is enough to uniquely identify the aux-item.)

<p>This field is not present in <code>Aux-Item-Input</code>.  It is assigned by
the server. 
<br><dt><code>tag</code>
<dd>The item tag.  The tag determines what the data means.  See <a href="#Aux-Item%20Types">Aux-Item Types</a>.

<br><dt><code>creator</code>
<dd>The person who created the item, or zero if the item was created
anonymously or if the owner is being withheld.

<p>This field is not present in <code>Aux-Item-Input</code>.  It is assigned by
the server. 
<br><dt><code>created-at</code>
<dd>The time when the item was created.

<p>This field is not present in <code>Aux-Item-Input</code>.  It is assigned by
the server. 
<br><dt><code>flags</code>
<dd>The item flags (see below). 
<br><dt><code>inherit-limit</code>
<dd>Determines how many times (how deep) an item may be inherited.  If zero,
the item is inherited an unlimited number of times.  If nonzero it is
<em>one more</em> than the number of additional times the item may be
inherited.  Thus, 1 means that inheritance will be blocked and 2 means
that the item will be inherited only to the next level. 
<br><dt><code>data</code>
<dd>The item data. 
</dl>

<p>The flags that can be set on an aux-item have the following meaning:

<dl>
<dt><code>deleted</code>
<dd>The item has been deleted, and should not be used for anything. 
<br><dt><code>inherit</code>
<dd>The item will be inherited (if the inherit-limit field allows it.) 
<br><dt><code>secret</code>
<dd>The item will not be revealed to anyone but the item's creator and
supervisors of the creator. 
<br><dt><code>hide-creator</code>
<dd>The item creator will be withheld from everyone but the item's creator
and supervisors of the creator. 
<br><dt><code>dont-garb</code>
<dd>The object the item is set on will not be garbage-collected. 
</dl>

<p><hr>
Node:<a name="Conference%20Types">Conference Types</a>,
Next:<a rel=next accesskey=n href="#Conference%20Search%20Results">Conference Search Results</a>,
Previous:<a rel=previous accesskey=p href="#Auxiliary%20Information">Auxiliary Information</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Conference Types</h3>

<p><a name="Conf-Type"></a>
<a name="Extended-Conf-Type"></a>
<a name="Any-Conf-Type"></a>
<br><pre>        Conf-Type ::= BITSTRING
              ( rd-prot;
                original;
                secret;
                letterbox;
              )

        Extended-Conf-Type ::=  BITSTRING
              ( rd-prot;
                original;
                secret;
                letterbox;
                allow-anonymous;
                forbid-secret;
                reserved2;
                reserved3;
              )

        Any-Conf-Type   ::=     <a href="#Conf-Type">Conf-Type</a> | <a href="#Extended-Conf-Type">Extended-Conf-Type</a>;
</pre>

<p>These types are used to specify the type of a conference. 
<code>Conf-Type</code> is used in data types and calls that were created
before version 8.0 of the protocol and has been augmented in
<code>Extended-Conf-Type</code>.  The type <code>Any-Conf-Type</code> is used when
either is admissible.

<p>The bits have the following meaning (see <a href="#Conferences">Conferences</a>, for more
info.)

<dl>
<dt><code>rd-prot</code>
<dd>If unset anyone can add themselves as members to the conference.

<br><dt><code>original</code>
<dd>If set, comments are not allowed in the conference.

<br><dt><code>secret</code>
<dd>If set the conference is secret.  It's existence will only be revealed to
members and supervisors.

<br><dt><code>letterbox</code>
<dd>Set if the conference is a person's mailbox.

<br><dt><code>allow-anonymous</code>
<dd>Set if anonymous articles are allowed in the conference.

<br><dt><code>forbid-secret</code>
<dd>If set, secret members cannot be added to the conference.

<dt><code>reserved2</code>
<dt><code>reserved3</code>
<dd>Reserved for future use.  The values of these bits should be never be
modified or used by clients who do not know their meaning.  When a new
conference is created these should always be set to zero. 
</dl>

<p><hr>
Node:<a name="Conference%20Search%20Results">Conference Search Results</a>,
Next:<a rel=next accesskey=n href="#Conference%20Status%20Types">Conference Status Types</a>,
Previous:<a rel=previous accesskey=p href="#Conference%20Types">Conference Types</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Conference Search Results</h3>

<p><a name="Conf-Z-Info"></a>
<br><pre>        Conf-Z-Info ::=
              ( name    :       <a href="#HOLLERITH">HOLLERITH</a>;
                type    :       <a href="#Conf-Type">Conf-Type</a>;
                conf-no :       <a href="#Conf-No">Conf-No</a>;
              )
</pre>

<p>These types are used for the result of some calls that search for
conferences based on their names.

<p><hr>
Node:<a name="Conference%20Status%20Types">Conference Status Types</a>,
Next:<a rel=next accesskey=n href="#Archaic%20way%20to%20list%20conferences">Archaic way to list conferences</a>,
Previous:<a rel=previous accesskey=p href="#Conference%20Search%20Results">Conference Search Results</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Conference Status Types</h3>

<p><a name="Garb-Nice"></a>
<a name="Conference-Old"></a>
<br><pre>        Garb-Nice ::= <a href="#INT32">INT32</a>;

        Conference-Old ::=
                ( name                  :       <a href="#HOLLERITH">HOLLERITH</a>;
                  type                  :       <a href="#Conf-Type">Conf-Type</a>;
                  creation-time         :       <a href="#Time">Time</a>;
                  last-written          :       <a href="#Time">Time</a>;
                  creator               :       <a href="#Pers-No">Pers-No</a>;
                  presentation          :       <a href="#Text-No">Text-No</a>;
                  supervisor            :       <a href="#Conf-No">Conf-No</a>;
                  permitted-submitters  :       <a href="#Conf-No">Conf-No</a>;
                  super-conf            :       <a href="#Conf-No">Conf-No</a>;
                  msg-of-day            :       <a href="#Text-No">Text-No</a>;
                  nice                  :       <a href="#Garb-Nice">Garb-Nice</a>;
                  no-of-members         :       <a href="#INT16">INT16</a>;
                  first-local-no        :       <a href="#Local-Text-No">Local-Text-No</a>;
                  no-of-texts           :       <a href="#INT32">INT32</a>;
                )

<a name="Conference"></a>
        Conference ::=
                ( name                  :       <a href="#HOLLERITH">HOLLERITH</a>;
                  type                  :       <a href="#Extended-Conf-Type">Extended-Conf-Type</a>;
                  creation-time         :       <a href="#Time">Time</a>;
                  last-written          :       <a href="#Time">Time</a>;
                  creator               :       <a href="#Pers-No">Pers-No</a>;
                  presentation          :       <a href="#Text-No">Text-No</a>;
                  supervisor            :       <a href="#Conf-No">Conf-No</a>;
                  permitted-submitters  :       <a href="#Conf-No">Conf-No</a>;
                  super-conf            :       <a href="#Conf-No">Conf-No</a>;
                  msg-of-day            :       <a href="#Text-No">Text-No</a>;
                  nice                  :       <a href="#Garb-Nice">Garb-Nice</a>;
                  keep-commented        :       <a href="#Garb-Nice">Garb-Nice</a>;
                  no-of-members         :       <a href="#INT16">INT16</a>;
                  first-local-no        :       <a href="#Local-Text-No">Local-Text-No</a>;
                  no-of-texts           :       <a href="#INT32">INT32</a>;
                  expire                :       <a href="#Garb-Nice">Garb-Nice</a>;
                  aux-items             :       <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item">Aux-Item</a>;
                )

<a name="UConference"></a>
        UConference ::=
                ( name                  :       <a href="#HOLLERITH">HOLLERITH</a>;
                  type                  :       <a href="#Extended-Conf-Type">Extended-Conf-Type</a>;
                  highest-local-no      :       <a href="#Local-Text-No">Local-Text-No</a>;
                  nice                  :       <a href="#Garb-Nice">Garb-Nice</a>;
                )
</pre>

<p>These three types are used to specify information about a conference. 
<code>Garb-Nice</code> is a quantity used to specify how long articled are
kept in a conference before being removed.  <code>Conference</code> is the full
information about a conference and <code>UConference</code> is brief
information about a conference.

<p>The fields of <code>Conference</code> are

<dl>
<dt><code>name</code>
<dd>The name of this conference. 
<br><dt><code>type</code>
<dd>The type of the conference. 
<br><dt><code>creation-time</code>
<dd>The date and time when the conference was created. 
<br><dt><code>last-written</code>
<dd>The date when something was last written in the conference. 
<br><dt><code>creator</code>
<dd>The person who created the conference. 
<br><dt><code>presentation</code>
<dd>The article containing the conference presentation or zero if the
conference has no presentation. 
<br><dt><code>supervisor</code>
<dd>The conference<a rel=footnote href="#fn-9"><sup>9</sup></a> who
supervises this conference. 
<br><dt><code>permitted-submitters</code>
<dd>The conference whose members<a rel=footnote href="#fn-10"><sup>10</sup></a> may submit
articles to the conference, or zero if anyone may do so. 
<br><dt><code>super-conf</code>
<dd>This field has two unrelated uses.  If the <code>original</code> bit is
set, clients should send comments to this conference
(see <a href="#Recipients%20of%20comments">Recipients of comments</a>).  If the <code>permitted-submitters</code>
field rejects a text<a rel=footnote href="#fn-11"><sup>11</sup></a>, the
server will silently send the text to the <code>super-conf</code>
conference instead.  This redirection mechanism is applied repeatedly
until conference that accepts the text is found, or an
implementation-defined limit is reached. 
<br><dt><code>msg-of-day</code>
<dd>The conference notice, if any. 
<br><dt><code>nice</code>
<dd>The number of days an article should be kept before being removed from
the conference. 
<br><dt><code>keep-commented</code>
<dd>A text that has comments no older than this number of days will not be
removed from the conference. 
<br><dt><code>no-of-members</code>
<dd>The number of members of this conference. 
<br><dt><code>first-local-no</code>
<dd>The local number of the oldest existing article in the conference. 
<br><dt><code>no-of-texts</code>
<dd>The number of articles in the conference. 
<br><dt><code>expire</code>
<dd>This field will be used to control when a conference expires. 
It is not used at the moment, and should be set to zero for future
compatibility. 
<br><dt><code>aux-items</code>
<dd>The conference's aux item list. 
</dl>

<p>The fields of <code>UConference</code> are

<dl>
<dt><code>name</code>
<dd>The name of this conference. 
<br><dt><code>type</code>
<dd>The conference type.  Note that this is an extended conference type,
unlike the type field of <code>Conference</code>. 
<br><dt><code>highest-local-no</code>
<dd>The local number of the newest article in the conference. 
<br><dt><code>nice</code>
<dd>The number of days an article should be kept before being removed from
the conference. 
</dl>

<p><hr>
Node:<a name="Archaic%20way%20to%20list%20conferences">Archaic way to list conferences</a>,
Next:<a rel=next accesskey=n href="#Mapping%20Local%20to%20Global%20Text%20Numbers">Mapping Local to Global Text Numbers</a>,
Previous:<a rel=previous accesskey=p href="#Conference%20Status%20Types">Conference Status Types</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Archaic way to list conferences</h3>

<p><a name="Conf-List-Archaic"></a>
The result of request number 12, lookup-name, cannot be expressed in the
grammar used in this document.  This is as close as it gets:

<br><pre>      Conf-List-Archaic ::=
           ( conf-nos    : <a href="#ARRAY">ARRAY</a> <a href="#Conf-No">Conf-No</a>;
             conf-types  : <a href="#ARRAY">ARRAY</a> <a href="#Conf-Type">Conf-Type</a>; ! Sans <var>n</var>; see below
           )
</pre>

<p>The two arrays <code>conf-nos</code> and <code>conf-types</code> are always the same
size.  For some obscure reason the size of the second array is not
actually transmitted.  See also the example in <a href="#lookup-name">lookup-name</a>.

<p><hr>
Node:<a name="Mapping%20Local%20to%20Global%20Text%20Numbers">Mapping Local to Global Text Numbers</a>,
Next:<a rel=next accesskey=n href="#Server%20Information">Server Information</a>,
Previous:<a rel=previous accesskey=p href="#Archaic%20way%20to%20list%20conferences">Archaic way to list conferences</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Mapping Local to Global Text Numbers</h3>

<p><a name="Text-Mapping"></a>
<br><pre>        Text-Mapping ::=
              ( range-begin           :    <a href="#Local-Text-No">Local-Text-No</a>;
                range-end             :    <a href="#Local-Text-No">Local-Text-No</a>;
                more-texts-exists     :    <a href="#BOOL">BOOL</a>;
                block                 :    <a href="#Local-To-Global-Block">Local-To-Global-Block</a>;
              )

<a name="Local-To-Global-Block"></a>
        Local-To-Global-Block ::= SELECTION
              ( 0=sparse sparse-block :   <a href="#ARRAY">ARRAY</a> <a href="#Text-Number-Pair">Text-Number-Pair</a>;
                1=dense  dense-block  :   <a href="#Text-List">Text-List</a>;
              )

<a name="Text-Number-Pair"></a>
        Text-Number-Pair ::=
              ( local-number          :   <a href="#Local-Text-No">Local-Text-No</a>;
                global-number         :   <a href="#Text-No">Text-No</a>;
              )
</pre>

<p>A <code>Text-Mapping</code> is used when the client needs to look up which
global <code>Text-No</code> that corresponds to a <code>Local-Text-No</code>.  The
client uses <code><a href="#local-to-global">local-to-global</a></code> to ask for information about a few
texts starting a a certain local text number, and the server returns the
information in a <code>Text-Mapping</code>.

<dl>
<dt><code>range-begin</code>
<dd>The first local text number that the <code>Text-Mapping</code> says anything
about.

<br><dt><code>range-end</code>
<dd>The first local text number that the reply doesn't say anything about. 
This <code>Text-Mapping</code> tells the client about all existing texts from
<code>range-begin</code> to (but not including) <code>range-end</code>.

<br><dt><code>more-texts-exists</code>
<dd>This is true if there are more texts in the conference after this
block.  If a request such as <code><a href="#local-to-global-reverse">local-to-global-reverse</a></code> which
searches backwards, this will instead be true if there are more texts
before this block.

<br><dt><code>block</code>
<dd>The block can be sent i two formats.  The server is free to choose which
format to use as it pleases; clients must be prepared for any of them.
<ul>

<li>The <dfn>sparse</dfn> format is useful when many local text number no longer
exists.  It starts with a <code>0</code> that indicates that the sparse format
is used, and is followed by an array of <code>Text-Number-Pair</code>.  The
array will always be sorted so that <code>local-number</code> always
increases.

<li>The <dfn>dense</dfn> format is good when most of the local text numbers
exist.  It starts with a <code>1</code> that indicates that the dense format
is used, and is followed by a <code>Text-List</code>.  The <code>Text-List</code>
contains <code>first-local-no</code> and an array of <code>Text-No</code>. 
The local text number <code>first-local-no</code> corresponds to the first
<code>Text-No</code> in the array, <code>first-local-no</code> + 1 corresponds to
the second entry in the array, and so on.  The array contains a zero to
indicate that a certain local text number doesn't exist.

</ul>
</dl>

<p><hr>
Node:<a name="Server%20Information">Server Information</a>,
Next:<a rel=next accesskey=n href="#Person%20Status%20Types">Person Status Types</a>,
Previous:<a rel=previous accesskey=p href="#Mapping%20Local%20to%20Global%20Text%20Numbers">Mapping Local to Global Text Numbers</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Server Information</h3>

<p><a name="Info"></a>
<br><pre>        Info ::=
              ( version             :   <a href="#INT32">INT32</a>;
                conf-pres-conf      :   <a href="#Conf-No">Conf-No</a>;
                pers-pres-conf      :   <a href="#Conf-No">Conf-No</a>;
                motd-conf           :   <a href="#Conf-No">Conf-No</a>;
                kom-news-conf       :   <a href="#Conf-No">Conf-No</a>;
                motd-of-lyskom      :   <a href="#Text-No">Text-No</a>;
                aux-item-list       :   <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item">Aux-Item</a>;
              )

<a name="Info-Old"></a>
        Info-Old ::=
              ( version             :   <a href="#INT32">INT32</a>;
                conf-pres-conf      :   <a href="#Conf-No">Conf-No</a>;
                pers-pres-conf      :   <a href="#Conf-No">Conf-No</a>;
                motd-conf           :   <a href="#Conf-No">Conf-No</a>;
                kom-news-conf       :   <a href="#Conf-No">Conf-No</a>;
                motd-of-lyskom      :   <a href="#Text-No">Text-No</a>;
              )

<a name="Version-Info"></a>
        Version-Info ::=
              ( protocol-version    :   <a href="#INT32">INT32</a>;
                server-software     :   <a href="#HOLLERITH">HOLLERITH</a>;
                software-version    :   <a href="#HOLLERITH">HOLLERITH</a>;
              )

<a name="Static-Server-Info"></a>
        Static-Server-Info ::=
              ( boot-time           :   <a href="#Time">Time</a>;
                save-time           :   <a href="#Time">Time</a>;
                db-status           :   <a href="#HOLLERITH">HOLLERITH</a>;
                existing-texts      :   <a href="#INT32">INT32</a>;
                highest-text-no     :   <a href="#Text-No">Text-No</a>;
                existing-confs      :   <a href="#INT32">INT32</a>;
                existing-persons    :   <a href="#INT32">INT32</a>;
                highest-conf-no     :   <a href="#Conf-No">Conf-No</a>;
              )
</pre>

<p>These data types contain information about the LysKOM server.  The fields
of <code>Info</code> and <code>Info-Old</code> are:

<dl>
<dt><code>version</code>
<dd>The server version encoded as a number
<var>aa</var><var>bb</var><var>cc</var> where
<var>aa</var> is the major version number, <var>bb</var>
the minor number and <var>cc</var> the secondary minor version. 
For instance, <code>10607</code> is
version 1.6.7 of the server.  If greater than 10699 the
<code><a href="#get-version-info">get-version-info</a></code> should be used instead. 
<br><dt><code>conf-pres-conf</code>
<dd>The conference that contains conference presentations. 
<br><dt><code>pers-pres-conf</code>
<dd>The conference that contains person presentations. 
<br><dt><code>motd-conf</code>
<dd>The conference that contains conference and person notices. 
<br><dt><code>kom-news-conf</code>
<dd>The conference that contains news about LysKOM. 
<br><dt><code>motd-of-lyskom</code>
<dd>The number of an article to display when LysKOM is entered or zero if
there is none. 
<br><dt><code>aux-item-list</code>
<dd>(Not present in <code>Info-Old</code>.)  A list of aux-items that belong to
the server. 
</dl>

<p>The fields of <code>Version-Info</code> are:

<dl>
<dt><code>protocol-version</code>
<dd>The version of protocol A the server is using.  This may be used to
ascertain which calls are available. 
<br><dt><code>server-software</code>
<dd>Human-readable name of the server software. 
<br><dt><code>software-version</code>
<dd>Human-readable name of the server software version. 
</dl>

<p>The <code>Static-Server-Info</code> contains information about the state of
the server when it started.  It contains the following fields:

<dl>
<dt><code>boot-time</code>
<dd>When did the server start?

<br><dt><code>save-time</code>
<dd>When the server starts, it examines the database to see when it was
saved.  That information is available here.

<br><dt><code>db-status</code>
<dd>The status of the database that the server found on startup.  The
value is implementation-defined.  lyskomd reports <code>clean</code> (if the
previous invocation of the server was shut down cleanly) or
<code>backup</code> (which means that some information may have been lost in
the last restart).  Clients should be prepared to find other values
here.

<br><dt><code>existing-texts</code>
<dd>Number of texts that existed on startup.  (To find out how many texts
exists right now, you can use the <code><a href="#get-stats">get-stats</a></code>
 call with
<code>what</code> set to <code>texts</code>.)

<br><dt><code>highest-text-no</code>
<dd>The highest text number that existed on startup.  (To find the highest
text number that exists right now, use the
<code><a href="#first-unused-text-no">first-unused-text-no</a></code> and <code><a href="#find-previous-text-no">find-previous-text-no</a></code>
calls.)

<br><dt><code>existing-confs</code>
<dd>Number of conferences (including letterboxes) that existed on startup. 
(To find out how many conferences exists right now, you can use the
<code><a href="#get-stats">get-stats</a></code>
 call with <code>what</code> set to
<code>confs</code>.)

<br><dt><code>existing-persons</code>
<dd>Number of persons that existed on startup.  (To find out how many
persons exists right now, you can use the <code><a href="#get-stats">get-stats</a></code>
 call
with <code>what</code> set to <code>persons</code>.)

<br><dt><code>highest-conf-no</code>
<dd>The highest conference number that existed on startup.  (To find the
highest conference number that exists right now, use the
<code><a href="#first-unused-conf-no">first-unused-conf-no</a></code> and <code><a href="#find-previous-conf-no">find-previous-conf-no</a></code>
calls.)

</dl>

<p><hr>
Node:<a name="Person%20Status%20Types">Person Status Types</a>,
Next:<a rel=next accesskey=n href="#Membership%20Information">Membership Information</a>,
Previous:<a rel=previous accesskey=p href="#Server%20Information">Server Information</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Person Status Types</h3>

<p><a name="Person"></a>
<br><pre>        Person ::=
              ( username                :       <a href="#HOLLERITH">HOLLERITH</a>;
                privileges              :       <a href="#Priv-Bits">Priv-Bits</a>;
                flags                   :       <a href="#Personal-Flags">Personal-Flags</a>;
                last-login              :       <a href="#Time">Time</a>;
                user-area               :       <a href="#Text-No">Text-No</a>;
                total-time-present      :       <a href="#INT32">INT32</a>;
                sessions                :       <a href="#INT32">INT32</a>;
                created-lines           :       <a href="#INT32">INT32</a>;
                created-bytes           :       <a href="#INT32">INT32</a>;
                read-texts              :       <a href="#INT32">INT32</a>;
                no-of-text-fetches      :       <a href="#INT32">INT32</a>;
                created-persons         :       <a href="#INT16">INT16</a>;
                created-confs           :       <a href="#INT16">INT16</a>;
                first-created-local-no  :       <a href="#INT32">INT32</a>;
                no-of-created-texts     :       <a href="#INT32">INT32</a>;
                no-of-marks             :       <a href="#INT16">INT16</a>;
                no-of-confs             :       <a href="#INT16">INT16</a>;
              )

<a name="Personal-Flags"></a>
        Personal-Flags ::= BITSTRING
              ( unread-is-secret;
                flg2;
                flg3;
                flg4;
                flg5;
                flg6;
                flg7;
                flg8;
              )


<a name="Priv-Bits"></a>
        Priv-Bits ::= BITSTRING
              ( wheel;
                admin;
                statistic;
                create-pers;
                create-conf;
                change-name;
                flg7;
                flg8;
                flg9;
                flg10;
                flg11;
                flg12;
                flg13;
                flg14;
                flg15;
                flg16;
              )
</pre>

<p>These types are used to specify information about persons.  <code>Person</code>
contains the information about a person, <code>Personal-Flags</code> contains
flags set by the user and <code>Priv-Bits</code> contains the person's
privileges (see <a href="#Security">Security</a>).

<p>The fields of <code>Person</code> are

<dl>
<dt><code>username</code>
<dd>The name of the user. 
<br><dt><code>privileges</code>
<dd>The privileges of the person. 
<br><dt><code>flags</code>
<dd>Flags set by the user. 
<br><dt><code>last-login</code>
<dd>The time when the person last logged on or off. 
<br><dt><code>user-area</code>
<dd>The text number of the person's user area or zero if the person has no
user area. 
<br><dt><code>total-time-present</code>
<dd>The number of seconds the person has been using LysKOM. 
<br><dt><code>sessions</code>
<dd>The number of sessions the person has initiated. 
<br><dt><code>created-lines</code>
<dd>The number of lines of articles the person has written. 
<br><dt><code>created-bytes</code>
<dd>The number of characters the person has written. 
<br><dt><code>read-texts</code>
<dd>The number of articles the person has read. 
<br><dt><code>no-of-text-fetches</code>
<dd>The number of texts the person has retrieved from the server. 
<br><dt><code>created-persons</code>
<dd>The number of other persons this person has created. 
<br><dt><code>created-confs</code>
<dd>This holds the number of conferences created by the person. 
<br><dt><code>first-created-local-no</code>
<dd>The local number of the earliest existing article written by the person. 
The local number applies to a local-to-global mapping containing all
articles written by the person. 
<br><dt><code>no-of-created-texts</code>
<dd>This holds the number of articles written by the person, not counting
the articles created before the earliest existing article written by
the person.  To get the true number of created articles, compute
<code>first-created-local-no</code> + <code>no-of-created-texts</code> - 1. 
<br><dt><code>no-of-marks</code>
<dd>The number of marked texts this person has. 
<br><dt><code>no-of-confs</code>
<dd>The number of conferences the person is a member of. 
</dl>

<p>The fields of <code>Personal-Flags</code> are

<dl>
<dt><code>unread-is-secret</code>
<dd>If this is set, only the person and his supervisors can see how many
texts this persons have read in a certain conference.  The server will
clear the <code>read-ranges</code> field of <code>Membership</code> (and
<code>read-texts</code>, <code>last-time-read</code> and <code>last-text-read</code>
fields of <code>Membership-10</code> and <code>Membership-Old</code>) when other
persons asks about the information.

<br><dt><code>flg2</code>
<dt><code>flg3</code>
<dt><code>flg4</code>
<dt><code>flg5</code>
<dt><code>flg6</code>
<dt><code>flg7</code>
<dt><code>flg8</code>
<dd>Reserved for the future.  Set them to 0, and ignore the values they
have. 
</dl>

<p><hr>
Node:<a name="Membership%20Information">Membership Information</a>,
Next:<a rel=next accesskey=n href="#Article%20Marks">Article Marks</a>,
Previous:<a rel=previous accesskey=p href="#Person%20Status%20Types">Person Status Types</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Membership Information</h3>

<p><a name="Membership-Type"></a>
<br><pre>        Membership-Type ::=     BITSTRING
              ( invitation;
                passive;
                secret;
                passive-message-invert;
                reserved2;
                reserved3;
                reserved4;
                reserved5;
              )
</pre>

<p>The <code>Membership-Type</code> type contains flags that modify a membership. 
It is passed as part of both <code>Member</code> and <code>Membership</code> (and
obsolete versions of those types). 
The flags are:

<dl>
<dt><code>invitation</code>
<dd>The member has been invited, but has not yet accepted membership. 
Clients should set this flag when adding other users as members.  The
server may force this flag to be set when adding another person as a
member of a conference.

<br><dt><code>passive</code>
<dd>The member is not actively participating in the conference.  Passive
members do not receive messages (see <a href="#async-send-message">async-send-message</a>) and
should not be displayed as active members by clients.  See also
<code>passive-message-invert</code>.

<br><dt><code>secret</code>
<dd>The member does not wish to disclose the membership.  Secret memberships
and members are cleared before being returned to a person who is not a
supervisor of the member or has sufficient privileges enabled.

<br><dt><code>passive-message-invert</code>
<dd>If this bit is set, the <code>passive</code> bit is inverted when checking
for messages (see <a href="#async-send-message">async-send-message</a>) to this conference.  In
other words, messages are blocked if one (but not both) of the bits
<code>passive</code> and <code>passive-message-invert</code> are set.

</dl>

<p>The remaining flags in the <code>Membership-Type</code> structure are reserved
and should be set to false on all new memberships and retained on all
existing memberships.

<p><a name="Member"></a>
<br><pre>        Member          ::=
              ( member          :       <a href="#Pers-No">Pers-No</a>;
                added-by        :       <a href="#Pers-No">Pers-No</a>;
                added-at        :       <a href="#Time">Time</a>;
                type            :       <a href="#Membership-Type">Membership-Type</a>;
              )
</pre>

<p>The <code>Member</code> structure encodes information about a member in a
conference.  It is returned by the <code><a href="#get-members">get-members</a></code>
 call.  The
fields of a <code>Member</code> structure are

<dl>
<dt><code>member</code>
<dd>The person who is a member of the conference. 
<br><dt><code>added-by</code>
<dd>The person who created the membership.  This field is zero only if the
membership was created before protocol version 10 was introduced. 
<br><dt><code>added-at</code>
<dd>The time when the membership was created.  This field is meaningless if
added-by is zero. 
<br><dt><code>type</code>
<dd>Flags modifying the membership. 
</dl>

<p>The contents of a <code>Member</code> structure can be cleared (all fields set
to zero) if the person requesting the record has insufficient privileges
to see the contents of the structure.

<p><a name="Membership"></a>
<a name="Read-Range"></a>
<br><pre>        Read-Range ::=
              ( first-read      :       <a href="#Local-Text-No">Local-Text-No</a>;
                last-read       :       <a href="#Local-Text-No">Local-Text-No</a>;
              )

        Membership ::=
              ( position        :       <a href="#INT32">INT32</a>;
                last-time-read  :       <a href="#Time">Time</a>;
                conference      :       <a href="#Conf-No">Conf-No</a>;
                priority        :       <a href="#INT8">INT8</a>;
                read-ranges     :       <a href="#ARRAY">ARRAY</a> <a href="#Read-Range">Read-Range</a>;
                added-by        :       <a href="#Pers-No">Pers-No</a>;
                added-at        :       <a href="#Time">Time</a>;
                type            :       <a href="#Membership-Type">Membership-Type</a>;
              )
<a name="Membership-Old"></a>
        Membership-Old ::=
              ( last-time-read  :       <a href="#Time">Time</a>;
                conference      :       <a href="#Conf-No">Conf-No</a>;
                priority        :       <a href="#INT8">INT8</a>;
                last-text-read  :       <a href="#Local-Text-No">Local-Text-No</a>;
                read-texts      :       <a href="#ARRAY">ARRAY</a> <a href="#Local-Text-No">Local-Text-No</a>;
              )

<a name="Membership-10"></a>
        Membership-10 ::=
              ( position        :       <a href="#INT32">INT32</a>;
                last-time-read  :       <a href="#Time">Time</a>;
                conference      :       <a href="#Conf-No">Conf-No</a>;
                priority        :       <a href="#INT8">INT8</a>;
                last-text-read  :       <a href="#Local-Text-No">Local-Text-No</a>;
                read-texts      :       <a href="#ARRAY">ARRAY</a> <a href="#Local-Text-No">Local-Text-No</a>;
                added-by        :       <a href="#Pers-No">Pers-No</a>;
                added-at        :       <a href="#Time">Time</a>;
                type            :       <a href="#Membership-Type">Membership-Type</a>;
              )
</pre>

<p>The <code>Membership</code> structure encodes information about a person's
membership in a conference.  It is returned by the
<code><a href="#query-read-texts">query-read-texts</a></code> and <code><a href="#get-membership">get-membership</a></code>
 calls.

<p>The <code>Membership-10</code> and <code>Membership-Old</code> types are obsolete
variants of the same type, returned by older requests. 
<code>Membership-Old</code> contains less information.  The encoding of the
read texts in <code>Membership-10</code> is very inefficient in the common
case where you have read many texts after the first unread text.

<dl>
<dt><code>position</code>
<dd>The position of this membership in the membership list. 
<br><dt><code>last-time-read</code>
<dd>The time when the person last read anything from the conference.  This
will contain the start of the epoch if the <code>unread-is-secret</code>
bit of the <code>Personal-Flags</code> is set and you don't have enough
privileges to get the info anyhow. 
<br><dt><code>conference</code>
<dd>The conference this membership data pertains to. 
<br><dt><code>priority</code>
<dd>The priority the person has assigned to the conference.  The higher the
number, the higher the priority.  In the past, priority zero indicated a
passive membership.  This usage is now obsolete. 
<br><dt><code>last-text-read</code>
<dd>The local number of last text read in the conference.  This will be
set to 0 if <code>unread-is-secret</code> is set, unless you have access to
the data anyhow.  This field is not available in <code>Membership</code>,
but you can easily derive the same information from
<code>read-ranges</code>. 
<br><dt><code>read-texts</code>
<dd>Additional texts beyond <code>last-text-read</code> that have also been
read.  This will be empty if <code>unread-is-secret</code> is set, unless
you have access to the data anyhow. 
<br><dt><code>read-ranges</code>
<dd>A list of ranges of all read texts.  This will be empty if
<code>unread-is-secret</code> is set, unless you have access to the data
anyhow. 
<br><dt><code>added-by</code>
<dd>The person who created the membership.  This field is zero if the
membership was created before protocol version 10 was introduced. 
<br><dt><code>added-at</code>
<dd>The time when the membership was created.  This field is meaningless if
added-by is zero. 
<br><dt><code>type</code>
<dd>Flags modifying the membership. 
</dl>

<p>A membership record may be cleared by the server (all fields set to
zero) if the person requesting the membership has insufficient
privileges to see the contents membership, but has sufficient privileges
to know about the person.

<p><hr>
Node:<a name="Article%20Marks">Article Marks</a>,
Next:<a rel=next accesskey=n href="#Article%20Information">Article Information</a>,
Previous:<a rel=previous accesskey=p href="#Membership%20Information">Membership Information</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Article Marks</h3>

<p><a name="Mark"></a>
<br><pre>        Mark ::=
                ( text-no       :       <a href="#Text-No">Text-No</a>;
                  type          :       <a href="#INT8">INT8</a>;
                )
</pre>

<p>This data type hold information about a person's marks on articles.

<p>The fields of <code>Mark</code> are

<dl>
<dt><code>text-no</code>
<dd>The text number marked. 
<br><dt><code>type</code>
<dd>The mark value. 
</dl>

<p>Before version eight of protocol A, the meaning of the mark value was
unspecified.  Work is underway to specify the meaning of certain mark
values.

<p><hr>
Node:<a name="Article%20Information">Article Information</a>,
Next:<a rel=next accesskey=n href="#Who%20Information">Who Information</a>,
Previous:<a rel=previous accesskey=p href="#Article%20Marks">Article Marks</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Article Information</h3>

<p><a name="Misc-Info"></a>
<br><pre>        Misc-Info ::= SELECTION
                ( 0=recpt       recipient       :       <a href="#Conf-No">Conf-No</a>;
                  1=cc-recpt    cc-recipient    :       <a href="#Conf-No">Conf-No</a>;
                  2=comm-to     comment-to      :       <a href="#Text-No">Text-No</a>;
                  3=comm-in     commented-in    :       <a href="#Text-No">Text-No</a>;
                  4=footn-to    footnote-to     :       <a href="#Text-No">Text-No</a>;
                  5=footn-in    footnoted-in    :       <a href="#Text-No">Text-No</a>;
                  6=loc-no      local-no        :       <a href="#Local-Text-No">Local-Text-No</a>;
                  7=rec-time    received-at     :       <a href="#Time">Time</a>;
                  8=sent-by     sender          :       <a href="#Pers-No">Pers-No</a>;
                  9=sent-at     sent-at         :       <a href="#Time">Time</a>;
                 15=bcc-recpt   bcc-recipient   :       <a href="#Conf-No">Conf-No</a>;
               )

<a name="Info-Type"></a>
        Info-Type ::= ENUMERATION-OF(<a href="#Misc-Info">Misc-Info</a>)

<a name="Text-Stat-Old"></a>
        Text-Stat-Old ::=
              ( creation-time   :       <a href="#Time">Time</a>;
                author          :       <a href="#Pers-No">Pers-No</a>;
                no-of-lines     :       <a href="#INT32">INT32</a>;
                no-of-chars     :       <a href="#INT32">INT32</a>;
                no-of-marks     :       <a href="#INT16">INT16</a>;
                misc-info       :       <a href="#ARRAY">ARRAY</a> <a href="#Misc-Info">Misc-Info</a>;
              )

<a name="Text-Stat"></a>
        Text-Stat ::=
              ( creation-time   :       <a href="#Time">Time</a>;
                author          :       <a href="#Pers-No">Pers-No</a>;
                no-of-lines     :       <a href="#INT32">INT32</a>;
                no-of-chars     :       <a href="#INT32">INT32</a>;
                no-of-marks     :       <a href="#INT16">INT16</a>;
                misc-info       :       <a href="#ARRAY">ARRAY</a> <a href="#Misc-Info">Misc-Info</a>;
                aux-items       :       <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item">Aux-Item</a>;
              )

</pre>

<p>These two structures contain information about a single article. 
<code>Text-Stat</code> contains core information about the article and
<code>Misc-Info</code> contains miscellaneous information related to the
article.

<p>A <code>Text-Stat</code> consists of the following:

<dl>
<dt><code>creation-time</code>
<dd>The time when the article was created. 
<br><dt><code>author</code>
<dd>The author of the article. 
<br><dt><code>no-of-lines</code>
<dd>The number of lines in the article. 
<br><dt><code>no-of-chars</code>
<dd>The number of characters in the article. 
<br><dt><code>no-of-marks</code>
<dd>The number of marks added to this article by persons. 
<br><dt><code>misc-info</code>
<dd>The <code>Misc-Info</code> list for this article. 
<br><dt><code>aux-items</code>
<dd>The list of aux items for this article. 
</dl>

<p><code>Misc-Info</code>, when sent to the client, is sent in a particular order
(see <a href="#The%20Misc-Info%20List">The Misc-Info List</a>).  The variants <code>Misc-Info</code> are
(briefly):

<dl>
<dt><code>recpt</code>
<dd>Used to specify recipients of the article. 
<br><dt><code>cc-recpt</code>
<dd>Specifies recipients who have received a copy of the article but who
will not receive comments. 
<br><dt><code>comm-to</code>
<dd>Specifies an article this article is a comment to. 
<br><dt><code>comm-in</code>
<dd>Specifies an article in which there are comments to this article. 
<br><dt><code>footn-to</code>
<dd>Specifies an article this article is a footnote to. 
<br><dt><code>footn-in</code>
<dd>Specifies an article to which this article is a footnote. 
<br><dt><code>loc-no</code>
<dd>Specifies the local text number of this article in the conference
specified by <code>recpt</code>, <code>cc-recpt</code> or <code>bcc-recpt</code>. 
<br><dt><code>rec-time</code>
<dd>Specifies the time when this article was received by the conference
specified by <code>recpt</code>, <code>cc-recpt</code> or <code>bcc-recpt</code>. 
<br><dt><code>sent-by</code>
<dd>Specifies who sent this article to the conference specified by
<code>recpt</code>, <code>cc-recpt</code> or <code>bcc-recpt</code>. 
<br><dt><code>sent-at</code>
<dd>Specifies when the article was sent to the conference specified by
<code>recpt</code>, <code>cc-recpt</code> or <code>bcc-recpt</code>. 
<br><dt><code>bcc-recpt</code>
<dd>Specifies a blind carbon copy recipient.  This item is only accepted by
protocol version 10 servers and is only sent in responses and messages
introduced in protocol version 10 or later. 
</dl>

<p><hr>
Node:<a name="Who%20Information">Who Information</a>,
Next:<a rel=next accesskey=n href="#Session%20Information">Session Information</a>,
Previous:<a rel=previous accesskey=p href="#Article%20Information">Article Information</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Who Information</h3>

<p><a name="Who-Info-Old"></a>
<a name="Who-Info"></a>
<a name="Who-Info-Ident"></a>
<br><pre>        Who-Info-Old ::=
              ( person                  :       <a href="#Pers-No">Pers-No</a>;
                working-conference      :       <a href="#Conf-No">Conf-No</a>;
                what-am-i-doing         :       <a href="#HOLLERITH">HOLLERITH</a>;
              )

        Who-Info ::=
              ( person                  :       <a href="#Pers-No">Pers-No</a>;
                working-conference      :       <a href="#Conf-No">Conf-No</a>;
                session                 :       <a href="#Session-No">Session-No</a>;
                what-am-i-doing         :       <a href="#HOLLERITH">HOLLERITH</a>;
                username                :       <a href="#HOLLERITH">HOLLERITH</a>;
              )

        Who-Info-Ident ::=
              ( person                  :       <a href="#Pers-No">Pers-No</a>;
                working-conference      :       <a href="#Conf-No">Conf-No</a>;
                session                 :       <a href="#Session-No">Session-No</a>;
                what-am-i-doing         :       <a href="#HOLLERITH">HOLLERITH</a>;
                username                :       <a href="#HOLLERITH">HOLLERITH</a>;
                hostname                :       <a href="#HOLLERITH">HOLLERITH</a>;
                ident-user              :       <a href="#HOLLERITH">HOLLERITH</a>;
              )
</pre>

<p>These structures are used to retrieve information on who is currently
using LysKOM.  All the requests using these types are obsolete, but
<code>Who-Info</code> is used by <code>async-i-am-on</code>
(see <a href="#async-i-am-on">async-i-am-on</a>).

<p>The fields of <code>Who-Info-Old</code> are
<dl>
<dt><code>person</code>
<dd>The person the information is about. 
<br><dt><code>working-conference</code>
<dd>The conference the person is currently in. 
<br><dt><code>what-am-i-doing</code>
<dd>A client-supplied string saying what the person is doing. 
</dl>

<p>The fields of <code>Who-Info</code> are
<dl>
<dt><code>person</code>
<dd>The person the information is about. 
<br><dt><code>working-conference</code>
<dd>The conference the person is currently in. 
<br><dt><code>session</code>
<dd>The person's session number. 
<br><dt><code>what-am-i-doing</code>
<dd>A client-supplied string saying what the person is doing. 
<br><dt><code>username</code>
<dd>The name of the "real" user constructed from <code>hostname</code> and
<code>ident-user</code> (see below) and information from the client. 
</dl>

<p>The fields of <code>Who-Info-Ident</code> are
<dl>
<dt><code>person</code>
<dd>The person the information is about. 
<br><dt><code>working-conference</code>
<dd>The conference the person is currently in. 
<br><dt><code>session</code>
<dd>The person's session number. 
<br><dt><code>what-am-i-doing</code>
<dd>A client-supplied string saying what the person is doing. 
<br><dt><code>username</code>
<dd>The name of the "real" user constructed from <code>hostname</code> and
<code>ident-user</code>. 
<br><dt><code>hostname</code>
<dd>The host the connection originated at. 
<br><dt><code>ident-user</code>
<dd>The user name according to the Ident d&aelig;mon
at the user's machine or "unknown" if Ident was not used. 
</dl>

<p><hr>
Node:<a name="Session%20Information">Session Information</a>,
Next:<a rel=next accesskey=n href="#Statistics">Statistics</a>,
Previous:<a rel=previous accesskey=p href="#Who%20Information">Who Information</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Session Information</h3>

<p><a name="Session-Info"></a>
<a name="Session-Info-Ident"></a>
<br><pre>        Session-Info ::=
              ( person                  :       <a href="#Pers-No">Pers-No</a>;
                working-conference      :       <a href="#Conf-No">Conf-No</a>;
                session                 :       <a href="#Session-No">Session-No</a>;
                what-am-i-doing         :       <a href="#HOLLERITH">HOLLERITH</a>;
                username                :       <a href="#HOLLERITH">HOLLERITH</a>;
                idle-time               :       <a href="#INT32">INT32</a>;
                connection-time         :       <a href="#Time">Time</a>;
              )

        Session-Info-Ident ::=
              ( person                  :       <a href="#Pers-No">Pers-No</a>;
                working-conference      :       <a href="#Conf-No">Conf-No</a>;
                session                 :       <a href="#Session-No">Session-No</a>;
                what-am-i-doing         :       <a href="#HOLLERITH">HOLLERITH</a>;
                username                :       <a href="#HOLLERITH">HOLLERITH</a>;
                hostname                :       <a href="#HOLLERITH">HOLLERITH</a>;
                ident-user              :       <a href="#HOLLERITH">HOLLERITH</a>;
                idle-time               :       <a href="#INT32">INT32</a>;
                connection-time         :       <a href="#Time">Time</a>;
              )

<a name="Static-Session-Info"></a>
        Static-Session-Info ::=
              (
                username                : <a href="#HOLLERITH">HOLLERITH</a>;
                hostname                : <a href="#HOLLERITH">HOLLERITH</a>;
                ident-user              : <a href="#HOLLERITH">HOLLERITH</a>;
                connection-time         : <a href="#Time">Time</a>;
              )

<a name="Session-Flags"></a>
        Session-Flags ::= BITSTRING
              ( invisible;
                user-active-used;
                user-absent;
                reserved3;
                reserved4;
                reserved5;
                reserved6;
                reserved7;
              )

<a name="Dynamic-Session-Info"></a>
        Dynamic-Session-Info ::=
              ( session                 :       <a href="#Session-No">Session-No</a>;
                person                  :       <a href="#Pers-No">Pers-No</a>;
                working-conference      :       <a href="#Conf-No">Conf-No</a>;
                idle-time               :       <a href="#INT32">INT32</a>;
                flags                   :       <a href="#Session-Flags">Session-Flags</a>;
                what-am-i-doing         :       <a href="#HOLLERITH">HOLLERITH</a>;
              )

<a name="Scheduling-Info"></a>
        Scheduling-Info ::=
              ( priority                : <a href="#INT16">INT16</a>;
                weight                  : <a href="#INT16">INT16</a>;
              )
</pre>

<p>These data types give information about a particular LysKOM session.  The
types <code>Session-Info</code> and <code>Session-Info-Ident</code> have been
superseded by <code>Static-Session-Info</code> and
<code>Dynamic-Session-Info</code>.  The static session info represents
information about a session that does not change during the lifetime of
the session.  Therefore static session infos can be aggressively cached by
the client.

<p>The fields of <code>Session-Info</code> are
<dl>
<dt><code>person</code>
<dd>The person using this session. 
<br><dt><code>working-conference</code>
<dd>The conference the session is currently in. 
<br><dt><code>session</code>
<dd>The number of this session. 
<br><dt><code>what-am-i-doing</code>
<dd>A client-supplied string saying what the person is currently doing. 
<br><dt><code>username</code>
<dd>The name of the "real" user (see <code>Who-Info</code> above.) 
<br><dt><code>idle-time</code>
<dd>The number of seconds since <code><a href="#user-active">user-active</a></code>
 was used by this
session, or since the session was created if
<code>user-active</code> has not been used yet.  See also
<code>user-active-used</code> below. 
<br><dt><code>connection-time</code>
<dd>The time when the connection was initiated.  This is not the same as the
amount of time the person has been on. 
</dl>

<p>The fields of <code>Session-Info-Ident</code> are
<dl>
<dt><code>person</code>
<dd>The person using this session. 
<br><dt><code>working-conference</code>
<dd>The conference the session is currently in. 
<br><dt><code>session</code>
<dd>The number of this session. 
<br><dt><code>what-am-i-doing</code>
<dd>A client-supplied string saying what the person is currently doing. 
<br><dt><code>username</code>
<dd>The name of the "real" user (see <code>Who-Info-Ident</code> above.) 
<br><dt><code>hostname</code>
<dd>The host the connection originated at. 
<br><dt><code>ident-user</code>
<dd>The user name according to the Ident d&aelig;mon
at the user's machine or "unknown"
if Ident was not used. 
<br><dt><code>idle-time</code>
<dd>The number of seconds since <code><a href="#user-active">user-active</a></code>
 was used by this
session, or since the session was created if
<code>user-active</code> has not been used yet.  See also
<code>user-active-used</code> below. 
<br><dt><code>connection-time</code>
<dd>The time when the connection was initiated.  This is not the same as the
amount of time the person has been on. 
</dl>

<p>The fields of <code>Static-Session-Info</code> are

<dl>
<dt><code>username</code>
<dd>The name of the "real" user (see <code>Who-Info-Ident</code> above.) 
<br><dt><code>hostname</code>
<dd>The host the connection originated at. 
<br><dt><code>ident-user</code>
<dd>The user name according to the Ident d&aelig;mon
at the user's machine or "unknown"
if Ident was not used. 
<br><dt><code>connection-time</code>
<dd>The time when the connection was initiated.  This is not the same as the
amount of time the person has been on. 
</dl>

<p>The bits in <code>Session-Flags</code> are:

<dl>
<dt><code>invisible</code>
<dd>When true, the user requested an invisible session (see <a href="#login">login</a>). 
Sessions where no-one is logged in also have the <code>invisible</code> flag
set. 
<br><dt><code>user-active-used</code>
<dd>When true, the <code><a href="#user-active">user-active</a></code>
 call has been issued by
the session, which in turn means that <code>idle-time</code> fields of
<code>Dynamic-Session-Info</code>, <code>Session-Info</code> and
<code>Session-Info-Ident</code> are valid.  When false, the
<code>idle-time</code> fields contains the number of seconds since the
session was created. 
<br><dt><code>user-absent</code>
<dd>This flag is currently not used. 
</dl>

<p>The fields of a <code>Dynamic-Session-Info</code> are

<dl>
<dt><code>session</code>
<dd>The session number of the session. 
<br><dt><code>person</code>
<dd>The person currently logged on, or zero if the session has not yet
logged on. 
<br><dt><code>working-conference</code>
<dd>The conference the session is currently in. 
<br><dt><code>idle-time</code>
<dd>The number of seconds since <code><a href="#user-active">user-active</a></code>
 was used by this
session, or since the session was created if
<code>user-active</code> has not been used yet.  See also
<code>user-active-used</code> above. 
<br><dt><code>flags</code>
<dd>The dynamic session flags (see above.) 
<br><dt><code>what-am-i-doing</code>
<dd>What the client is doing.  This string is set by the client. 
</dl>

<p>The <code>Scheduling-Info</code> type determines how the resources are
shared between different sessions<a rel=footnote href="#fn-12"><sup>12</sup></a>. 
See <code><a href="#get-scheduling">get-scheduling</a></code> and <code><a href="#set-scheduling">set-scheduling</a></code> for more
information.  It contains these fields:

<dl>
<dt><code>priority</code>
<dd>Clients with a numerically lower <code>priority</code> value will have
priority over other clients.  A client with <code>priority</code> set to 0
can totally starve clients with <code>priority</code> set to 1, 2 or
anything higher.

<br><dt><code>weight</code>
<dd>Within a priority class, the resources are shared in proportion to the
<code>weight</code> value.  If one client has a weight of 200 and another of
50, the first client will get roughly four times as much work done
(assuming that the server is the limiting factor).

</dl>

<p><hr>
Node:<a name="Statistics">Statistics</a>,
Previous:<a rel=previous accesskey=p href="#Session%20Information">Session Information</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Data%20Types">LysKOM Data Types</a>
<br>

<h3>Statistics</h3>

<p><a name="Stats"></a>
<a name="Stats-Description"></a>
<br><pre>        Stats ::=
              ( average      : <a href="#FLOAT">FLOAT</a>;
                ascent-rate  : <a href="#FLOAT">FLOAT</a>;
                descent-rate : <a href="#FLOAT">FLOAT</a>;
              )

        Stats-Description ::=
              ( what : <a href="#ARRAY">ARRAY</a> <a href="#HOLLERITH">HOLLERITH</a>;
                when : <a href="#ARRAY">ARRAY</a> <a href="#INT32">INT32</a>;
              )
</pre>

<p>The <code>Stats</code> structure returns information about a measured value.

<dl>
<dt><code>average</code>
<dd>The <code>average</code> is the average value for the measurement period. 
If the measurement period is 0, this is instead the current value.

<br><dt><code>ascent-rate</code>
<dt><code>descent-rate</code>
<dd>These fields indicate the activity for this value, measured in units
per second.  If the measured value is pending DNS requests, the
<code>ascent-rate</code> would be the average number of issued requests per
second, and the <code>descent-rate</code> would be the average number of
received replies (or timeouts, errors, or other reasons why the
request is no longer pending).

<p>When calculating the <code>ascent-rate</code>, only events that cause the
value to increase are considered.  Likewise, the <code>descent-rate</code>
only considers events that decrease the value.

<p>Example: if the measurement period is 60 seconds, the value starts at
5, and it is increased by one 90 times and decreased by one 60 times
during the measurement period, the value will of course be 35 when the
period ends.  The ascent rate will be 1.5 per second, and the descent
rate 1.0 per second.

<p>If the measurement period is 0, both <code>ascent-rate</code> and
<code>descent-rate</code> are set to 0.

</dl>

<p>The <code>Stats-Description</code> structure returns information about what
kind of statistical information that the server gathers.  It contains
these fields:

<dl>
<dt><code>what</code>
<dd>A list of all things that the server collect statistics about. 
<a href="#Measured%20Properties">Measured Properties</a>, for a list of things that might be included
in this list.

<br><dt><code>when</code>
<dd>The statistics returned by <code><a href="#get-stats">get-stats</a></code> is a number of values
collected during various periods of time.  This array contains the
periods, measured in seconds.  The value 0 means that the current
value is returned.  The values are only returned in ascending order,
so if 0 is included it will be the first value.  <a href="#Measured%20Properties">Measured Properties</a>, for more info.

</dl>

<p><hr>
Node:<a name="Protocol%20Requests">Protocol Requests</a>,
Next:<a rel=next accesskey=n href="#Asynchronous%20Messages">Asynchronous Messages</a>,
Previous:<a rel=previous accesskey=p href="#LysKOM%20Data%20Types">LysKOM Data Types</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Protocol Requests</h2>

<p>This chapter documents all calls that can be made to the server.  All
calls are annotated with the protocol version in which they appeared and
their current status.

<ul>
<li><a accesskey=1 href="#Protocol%20Notation">Protocol Notation</a>:            The notation used when describing the
                                  requests and their replies. 
<li><a accesskey=2 href="#login-old">login-old</a>:                    O Log in to LysKOM. Call 62 is preferred    (0)
<li><a accesskey=3 href="#logout">logout</a>:                       r Log out. Call 62 to log in again          (1)
<li><a accesskey=4 href="#change-conference">change-conference</a>:            r Change current conference                 (2)
<li><a accesskey=5 href="#change-name">change-name</a>:                  r Change name of a conference or person     (3)
<li><a accesskey=6 href="#change-what-i-am-doing">change-what-i-am-doing</a>:       r Change what-am-i-doing in who information (4)
<li><a accesskey=7 href="#create-person-old">create-person-old</a>:            O Create a person                           (5)
<li><a accesskey=8 href="#get-person-stat-old">get-person-stat-old</a>:          O Get person information. Use call 49       (6)
<li><a accesskey=9 href="#set-priv-bits">set-priv-bits</a>:                r Set privileges of a person                (7)
<li><a href="#set-passwd">set-passwd</a>:                   r Set password of a person                  (8)
<li><a href="#query-read-texts-old">query-read-texts-old</a>:         O Get info on what is read                  (9)
<li><a href="#create-conf-old">create-conf-old</a>:              O Create a conference                      (10)
<li><a href="#delete-conf">delete-conf</a>:                  r Delete a conference                      (11)
<li><a href="#lookup-name">lookup-name</a>:                  O Look up a name. Replaced by call 76      (12)
<li><a href="#get-conf-stat-older">get-conf-stat-older</a>:          O Get conference information. Use call 50  (13)
<li><a href="#add-member-old">add-member-old</a>:               O Add a member to a conference             (14)
<li><a href="#sub-member">sub-member</a>:                   r Remove a member from a conference        (15)
<li><a href="#set-presentation">set-presentation</a>:             r Set the presentation of a conference     (16)
<li><a href="#set-etc-motd">set-etc-motd</a>:                 r Set conference notice                    (17)
<li><a href="#set-supervisor">set-supervisor</a>:               r Set supervisor of a conference           (18)
<li><a href="#set-permitted-submitters">set-permitted-submitters</a>:     r Set permitted submitters of a conference (19)
<li><a href="#set-super-conf">set-super-conf</a>:               r Set super-conference of a conference     (20)
<li><a href="#set-conf-type">set-conf-type</a>:                r Set the type of a conference             (21)
<li><a href="#set-garb-nice">set-garb-nice</a>:                r Set garb-nice of a conference            (22)
<li><a href="#get-marks">get-marks</a>:                    r Get marks for a person                   (23)
<li><a href="#mark-text-old">mark-text-old</a>:                O Mark a text. Replaced by calls 72 and 73 (24)
<li><a href="#get-text">get-text</a>:                     r Get an article or part of an article     (25)
<li><a href="#get-text-stat-old">get-text-stat-old</a>:            O Get text status information              (26)
<li><a href="#mark-as-read">mark-as-read</a>:                 r Mark an article as read in a conference  (27)
<li><a href="#create-text-old">create-text-old</a>:              O Create an article                        (28)
<li><a href="#delete-text">delete-text</a>:                  r Delete an article                        (29)
<li><a href="#add-recipient">add-recipient</a>:                r Add a recipient to an article            (30)
<li><a href="#sub-recipient">sub-recipient</a>:                r Remove a recipient from an article       (31)
<li><a href="#add-comment">add-comment</a>:                  r Add a comment to an article              (32)
<li><a href="#sub-comment">sub-comment</a>:                  r Remove a comment from an article         (33)
<li><a href="#get-map">get-map</a>:                      O Map local text nos to global. Use 103    (34)
<li><a href="#get-time">get-time</a>:                     r Get the current time                     (35)
<li><a href="#get-info-old">get-info-old</a>:                 O Get server information                   (36)
<li><a href="#add-footnote">add-footnote</a>:                 r Add an article as a footnote to another  (37)
<li><a href="#sub-footnote">sub-footnote</a>:                 r Remove a footnote from an article        (38)
<li><a href="#who-is-on-old">who-is-on-old</a>:                O Get active sessions. Replaced by call 63 (39)
<li><a href="#set-unread">set-unread</a>:                   r Set number of unread in a conference     (40)
<li><a href="#set-motd-of-lyskom">set-motd-of-lyskom</a>:           r Set LysKOM message of the day            (41)
<li><a href="#enable">enable</a>:                       r Set security level                       (42)
<li><a href="#sync-kom">sync-kom</a>:                     r Save the database                        (43)
<li><a href="#shutdown-kom">shutdown-kom</a>:                 r Shut LysKOM down                         (44)
<li><a href="#broadcast">broadcast</a>:                    O Broadcast a message. Replaced by call 53 (45)
<li><a href="#get-membership-old">get-membership-old</a>:           O Get membership for a person. Use call 99 (46)
<li><a href="#get-created-texts">get-created-texts</a>:            O Get texts created by a user. Use 104     (47)
<li><a href="#get-members-old">get-members-old</a>:              O Get members of a conference. Use 101     (48)
<li><a href="#get-person-stat">get-person-stat</a>:              r Get status information for a person      (49)
<li><a href="#get-conf-stat-old">get-conf-stat-old</a>:            O Get status information for a conference  (50)
<li><a href="#who-is-on">who-is-on</a>:                    O Get current sessions.  Use call 63       (51)
<li><a href="#get-unread-confs">get-unread-confs</a>:             r Get conferences with unread articles     (52)
<li><a href="#send-message">send-message</a>:                 r Send a personal message                  (53)
<li><a href="#get-session-info">get-session-info</a>:             O Get session information. Use call 64     (54)
<li><a href="#disconnect">disconnect</a>:                   r Disconnect a session                     (55)
<li><a href="#who-am-i">who-am-i</a>:                     r Get current session number               (56)
<li><a href="#set-user-area">set-user-area</a>:                r Set a person's user area                 (57)
<li><a href="#get-last-text">get-last-text</a>:                r Get text created before a certain time   (58)
<li><a href="#create-anonymous-text-old">create-anonymous-text-old</a>:    O Create an anonymous text                 (59)
<li><a href="#find-next-text-no">find-next-text-no</a>:            r Get next text number                     (60)
<li><a href="#find-previous-text-no">find-previous-text-no</a>:        r Get previous text number                 (61)
<li><a href="#login">login</a>:                        r Log in to LysKOM                         (62)
<li><a href="#who-is-on-ident">who-is-on-ident</a>:              O Get current sessions                     (63)
<li><a href="#get-session-info-ident">get-session-info-ident</a>:       O Get session information                  (64)
<li><a href="#re-lookup-person">re-lookup-person</a>:             O Look up a person based on name           (65)
<li><a href="#re-lookup-conf">re-lookup-conf</a>:               O Look up a conference based on name       (66)
<li><a href="#lookup-person">lookup-person</a>:                O Find persons matching abbreviated name   (67)
<li><a href="#lookup-conf">lookup-conf</a>:                  O Find conference matching abbrev'd name   (68)
<li><a href="#set-client-version">set-client-version</a>:           r Set the name and version the client      (69)
<li><a href="#get-client-name">get-client-name</a>:              r Get the name of the client               (70)
<li><a href="#get-client-version">get-client-version</a>:           r Get the version of the client            (71)
<li><a href="#mark-text">mark-text</a>:                    r Mark a text                              (72)
<li><a href="#unmark-text">unmark-text</a>:                  r Unmark a text                            (73)
<li><a href="#re-z-lookup">re-z-lookup</a>:                  r Lookup for conferences and persons       (74)
<li><a href="#get-version-info">get-version-info</a>:             r Get protocol version of server           (75)
<li><a href="#lookup-z-name">lookup-z-name</a>:                r Look up an abbreviated name              (76)
<li><a href="#set-last-read">set-last-read</a>:                r Set text last read in a conference       (77)
<li><a href="#get-uconf-stat">get-uconf-stat</a>:               r Get abbreviated conference status        (78)
<li><a href="#set-info">set-info</a>:                     r Set server information                   (79)
<li><a href="#accept-async">accept-async</a>:                 r Select asynchronous messages to receive  (80)
<li><a href="#query-async">query-async</a>:                  r Ask server which async messages are sent (81)
<li><a href="#user-active">user-active</a>:                  r Tell the server that the user is active  (82)
<li><a href="#who-is-on-dynamic">who-is-on-dynamic</a>:            r Get a list of active users               (83)
<li><a href="#get-static-session-info">get-static-session-info</a>:      r Get static information about a session   (84)
<li><a href="#get-collate-table">get-collate-table</a>:            r Get the current collate table            (85)
<li><a href="#create-text">create-text</a>:                  r Create a text                            (86)
<li><a href="#create-anonymous-text">create-anonymous-text</a>:        r Create an anonymous text                 (87)
<li><a href="#create-conf">create-conf</a>:                  r Create a conference                      (88)
<li><a href="#create-person">create-person</a>:                r Create a person                          (89)
<li><a href="#get-text-stat">get-text-stat</a>:                r Get text status information              (90)
<li><a href="#get-conf-stat">get-conf-stat</a>:                r Get conference status information        (91)
<li><a href="#modify-text-info">modify-text-info</a>:             r Add or delete text aux items             (92)
<li><a href="#modify-conf-info">modify-conf-info</a>:             r Add or delete conference aux items       (93)
<li><a href="#get-info">get-info</a>:                     r Get server information                   (94)
<li><a href="#modify-system-info">modify-system-info</a>:           r Add or delete system aux items           (95)
<li><a href="#query-predefined-aux-items">query-predefined-aux-items</a>:   r Get list of aux-items the server knows   (96)
<li><a href="#set-expire">set-expire</a>:                   e Set the expire field of a conference     (97)
<li><a href="#query-read-texts-10">query-read-texts-10</a>:          O Get info on what is read                 (98)
<li><a href="#get-membership-10">get-membership-10</a>:            O Get membership for a person              (99)
<li><a href="#add-member">add-member</a>:                   r Add a member to a conference            (100)
<li><a href="#get-members">get-members</a>:                  r Get members of a conference             (101)
<li><a href="#set-membership-type">set-membership-type</a>:          r Modify the type of conference           (102)
<li><a href="#local-to-global">local-to-global</a>:              r Map local text numbers to global ones   (103)
<li><a href="#map-created-texts">map-created-texts</a>:            r Map texts created by a person to global (104)
<li><a href="#set-keep-commented">set-keep-commented</a>:           r Set how new comments protect old texts  (105)
<li><a href="#set-pers-flags">set-pers-flags</a>:               r Set personal flags                      (106)
<li><a href="#query-read-texts">query-read-texts</a>:             r Get info on what is read                (107)
<li><a href="#get-membership">get-membership</a>:               r Get membership for a person             (108)
<li><a href="#mark-as-unread">mark-as-unread</a>:               r Mark a text as not read                 (109)
<li><a href="#set-read-ranges">set-read-ranges</a>:              r Specify which texts that are read       (110)
<li><a href="#get-stats-description">get-stats-description</a>:        r Get a list of measured properties       (111)
<li><a href="#get-stats">get-stats</a>:                    r Get a measurement                       (112)
<li><a href="#get-boottime-info">get-boottime-info</a>:            r Get server startup status information   (113)
<li><a href="#first-unused-conf-no">first-unused-conf-no</a>:         r Get first unused conference number      (114)
<li><a href="#first-unused-text-no">first-unused-text-no</a>:         r Get first unused text number            (115)
<li><a href="#find-next-conf-no">find-next-conf-no</a>:            r Get next conference number              (116)
<li><a href="#find-previous-conf-no">find-previous-conf-no</a>:        r Get previous conference number          (117)
<li><a href="#get-scheduling">get-scheduling</a>:               e Get client priority information         (118)
<li><a href="#set-scheduling">set-scheduling</a>:               e Alter client priority                   (119)
<li><a href="#set-connection-time-format">set-connection-time-format</a>:   r Use UTC or local timezone of server?    (120)
<li><a href="#local-to-global-reverse">local-to-global-reverse</a>:      r Map local text numbers to global ones   (121)
<li><a href="#map-created-texts-reverse">map-created-texts-reverse</a>:    r Map texts created by a person to global (122)
</ul>

<p><hr>
Node:<a name="Protocol%20Notation">Protocol Notation</a>,
Next:<a rel=next accesskey=n href="#login-old">login-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>Protocol Notation</h3>

<p>The heading for each call looks something like this:

<br><pre>create-person-old [5] (1) Obsolete (10)
</pre>

<p>The heading consists of several parts:

<dl>
<dt>The name: <code>create-person-old</code>
<dd>This is the name of the call.  The name is not considered part of the
protocol.  It may change in future versions of this document.  Since
the name is never sent over the network it doesn't matter that much.

<br><dt>The call number: <code>[5]</code>
<dd>The call number is what really matters, since it is sent over the
network.  It will never change.

<br><dt>Introduced: <code>(1)</code>
<dd>The protocol version when the call was first implemented.  Some calls
added more functionality in a later protocol version.  The description
for those calls describes such changes.

<br><dt>The status: <code>Obsolete</code>
<dd>The status of the call (see below).

<br><dt>Made obsolete: <code>(10)</code>
<dd>This figure is only present for some obsolete calls, and it states in
which protocol version the call was obsoleted.

</dl>

<p>The status of a call can be any of:

<dl>
<dt><code>Experimental</code>
<dd>The call is experimental.  No client should rely on the existence of this
call.  Experimental calls that are useful will usually become recommended
in future versions.

<br><dt><code>Recommended</code>
<dd>The call is a standard call.  Clients are recommended to use these calls
rather than experimental or obsolete ones.  Servers are required to
implement all recommended calls.

<br><dt><code>Obsolete</code>
<dd>The call should no longer be used by clients.  Servers should implement
these, or they will be incompatible with old client versions. 
<em>Please note:</em> the documentation for the obsolete calls may be
incomplete.  Many of them perform compatibility magic to ensure that
they never return anything that old clients don't expect.  This
compatibility magic is often documented, but we may have forgotten to
document it in some places. 
</dl>

<p><i>A note about the examples:</i> The examples consist of a number of calls
and replies. 
Extra newlines are sometimes inserted in the examples to avoid overly
long lines.

<p><hr>
Node:<a name="login-old">login-old</a>,
Next:<a rel=next accesskey=n href="#logout">logout</a>,
Previous:<a rel=previous accesskey=p href="#Protocol%20Notation">Protocol Notation</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>login-old [0] (1) Obsolete (4)</h3>

<br><pre>        login-old [0] (( person : <a href="#Pers-No">Pers-No</a>;
                         passwd : <a href="#HOLLERITH">HOLLERITH</a> )) -&gt; ( );
</pre>

<p>Log in as a person.  This call has been replaced by <code><a href="#login">login</a></code>.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-person</code>
<dd><code>person</code> is not an existing person.

<br><dt><code>login-disallowed</code>
<dd>Logins are not allowed and <code>person</code> does not have the <code>wheel</code>
bit set.

<br><dt><code>invalid-password</code>
<dd><code>passwd</code> is not the correct password for <code>person</code>.  The
<code>error-status</code> indicates the person number.

</dl>

<p><hr>
Node:<a name="logout">logout</a>,
Next:<a rel=next accesskey=n href="#change-conference">change-conference</a>,
Previous:<a rel=previous accesskey=p href="#login-old">login-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>logout [1] (1) Recommended</h3>

<br><pre>        logout [1] ( )
                -&gt; ( );
</pre>

<p>Log out from LysKOM.

<p>This call does not disconnect the session; use <code><a href="#disconnect">disconnect</a></code>

<p>for that.

<p>After issuing a <code>logout</code> call the client can reconnect as the same
or a different person using the <code><a href="#login">login</a></code>
 call.

<p>For a client that needs to log in as several different users, issuing
multiple logout and login requests during one session is faster and
places less load on the server than does creating new sessions.

<h4>Error codes</h4>

<p>This call never fails.

<p><hr>
Node:<a name="change-conference">change-conference</a>,
Next:<a rel=next accesskey=n href="#change-name">change-name</a>,
Previous:<a rel=previous accesskey=p href="#logout">logout</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>change-conference [2] (1) Recommended</h3>

<br><pre>        change-conference [2] ( conference : <a href="#Conf-No">Conf-No</a> )
                -&gt; ( ) ;
</pre>

<p>Change current conference of a session.  This call used to be called
pepsi (the name was a very obscure and not very funny joke.)

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>The session is not logged in yet.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conference</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero.

<br><dt><code>not-member</code>
<dd>The user currently logged in is not a member of <code>conference</code>. 
</dl>

<p><hr>
Node:<a name="change-name">change-name</a>,
Next:<a rel=next accesskey=n href="#change-what-i-am-doing">change-what-i-am-doing</a>,
Previous:<a rel=previous accesskey=p href="#change-conference">change-conference</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>change-name [3] (1) Recommended</h3>

<br><pre>        change-name [3] (( conference : <a href="#Conf-No">Conf-No</a>;
                           new-name   : <a href="#HOLLERITH">HOLLERITH</a> ))
                -&gt; ( ) ;
</pre>

<p>This call changes the name of a conference or a person.  To change the
name of a conference the session issuing the call must be logged in as a
person who either has special privileges or is the supervisor of the
conference.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>The session is not logged in yet.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conference</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero.

<br><dt><code>permission-denied</code>
<dd>Permission denied.  The <code>change-name</code> bit is not set or the user
does not have enough access to <code>conference</code>.

<br><dt><code>conference-exists</code>
<dd><code>new-name</code> is already occupied by another conference.

<br><dt><code>string-too-long</code>
<dd><code>new-name</code> is too long for a valid conference name.

<br><dt><code>bad-name</code>
<dd>There are invalid characters in <code>new-name</code>. 
</dl>

<p><hr>
Node:<a name="change-what-i-am-doing">change-what-i-am-doing</a>,
Next:<a rel=next accesskey=n href="#create-person-old">create-person-old</a>,
Previous:<a rel=previous accesskey=p href="#change-name">change-name</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>change-what-i-am-doing [4] (1) Recommended</h3>

<br><pre>        change-what-i-am-doing [4] ( what-am-i-doing : <a href="#HOLLERITH">HOLLERITH</a> )
                -&gt; ( );
</pre>

<p>This call tells the server what the logged-in user is doing.  The string
is usually displayed when a user requests that a client list who is
using LysKOM.  Clients are encouraged to use this call creatively.

<h4>Error codes</h4>

<dl>
<dt><code>string-too-long</code>
<dd><code>what-am-i-doing</code> is too long. 
</dl>

<p><hr>
Node:<a name="create-person-old">create-person-old</a>,
Next:<a rel=next accesskey=n href="#get-person-stat-old">get-person-stat-old</a>,
Previous:<a rel=previous accesskey=p href="#change-what-i-am-doing">change-what-i-am-doing</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>create-person-old [5] (1) Obsolete (10)</h3>

<br><pre>        create-person-old [5] (( name   : <a href="#HOLLERITH">HOLLERITH</a>;
                                 passwd : <a href="#HOLLERITH">HOLLERITH</a> ))
                -&gt; ( <a href="#Pers-No">Pers-No</a> );
</pre>

<p>This call requests that the server create a new person with the name and
password given as arguments.  To create a person the session may have to
be logged in as a person with sufficient privileges, if the server is
configured that way.

<p>If the session was not logged in an automatic visible login to the new
person will be performed.

<p>The new person will be a member of exactly one conference: the
associated mailbox.  That membership will have priority 255 and (of
course) position 0.  All flags of the membership will be 0.

<p><i>Example:</i>
<br><pre>        1 5 24HLysKOM Statistics Daemon 6Hsecret
        <tt>=1 6</tt>
</pre>

<p>This example creates a new person named "LysKOM statistics Daemon"
with the password "secret". The server has returned the person number
six for the person.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>The session is not logged in and the server does not allow person
creation before logging in.

<br><dt><code>permission-denied</code>
<dd>The server does not allow everyone to create person and the person
currently logged on does not have the <code>create-pers</code> bit set.

<br><dt><code>conference-exists</code>
<dd>There is already a conference named <code>name</code>.

<br><dt><code>invalid-password</code>
<dd>The string <code>passwd</code> is not a valid password.

<br><dt><code>index-out-of-range</code>
<dd>Attempt to create a person failed because we reached the maximum number
of conferences permitted.  The <code>error-status</code> indicates the
person number that should have been created if the limit hadn't been
reached. 
</dl>

<p><hr>
Node:<a name="get-person-stat-old">get-person-stat-old</a>,
Next:<a rel=next accesskey=n href="#set-priv-bits">set-priv-bits</a>,
Previous:<a rel=previous accesskey=p href="#create-person-old">create-person-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-person-stat-old [6] (1) Obsolete (1)</h3>

<br><pre>        get-person-stat-old [6] (( person : <a href="#Pers-No">Pers-No</a>;
                                   mask   : <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#Person">Person</a> );
</pre>

<p>This call returns information about a person.  If the low bit of
<code>mask</code> is not set, the empty string is returned instead of the
<code>username</code> field.  This call is obsolete and has been replaced
by <code><a href="#get-person-stat">get-person-stat</a></code>.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>This call can't be executed without logging in first.

<br><dt><code>undefined-person</code>
<dd>Person <code>person</code> does not exist.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>person</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>person</code> is zero. 
</dl>

<p><hr>
Node:<a name="set-priv-bits">set-priv-bits</a>,
Next:<a rel=next accesskey=n href="#set-passwd">set-passwd</a>,
Previous:<a rel=previous accesskey=p href="#get-person-stat-old">get-person-stat-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-priv-bits [7] (1) Recommended</h3>

<br><pre>        set-priv-bits [7] (( person     : <a href="#Pers-No">Pers-No</a>;
                             privileges : <a href="#Priv-Bits">Priv-Bits</a> )) -&gt; ( );
</pre>

<p>This call sets the privileges of <code>person</code> to
<code>privileges</code>.  See <a href="#Security">Security</a>.  To successfully issue this call the
session must be logged in as a person with sufficient privileges.

<p><i>Example:</i>
<br><pre>        1 7 6 0010000000000000
        <tt>=1</tt>
</pre>

<p>This example sets the privileges of person 6 to nothing but
<code>statistic</code>.  This particular set of privileges might be useful
for a person used by a statistics-collecting d&aelig;mon.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>This call can't be executed without logging in first.

<br><dt><code>undefined-person</code>
<dd><code>person</code> is not a valid person.

<br><dt><code>permission-denied</code>
<dd>The person currently logged in does not have the <code>wheel</code> bit set
and privilege level set to 6 or higher. 
</dl>

<p><hr>
Node:<a name="set-passwd">set-passwd</a>,
Next:<a rel=next accesskey=n href="#query-read-texts-old">query-read-texts-old</a>,
Previous:<a rel=previous accesskey=p href="#set-priv-bits">set-priv-bits</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-passwd [8] (1) Recommended</h3>

<br><pre>        set-passwd [8] (( person  : <a href="#Pers-No">Pers-No</a>;
                          old-pwd : <a href="#HOLLERITH">HOLLERITH</a>;
                          new-pwd : <a href="#HOLLERITH">HOLLERITH</a> )) -&gt; ( );
</pre>

<p>This call is used to set the password of <code>person</code> to
<code>new-pwd</code>.  Any person may set it's own password.  In addition
persons with sufficient privileges may set other persons' passwords. 
The password of the person currently logged in must match
<code>old-pwd</code>.

<p><i>Example:</i>
<br><pre>        1 8 5 6Hgazonk 7Ha9go8Hz
        <tt>=1</tt>
</pre>

<p>This example sets the password of the LysKOM administrator to "a9go8Hz"
provided that the old password was "gazonk".

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>This call cannot be executed without logging in.

<br><dt><code>undefined-person</code>
<dd><code>person</code> is not a valid person.

<br><dt><code>permission-denied</code>
<dd>Attempt to change password of another person without being the
supervisor of that person and without the <code>wheel</code> bit set and
privilege level 7 or higher enabled.

<br><dt><code>invalid-password</code>
<dd><code>old-pwd</code> is invalid or <code>new-pwd</code> is invalid as a password.

</dl>

<p><hr>
Node:<a name="query-read-texts-old">query-read-texts-old</a>,
Next:<a rel=next accesskey=n href="#create-conf-old">create-conf-old</a>,
Previous:<a rel=previous accesskey=p href="#set-passwd">set-passwd</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>query-read-texts-old [9] (1) Obsolete (10)</h3>

<br><pre>        query-read-texts-old [9] (( person     : <a href="#Pers-No">Pers-No</a>;
                                    conference : <a href="#Conf-No">Conf-No</a> ))
                -&gt; ( <a href="#Membership-Old">Membership-Old</a> );
</pre>

<p>This call is used to find the number of unread texts in a conference. 
The data it returns is actually a membership structure which specifies
which texts have been read.  It is up to the client to transform the data
to a more usable form.  <code>person</code> is the person being queried
and <code>conference</code> is the conference in question.

<p>Calling <code>query-read-texts-old</code> does not require the session to be
logged in.

<p><i>Example:</i>
<br><pre>        1 9 6 1
        <tt>=1 32 5 11 12 7 93 1 193 1 1 20 133 3 { 135 136 137 }</tt>
</pre>

<p>This example finds the read texts for user 6 in conference 1.  The
returned data indicates that the user last read conference 1 (the tenth
number) on Monday July 12th, 1993 at 11:05:32 (the first nine numbers),
that the person has assigned priority 20 to the conference (the eleventh
number) and that all articles up to and including local number 133 plus
articles 135, 136 and 137 have been read.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-person</code>
<dd><code>person</code> does not exist, or no access to person. 
<br><dt><code>undefined-conference</code>
<dd>Conference <code>conference</code> does not exist, or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero. 
<br><dt><code>not-member</code>
<dd><code>person</code> is not a member of <code>conference</code>. 
</dl>

<p><hr>
Node:<a name="create-conf-old">create-conf-old</a>,
Next:<a rel=next accesskey=n href="#delete-conf">delete-conf</a>,
Previous:<a rel=previous accesskey=p href="#query-read-texts-old">query-read-texts-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>create-conf-old [10] (1) Obsolete (10)</h3>

<br><pre>        create-conf-old [10] (( name : <a href="#HOLLERITH">HOLLERITH</a>;
                                type : <a href="#Any-Conf-Type">Any-Conf-Type</a> ))
                -&gt; ( <a href="#Conf-No">Conf-No</a> );
</pre>

<p>This call is used to create new conferences.  <code>name</code> is the name of
the new conference and <code>type</code> is its type.  If successful, the call
returns the conference number of the newly created conference.

<p>To use this call the session must have logged in as a user with
privileges to create conferences (see <a href="#Security">Security</a>).

<p><i>Example:</i>
<br><pre>        1 50 8
        <tt>%1 9 0</tt>
        1 10 13HInlägg }t mig 00001000
        <tt>=1 8</tt>
        1 50 8
        <tt>=1 13HInlägg }t mig 0000
           43 9 17 14 5 96 5 165 1
           43 9 17 14 5 96 5 165 1
           5 0 5 0 5 0 77 0 1 0</tt>
</pre>

<p>This example creates a new conference named
"Inlägg }t mig"<a rel=footnote href="#fn-13"><sup>13</sup></a> which accepts all users as
members and accepts anonymous articles.  The server returns 7 as the
new conference number.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>permission-denied</code>
<dd>The server does not allow everyone to create a conference and user does
not have the <code>create-conf</code> bit set.

<br><dt><code>conference-exists</code>
<dd>A conference named <code>name</code> already exists.

<br><dt><code>bad-name</code>
<dd><code>name</code> contains invalid characters.

<br><dt><code>string-to-long</code>
<dd><code>name</code> is too long to be used as a conference name.

<br><dt><code>secret-public</code>
<dd>The conference type <code>type</code> has the <code>secret</code> bit set, but
the <code>rd-prot</code> bit is cleared.

<br><dt><code>index-out-of-range</code>
<dd>Attempt to create a conference failed because we reached the maximum
number of conferences permitted.  The <code>error-status</code> indicates
the conference number that should have been created if the limit
hadn't been reached. 
</dl>

<p><hr>
Node:<a name="delete-conf">delete-conf</a>,
Next:<a rel=next accesskey=n href="#lookup-name">lookup-name</a>,
Previous:<a rel=previous accesskey=p href="#create-conf-old">create-conf-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>delete-conf [11] (1) Recommended</h3>

<br><pre>        delete-conf [11] ( conf : <a href="#Conf-No">Conf-No</a> ) -&gt; ( );
</pre>

<p>This call deletes the conference <code>conf</code> from the LysKOM
database.  Only privileged users and the supervisors of a conference may
delete it.  If the conference is a mailbox the corresponding person will
also be deleted.

<p><i>Example:</i>
<br><pre>        1 50 7
        <tt>=1 4HTest 1001
           16 4 19 10 5 96 1 161 1
           16 4 19 10 5 96 1 161 1
           7 0 7 0 0 0 77 1 1 0</tt>
        1 11 7
        <tt>=1</tt>
        1 50 7
        <tt>%1 9 0</tt>
</pre>

<p>This example shows the successful deletion of conference number seven.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd><code>conf</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf</code> is zero.

<br><dt><code>permission-denied</code>
<dd>Not supervisor of <code>conf</code> and not enough privileges enabled.

<br><dt><code>undefined-person</code>
<dd><code>conf</code> is a mailbox but does not exist as a person (the database
is corrupt.) 
</dl>

<p><hr>
Node:<a name="lookup-name">lookup-name</a>,
Next:<a rel=next accesskey=n href="#get-conf-stat-older">get-conf-stat-older</a>,
Previous:<a rel=previous accesskey=p href="#delete-conf">delete-conf</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>lookup-name [12] (1) Obsolete (7)</h3>

<br><pre>        lookup-name [12] ( name : <a href="#HOLLERITH">HOLLERITH</a> )
                -&gt; ( <a href="#Conf-List-Archaic">Conf-List-Archaic</a> );
</pre>

<p>This call returns a list of conferences matching the string <code>name</code>. 
lookup-name has been superseded by <code><a href="#lookup-z-name">lookup-z-name</a></code>.

<p><i>Example:</i>
<br><pre>        1 12 3Ha d
        <tt>=1 3 { 217 674 1582 } { 0000 1001 0000 }</tt>
        2 12 3H:::
        <tt>=2 0 * *</tt>
        3 76 3Ha d 1 1
        <tt>=3 3 { 31HAlkohol- (och annan) drogdebatt 0000 217
               13HAnna Degerman 1001 674
               27HAnarchy discussion (import) 0000 1582 }</tt>
        4 76 3H::: 1 1
        <tt>=4 0 *</tt>
</pre>

<p>This example shows two attempts to look up a name.  The first example
looks up <code>a d</code> and finds three matches (the middle, number 674,
is a person).  The second example looks up <code>:::</code> which doesn't
match any conference (or person).  Call number 3 and 4 issues the same
lookup using the <code><a href="#lookup-z-name">lookup-z-name</a></code>
 call. 
(The return value for call number 3 has been broken into three lines
to fit on the page.)

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="get-conf-stat-older">get-conf-stat-older</a>,
Next:<a rel=next accesskey=n href="#add-member-old">add-member-old</a>,
Previous:<a rel=previous accesskey=p href="#lookup-name">lookup-name</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-conf-stat-older [13] (1) Obsolete (1)</h3>

<br><pre>        get-conf-stat-older [13] (( conf-no : <a href="#Conf-No">Conf-No</a>;
                                    mask    : <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#Conference-Old">Conference-Old</a> );
</pre>

<p>This call retrieves the information associated with conference
<code>conf-no</code> in the LysKOM server.  This call should no longer be
used; use <code><a href="#get-conf-stat">get-conf-stat</a></code>
 instead.

<p>The <code>mask</code> argument determines if the name is returned or not.  If
the lowest bit is 1 the name is returned, otherwise the empty string is
returned instead of the name.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-conference</code>
<dd><code>conf-no</code> does not exist or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

</dl>

<p><hr>
Node:<a name="add-member-old">add-member-old</a>,
Next:<a rel=next accesskey=n href="#sub-member">sub-member</a>,
Previous:<a rel=previous accesskey=p href="#get-conf-stat-older">get-conf-stat-older</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>add-member-old [14] (1) Obsolete (10)</h3>

<br><pre>        add-member-old [14] (( conf-no  : <a href="#Conf-No">Conf-No</a>;
                               pers-no  : <a href="#Pers-No">Pers-No</a>;
                               priority : <a href="#INT8">INT8</a>;
                               where    : <a href="#INT16">INT16</a> ))
                -&gt; ( );
</pre>

<p>Make the person <code>pers-no</code> a member of conference <code>conf-no</code>. 
The membership priority is set to <code>priority</code> and its position in
the membership list is set to <code>where</code>.

<p>This call can be used to change the priority and position of a
conference in the person's membership list if the person is already a
member of the conference.

<p>In protocol version 10, setting the priority to zero sets the passive
bit in the membership.  The actual priority is not changed.

<p><i>Example:</i>
<br><pre>        1 46 119 0 10 0
        <tt>=1 1 { 49 14 17 13 8 91 5 255 1 119 255 0 0 * }</tt>
        1 14 1 119 250 0
        <tt>=1</tt>
        1 46 119 0 10 0
        <tt>=1 2 { 52 30 14 11 5 96 2 162 1 1 250 0 0 *
               49 14 17 13 8 91 5 255 1 119 255 0 0 * }</tt>
</pre>

<p>This example makes person 119 (me) a member of conference number 1.  The
priority is set to 250 and the conference is placed first in the
membership list.  The first and last calls of the example show the
membership list for person 119 before and after the call.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>undefined-person</code>
<dd>Person <code>pers-no</code> does not exist

<br><dt><code>access-denied</code>
<dd>Not enough permissions or privileges to add members to conference
<code>conf-no</code>.

<br><dt><code>permission-denied</code>
<dd>Person <code>pers-no</code> is already a member of conference <code>conf-no</code>,
but the person logged on is not a supervisor and does not have enough
privileges to change the priorities of person <code>pers-no</code>.

</dl>

<p><hr>
Node:<a name="sub-member">sub-member</a>,
Next:<a rel=next accesskey=n href="#set-presentation">set-presentation</a>,
Previous:<a rel=previous accesskey=p href="#add-member-old">add-member-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>sub-member [15] (1) Recommended</h3>

<br><pre>        sub-member [15] (( conf-no : <a href="#Conf-No">Conf-No</a>;
                           pers-no : <a href="#Pers-No">Pers-No</a> ))
                -&gt; ( );
</pre>

<p>Removes the person <code>pers-no</code> from the membership list of conference
<code>conf-no</code> and remove the conference from the person's list of
memberships.

<p><i>Example:</i>
<br><pre>        1 46 5 0 100 0
        <tt>=1 2 { 44 14 19 10 5 96 1 161 1 1   0 0 0 *
               49 14 17 13 8 91 5 255 1 5 255 0 0 * }</tt>
        1 15 1 5
        <tt>=1</tt>
        1 46 5 0 100 0
        <tt>=1 1 { 49 14 17 13 8 91 5 255 1 5 255 0 0 * }</tt>
</pre>

<p>This example shows how person 5 is removed from conference one.  The
calls to <code>get-membership-old</code> demonstrate the effects on the
LysKOM database.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>undefined-person</code>
<dd>Person <code>pers-no</code> does not exist.

<br><dt><code>not-member</code>
<dd>Person <code>pers-no</code> is not a member of conference <code>conf-no</code>.

<br><dt><code>permission-denied</code>
<dd>Not supervisor of conference <code>conf-no</code> or not supervisor of person
<code>pers-no</code> and not enough privileges to issue the call anyway. 
<code>error-status</code> contains the conference number.

</dl>

<p><hr>
Node:<a name="set-presentation">set-presentation</a>,
Next:<a rel=next accesskey=n href="#set-etc-motd">set-etc-motd</a>,
Previous:<a rel=previous accesskey=p href="#sub-member">sub-member</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-presentation [16] (1) Recommended</h3>

<br><pre>        set-presentation [16] (( conf-no : <a href="#Conf-No">Conf-No</a>;
                                 text-no : <a href="#Text-No">Text-No</a> ))
                -&gt; ( );
</pre>

<p>This call sets the presentation text of the conference or person
<code>conf-no</code> to the text <code>text-no</code>.  To remove a presentation, use
a <code>text-no</code> of zero.  This call protects the new presentation from
being deleted automatically and removes such protection from the old
presentation.  In lyskomd this is implemented by increasing the mark
count on presentation texts.

<p><i>Example:</i>
<br><pre>        1 50 6
        <tt>=1 11HDavid Byers 1001
           26 15 11 9 5 96 0 160 1
           26 15 11 9 5 96 0 160 1
           5 0 5 0 5 0 77 1 1 0</tt>
        1 16 6 1
        <tt>=1</tt>
        1 50 6
        <tt>=1 11HDavid Byers 1001
           26 15 11 9 5 96 0 160 1
           26 15 11 9 5 96 0 160 1
           5 1 5 0 5 0 77 1 1 0</tt>
</pre>

<p>This example shows how the presentation of person 6 is being
changed.  To start with, the person had no presentation, as is shown by
the <code><a href="#get-conf-stat-old">get-conf-stat-old</a></code>
 call.  Later, after
<code>set-presentation</code> has been called, the presentation field has
changed.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>permission-denied</code>
<dd>Not enough permissions to change presentation of conference
<code>conf-no</code>.

<br><dt><code>no-such-text</code>
<dd>Text <code>text-no</code> does not exist or no read permission.

<br><dt><code>mark-limit</code>
<dd>Adding a mark to text <code>text-no</code> would cause it to have too many
marks.

</dl>

<p><hr>
Node:<a name="set-etc-motd">set-etc-motd</a>,
Next:<a rel=next accesskey=n href="#set-supervisor">set-supervisor</a>,
Previous:<a rel=previous accesskey=p href="#set-presentation">set-presentation</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-etc-motd [17] (1) Recommended</h3>

<br><pre>        set-etc-motd [17] (( conf-no : <a href="#Conf-No">Conf-No</a>;
                             text-no : <a href="#Text-No">Text-No</a> ))
                -&gt; ( );
</pre>

<p>This call sets the message of the day on the conference or person
<code>conf-no</code> to the article <code>text-no</code> and removes the old
message.  To remove an old message without setting a new one, use a
<code>text-no</code> of zero.  This call protects the new message from
automatic deletion and removes such protection from the old message just
as <code><a href="#set-presentation">set-presentation</a></code>.

<p><i>Example:</i>
<br><pre>        1 50 6
        <tt>=1 11HDavid Byers 1001
           26 15 11 9 5 96 0 160 1
           26 15 11 9 5 96 0 160 1
           5 0 5 0 5 0 77 1 1 0</tt>
        1 17 6 1
        <tt>=1</tt>
        1 50 6
        <tt>=1 11HDavid Byers 1001
           26 15 11 9 5 96 0 160 1
           26 15 11 9 5 96 0 160 1
           5 0 5 0 5 1 77 1 1 0</tt>
</pre>

<p>This example shows how text number one is used as the message of the day
for conference six (which happens to be a mailbox.) The
<code>get-conf-stat-old</code> calls before and after demonstrate the change in
the conference structure.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>permission-denied</code>
<dd>Not enough permissions to set the MOTD of conference <code>conf-no</code>.

<br><dt><code>mark-limit</code>
<dd>Adding a mark to text <code>text-no</code> would cause it to have too many
marks. 
</dl>

<p><hr>
Node:<a name="set-supervisor">set-supervisor</a>,
Next:<a rel=next accesskey=n href="#set-permitted-submitters">set-permitted-submitters</a>,
Previous:<a rel=previous accesskey=p href="#set-etc-motd">set-etc-motd</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-supervisor [18] (1) Recommended</h3>

<br><pre>        set-supervisor [18] (( conf-no : <a href="#Conf-No">Conf-No</a>;
                               admin   : <a href="#Conf-No">Conf-No</a> ))
                -&gt; ( );
</pre>

<p>The <code>set-supervisor</code> call changes the supervisor of an existing
conference.  The result is that all members of the conference
<code>admin</code> become supervisors of the conference <code>conf-no</code>. 
Typically, but not always, <code>admin</code> will be a mailbox.

<p><i>Example:</i>
<br><pre>        1 50 4
        <tt>=1 17HNyheter om LysKOM 0000
           48 11 17 13 8 91 5 255 1
           15 12 11  9 5 96 0 160 1
           0 0 0 0 0 0 77 1 1 1</tt>
        1 18 4 6
        <tt>=1</tt>
        1 50 4
        <tt>=1 17HNyheter om LysKOM 0000
           48 11 17 13 8 91 5 255 1
           15 12 11  9 5 96 0 160 1
           0 0 6 0 0 0 77 1 1 1</tt>
</pre>

<p>This example makes the members of conference six supervisors of
conference four (which is usually the "News about LysKOM"
conference).  The change in the conference structure is evident from
the <code><a href="#get-conf-stat-old">get-conf-stat-old</a></code>
 calls before and after the
<code>set-supervisor</code> call.  Note that the original supervisor was not
set.  In order to change the supervisor of such a conference, the
session issuing the call must have administration privileges.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> or conference <code>admin</code> does not exist or
is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>permission-denied</code>
<dd>Not enough permissions or privileges to change the supervisor of
conference <code>conf-no</code>.

</dl>

<p><hr>
Node:<a name="set-permitted-submitters">set-permitted-submitters</a>,
Next:<a rel=next accesskey=n href="#set-super-conf">set-super-conf</a>,
Previous:<a rel=previous accesskey=p href="#set-supervisor">set-supervisor</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-permitted-submitters [19] (1) Recommended</h3>

<br><pre>        set-permitted-submitters [19] (( conf-no  : <a href="#Conf-No">Conf-No</a>;
                                         perm-sub : <a href="#Conf-No">Conf-No</a> ))
                -&gt; ( );
</pre>

<p>This call grants the right to send articles to the conference
<code>conf-no</code> to all members of the conference <code>perm-sub</code>.  If
<code>perm-sub</code> is 0, everybody can send articles to the conference. 
(This is the default setting of new conferences and persons.)

<p>When a person tries to submit an article but does not have the right
to do so, the server will send the article to the super-conference
instead.

<p><i>Example:</i>
<br><pre>        1 50 4
        <tt>=1 17HNyheter om LysKOM 0000
           48 11 17 13 8 91 5 255 1
           15 12 11  9 5 96 0 160 1
           0 0 6 0 0 0 77 1 1 1</tt>
        1 19 4 1
        <tt>=1</tt>
        1 50 4
        <tt>=1 17HNyheter om LysKOM 0000
           48 11 17 13 8 91 5 255 1
           15 12 11  9 5 96 0 160 1
           0 0 6 1 0 0 77 1 1 1</tt>
</pre>

<p>This example shows how all members of conference one are given
permission to send articles to conference four.  From the beginning,
only members of conference four were permitted to submit articles.  The
change is evident from the <code><a href="#get-conf-stat-old">get-conf-stat-old</a></code>

<p>calls before and after the <code>set-permitted-submitters</code>
call.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> or conference <code>perm-sub</code> does not exist
or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>permission-denied</code>
<dd>Not enough permissions to change the permitted submitters of conference
<code>conf-no</code>.

</dl>

<p><hr>
Node:<a name="set-super-conf">set-super-conf</a>,
Next:<a rel=next accesskey=n href="#set-conf-type">set-conf-type</a>,
Previous:<a rel=previous accesskey=p href="#set-permitted-submitters">set-permitted-submitters</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-super-conf [20] (1) Recommended</h3>

<br><pre>        set-super-conf [20] (( conf-no    : <a href="#Conf-No">Conf-No</a>;
                               super-conf : <a href="#Conf-No">Conf-No</a> ))
                -&gt; ( );
</pre>

<p>Makes the conference <code>super-conf</code> the super-conference of the
conference <code>conf-no</code>.  See <a href="#Conference%20Status%20Types">Conference Status Types</a>, for more
info on what this field is used for.

<p><i>Example:</i>
<br><pre>        1 50 4
        <tt>=1 17HNyheter om LysKOM 0000
           48 11 17 13 8 91 5 255 1
           15 12 11  9 5 96 0 160 1
           0 0 6 0 0 0 77 1 1 1</tt>
        2 20 4 8
        <tt>=2</tt>
        3 50 4
        <tt>=3 17HNyheter om LysKOM 0000
           48 11 17 13 8 91 5 255 1
           15 12 11  9 5 96 0 160 1
           0 0 6 0 8 0 77 1 1 1</tt>
</pre>

<p>This example demonstrates how the super-conference of conference 1 is
set to conference 8.  The calls to <code><a href="#get-conf-stat-old">get-conf-stat-old</a></code> demonstrate the
change in the conference structure.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> or conference <code>super-conf</code> does not exist
or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero. 
<br><dt><code>permission-denied</code>
<dd>Not enough permissions to change super-conference of conference
<code>conf-no</code>. 
</dl>

<p><hr>
Node:<a name="set-conf-type">set-conf-type</a>,
Next:<a rel=next accesskey=n href="#set-garb-nice">set-garb-nice</a>,
Previous:<a rel=previous accesskey=p href="#set-super-conf">set-super-conf</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-conf-type [21] (1) Recommended</h3>

<br><pre>        set-conf-type [21] (( conf-no : <a href="#Conf-No">Conf-No</a>;
                                 type : <a href="#Any-Conf-Type">Any-Conf-Type</a> ))
                -&gt; ( );
</pre>

<p>Sets the conference type of conference <code>conf-no</code> to <code>type</code>. 
Before protocol version 8, <code>type</code> could only be four bits.  Starting
with protocol version 8, either a four-bit <code>Conf-Type</code> or an
eight-bit <code>Extended-Conf-Type</code> is allowed.

<p><i>Example:</i>
<br><pre>        1 78 4
        <tt>=1 17HNyheter om LysKOM 00001000 1 77</tt>
        1 21 4 00000000
        <tt>=1</tt>
        1 78 4
        <tt>=1 17HNyheter om LysKOM 00000000 1 77</tt>
</pre>

<p>This example shows a user removing the <code>allow-anonymous</code> bit
from conference four.  The <code><a href="#get-uconf-stat">get-uconf-stat</a></code>
 call
shows all eight bits of the conference type before and after the
<code>set-conf-type</code> call.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> does not exist or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero. 
<br><dt><code>secret-public</code>
<dd><code>type</code> has <code>secret</code> bit but not <code>rd-prot</code>. 
<br><dt><code>permission-denied</code>
<dd>Not enough permissions or privileges to change the conference type of
conference <code>conf-no</code>. 
<br><dt><code>letterbox</code>
<dd>Attempt to change the <code>letterbox</code> flag. 
<br><dt><code>invalid-membership-type</code>
<dd>Attempt to change to a conference type that is not compatible with one of
more members of the conference (for example, attempting to set
<code>forbid-secret</code> on a conference with a secret member.) 
<code>error-status</code> is the id of the first person with an incompatible
membership type. 
</dl>

<p><hr>
Node:<a name="set-garb-nice">set-garb-nice</a>,
Next:<a rel=next accesskey=n href="#get-marks">get-marks</a>,
Previous:<a rel=previous accesskey=p href="#set-conf-type">set-conf-type</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-garb-nice [22] (1) Recommended</h3>

<br><pre>        set-garb-nice [22] (( conf-no : <a href="#Conf-No">Conf-No</a>;
                                 nice : <a href="#Garb-Nice">Garb-Nice</a> ))
                -&gt; ( );
</pre>

<p>Sets the expiration time for articles in conference <code>conf-no</code> to
<code>nice</code> days.  An article that is older than the maximum expiration
time of each conference it is sent to may be deleted by the LysKOM
server unless it has marks.

<p><i>Example:</i>
<br><pre>        1 78 4
        <tt>=1 17HNyheter om LysKOM 00000000 1 77</tt>
        1 22 4 7
        <tt>=1</tt>
        1 78 4
        <tt>=1 17HNyheter om LysKOM 00000000 1 7</tt>
</pre>

<p>This example shows the expiration time of conference four being lowered
from 77 to just seven days.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> does not exist or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero. 
<br><dt><code>permission-denied</code>
<dd>Not enough permissions to change the expiration time for conference
<code>conf-no</code>. 
</dl>

<p><hr>
Node:<a name="get-marks">get-marks</a>,
Next:<a rel=next accesskey=n href="#mark-text-old">mark-text-old</a>,
Previous:<a rel=previous accesskey=p href="#set-garb-nice">set-garb-nice</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-marks [23] (1) Recommended</h3>

<br><pre>        get-marks [23] ( )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Mark">Mark</a> );
</pre>

<p>This call returns the list of marks the current user has set.

<p><i>Example:</i>
<br><pre>        1 23
        <tt>=1 3 { 13020 100 13043 95 12213 95 }</tt>
</pre>

<p>In this example, the current user has three marks, one on text 13020
with mark type 100, one on text 13042 with mark type 95 and one on text
12213 with mark type 95.  The maximum number of marks may be arbitrarily
limited in the LysKOM server.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
</dl>

<p><hr>
Node:<a name="mark-text-old">mark-text-old</a>,
Next:<a rel=next accesskey=n href="#get-text">get-text</a>,
Previous:<a rel=previous accesskey=p href="#get-marks">get-marks</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>mark-text-old [24] (1) Obsolete (4)</h3>

<br><pre>        mark-text-old [24] (( text      : <a href="#Text-No">Text-No</a>;
                              mark-type : <a href="#INT8">INT8</a> ))
                -&gt; ( );
</pre>

<p>This call has been replaced by <code><a href="#mark-text">mark-text</a></code> and
<code><a href="#unmark-text">unmark-text</a></code> and should no longer be used. 
This call can only set <code>mark-type</code> to a value in the range 1 to
255 (inclusive).  If <code>mark-type</code> is set to 0 the mark will be
removed.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>no-such-text</code>
<dd>The text <code>text</code> does not exist.

<br><dt><code>permission-denied</code>
<dd>No read permission on text <code>text</code>.

<br><dt><code>undefined-person</code>
<dd>The person currently logged in does not exist (can't happen error.)

<br><dt><code>too-many-marks</code>
<dd>Marking the text would cause the person doing the marking to have too
many marks, or cause the text to have too many marks. 
</dl>

<p><hr>
Node:<a name="get-text">get-text</a>,
Next:<a rel=next accesskey=n href="#get-text-stat-old">get-text-stat-old</a>,
Previous:<a rel=previous accesskey=p href="#mark-text-old">mark-text-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-text [25] (1) Recommended</h3>

<br><pre>        get-text [25] (( text       : <a href="#Text-No">Text-No</a>;
                         start-char : <a href="#INT32">INT32</a>;
                         end-char   : <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#HOLLERITH">HOLLERITH</a> );
</pre>

<p>Retrieve text number <code>text</code> from the LysKOM database, starting at
position <code>start-char</code> and ending at position <code>end-char</code>.  The
first character in the text is numbered 0 and the last can be retrieved
using <code><a href="#get-text-stat">get-text-stat</a></code>.  It is also permitted to request a character
position beyond the actual end of the text, in which case as much text
as is available will be returned.

<p><i>Example:</i>
<br><pre>        1 25 100 0 32766
        <tt>=1 25HYawn&#149;Nothing is happening</tt>
        2 25 100 5 32766
        <tt>=2 20HNothing is happening</tt>
        3 25 100 0 3
        <tt>=3 4HYawn</tt>
</pre>

<p>In the example, <code>&#149;</code> represents a linefeed.

<p>In this example, text 100 is requested three times, first from position
0 to position 32766, then from position 5 to position 32766 and finally
from position 0 to position 4.  The first reply contains the entire text,
the following two contain only the requested portion.

<h4>Error codes</h4>

<dl>
<dt><code>no-such-text</code>
<dd>The text <code>text</code> does not exits or no read permission. 
This error code will also be used when attempting to fetch texts
without logging in first.  (There are some texts that are readable
without logging in: the motd-of-lyskom (see <a href="#set-motd-of-lyskom">set-motd-of-lyskom</a>),
and texts with the <code>world-readable</code> aux item set on them.)

<br><dt><code>text-zero</code>
<dd>Attempt to retrieve text number 0.

<br><dt><code>index-out-of-range</code>
<dd><code>start-char</code> is larger than the length of the text. 
</dl>

<p><hr>
Node:<a name="get-text-stat-old">get-text-stat-old</a>,
Next:<a rel=next accesskey=n href="#mark-as-read">mark-as-read</a>,
Previous:<a rel=previous accesskey=p href="#get-text">get-text</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-text-stat-old [26] (1) Obsolete (10)</h3>

<br><pre>        get-text-stat-old [26] ( text-no : <a href="#Text-No">Text-No</a> )
                -&gt; ( <a href="#Text-Stat-Old">Text-Stat-Old</a> );
</pre>

<p>Get information about text number <code>text-no</code>.  The text-stat contains
information about the size of the text, its recipients, comments, author
and more.

<p>For compatibility reasons this call will only return the misc-infos
0=recpt, 1=cc-recpt, 2=comm-to, 3=comm-in, 4=footn-to, 5=footn-in,
6=loc-no, 7=rec-time, 8=sent-by and 9=sent-at.  Newer misc-infos will
either be removed or converted to a similar one.  Specifically,
15=bcc-recpt may (at the servers discretion) be converted to 1=cc-recpt
or omitted entirely.

<p><i>Example:</i>
<br><pre>        1 26 100
        <tt>=1 7 35 16 15 6 96 1 196 1 14 1 22 1
           7 { 0 7 6 85 0 15 6 1
           8 13 9 12 37 16 15 6 96 1 196 1
           3 311 }</tt>
</pre>

<p>In this example, text number 100 was created by person 7 at
approximately 4:35PM on July 15 1996.  Its recipients are conferences 7
and 15, and it was sent to conference 15 by person 13 at 16:37 on the
day it was created.  The text has a single comment: text 311.

<h4>Error codes</h4>

<dl>
<dt><code>no-such-text</code>
<dd>The text <code>text-no</code> does not exist, or no read access. 
This error code will also be used when attempting to fetch texts
without logging in first.  (There are some texts that are readable
without logging in: the motd-of-lyskom (see <a href="#set-motd-of-lyskom">set-motd-of-lyskom</a>),
and texts with the <code>world-readable</code> aux item set on them.)

<br><dt><code>text-zero</code>
<dd>Attempt to retrieve text number 0. 
</dl>

<p><hr>
Node:<a name="mark-as-read">mark-as-read</a>,
Next:<a rel=next accesskey=n href="#create-text-old">create-text-old</a>,
Previous:<a rel=previous accesskey=p href="#get-text-stat-old">get-text-stat-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>mark-as-read [27] (1) Recommended</h3>

<br><pre>        mark-as-read [27] (( conference : <a href="#Conf-No">Conf-No</a>;
                             text       : <a href="#ARRAY">ARRAY</a> <a href="#Local-Text-No">Local-Text-No</a> ))
                -&gt; ( );
</pre>

<p>Marks text <code>text</code> in conference number <code>conference</code> as read
for the current user.  This call updates the membership record for the
user.

<p><i>Example:</i>
<br><pre>        1 9 6 7
        <tt>=1 20 32 11 17 6 96 3 198 1 7 1 240 0 *</tt>
        1 78 7
        <tt>=1 13HInlägg }t mig 00001000 241 1</tt>
        1 27 7 1 { 241 }
        <tt>=1</tt>
        1 9 6 7
        <tt>=1 20 32 11 17 6 96 3 198 1 7 1 241 0 *</tt>
</pre>

<p>This example shows person 6 marking local text number 241 in conference
7 as read.  In the first <code>query-read-texts-old</code> call the person
has read local text 240, but nothing higher.  The <code>mark-as-read</code>
call is reflected in the second <code>query-read-texts-old</code> call, where
the user is seen to have read text 241 in conference 7.

<p>To mark a global text number as read it is necessary to translate it
into local text numbers by looking at the misc-info list in the
<code>Text-Stat</code> and calling <code>mark-as-read</code> once for each recipient.

<p>There is no need to call <code>mark-as-read</code> on deleted texts.  The
server will automatically mark them as read, sooner or later.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>conference</code> does not exist or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero. 
<br><dt><code>not-member</code>
<dd>The person logged on is not a member of conference <code>conference</code>. 
<br><dt><code>no-such-local-text</code>
<dd>One of the numbers in <code>text</code> is not a local text number in
<code>conference</code>.  The error argument indicates the index of the invalid
number. 
<br><dt><code>local-text-zero</code>
<dd>One of the numbers in <code>text</code> is zero. 
</dl>

<p><hr>
Node:<a name="create-text-old">create-text-old</a>,
Next:<a rel=next accesskey=n href="#delete-text">delete-text</a>,
Previous:<a rel=previous accesskey=p href="#mark-as-read">mark-as-read</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>create-text-old [28] (1) Obsolete (10)</h3>

<br><pre>        create-text-old [28] (( text        : <a href="#HOLLERITH">HOLLERITH</a>;
                                misc-info   : <a href="#ARRAY">ARRAY</a> <a href="#Misc-Info">Misc-Info</a> ))
                -&gt; ( <a href="#Text-No">Text-No</a> );
</pre>

<p>Creates a new text with contents from <code>text</code> and recipients
etc. defined by <code>misc-info</code> (see <a href="#The%20Misc-Info%20List">The Misc-Info List</a>).  In
addition to the result, the server will send an asynchronous message
to all members of any of the recipients of the new text.  It is not
defined whether this messages comes before or after the reply to
the create-text message.  Clients should be prepared for either
situation.

<p>The text up to the first linefeed is considered to be the subject
line.  The remaining text is the message body.  Although messages with
only a subject are valid, clients should avoid letting users create
such messages.

<p>The only Misc-Info items valid for this call are <code>recpt</code>,
<code>cc-recpt</code>, <code>bcc-recpt</code> (protocol version 10),
<code>comm-to</code> and <code>footn-to</code>.

<p><i>Example:</i>
<br><pre>        1 28 20HExample&#149;Message body 3 { 0 5 1 112 2 33467 }
        <tt>:16 0 33502 13 16 15 16 6 97 3 196 1 119 1 20 0</tt>
        <tt>    5 { 0 5 6 148 1 112 6 3438 2 33467 } </tt>
        <tt>=1 33502</tt>
</pre>

<p>In the example, <code>&#149;</code> represents a linefeed.

<p>In this example, person 119 creates a text containing a subject and a
one-line body.  The recipient of the text is conference five, conference
112 is a CC recipient and the text is a comment to text 33467.  The
server reply indicates that the new text has been given number 33502. 
Finally there is an asynchronous message sent to all members of
recipient conferences.  Note how the message was sent before the reply to
the client.  The misc-info list in this message has two additional
fields, the local numbers of the text in each of its recipient
conferences.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>string-too-long</code>
<dd>The string <code>text</code> is longer than the maximum length of a message.

<br><dt><code>temporary-failure</code>
<dd>The text could not be created at the moment.

<br><dt><code>no-such-text</code>
<dd>Attempt to comment or footnote a non-existent or secret text.

<br><dt><code>not-author</code>
<dd>Attempt to footnote a text authored by someone else.

<br><dt><code>footnote-limit</code>
<dd>Attempt to footnote a text with the maximum number of footnotes already
set.

<br><dt><code>comment-limit</code>
<dd>Attempt to comment a text with the maximum number of comments already
set.

<br><dt><code>index-out-of-range</code>
<dd>Attempt to create a text failed because we reached the maximum number
of texts permitted.  The <code>error-status</code> indicates the text
number that should have been created if the limit hadn't been reached.

<br><dt><code>access-denied</code>
<dd>Attempt to send a text to a conference failed because no access to the
conference or any super conference that will accept a text.

<br><dt><code>anonymous-rejected</code>
<dd>Attempt to send an anonymous text to a conference that does not accept
anonymous texts.

<br><dt><code>illegal-misc</code>
<dd>Invalid misc-info list.  A recipient is listed more than once or there is
an unknown misc item in the misc-info list. 
</dl>

<p><hr>
Node:<a name="delete-text">delete-text</a>,
Next:<a rel=next accesskey=n href="#add-recipient">add-recipient</a>,
Previous:<a rel=previous accesskey=p href="#create-text-old">create-text-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>delete-text [29] (1) Recommended</h3>

<br><pre>        delete-text [29] ( text : <a href="#Text-No">Text-No</a> )
                -&gt; ( );
</pre>

<p>Deletes the text <code>text</code> from the LysKOM database, if the person
issuing the command may do so.

<p><i>Example:</i>
<br><pre>        1 29 33467
        <tt>=1</tt>
</pre>

<p>This simple example shows the deletion of text number 33467.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>no-such-text</code>
<dd>The text <code>text</code> does not exist or no read access. 
<br><dt><code>not-author</code>
<dd>The person logged in is not the text author or supervisor of the text
author. 
</dl>

<p><hr>
Node:<a name="add-recipient">add-recipient</a>,
Next:<a rel=next accesskey=n href="#sub-recipient">sub-recipient</a>,
Previous:<a rel=previous accesskey=p href="#delete-text">delete-text</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>add-recipient [30] (1) Recommended</h3>

<br><pre>        add-recipient [30] (( text-no       : <a href="#Text-No">Text-No</a>;
                              conf-no       : <a href="#Conf-No">Conf-No</a>;
                              recpt-type    : <a href="#Info-Type">Info-Type</a> ))
                -&gt; ( );
</pre>

<p>Adds <code>conf-no</code> as recipient to text <code>text-no</code>.  If
<code>recpt-type</code> is 1, then a <code>cc-recpt</code> (see <a href="#The%20Misc-Info%20List">The Misc-Info List</a>) is created; otherwise a <code>recpt</code> is created.

<p>Since protocol version 8 this call can also be used to change a
<code>cc-recpt</code> into a <code>recpt</code> and vice versa by simply adding
a recipient that already exists.

<p>Since protocol version 10 the <code>recpt-type</code> parameter is a
<code>Misc-Info</code>.  Only infos <code>recpt</code>, <code>cc-recpt</code> and
<code>bcc-recpt</code> are accepted.  In protocol version 9 and earlier this
argument was a <code>BOOL</code>, that indicated if the recipient should be
a <code>cc-recpt</code> (when true) or <code>recpt</code> (when false).

<p><i>Example:</i>
<br><pre>        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 0 *</tt>
        1 30 1 5 0
        <tt>=1</tt>
        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1</tt>
        <tt>   3 { 0 5 6 1 9 34 34 17 17 6 97 4 197 1 }</tt>
        1 30 1 5 1
        <tt>=1</tt>
        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1</tt>
        <tt>   3 { 1 5 6 1 9 34 34 17 17 6 97 4 197 1 }</tt>
</pre>

<p>This example show how conference 5 is added first as a recipient of text
1, then changed to a carbon-copy recipient.  The misc-info list reflects
these changes.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>The conference <code>conf-no</code> does not exist.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>no-such-text</code>
<dd>The text <code>text-no</code> does not exist.

<br><dt><code>already-recipient</code>
<dd>The conference <code>conf-no</code> is already a recipient of the same type as
<code>recpt-type</code>.

<br><dt><code>illegal-info-type</code>
<dd><code>recpt-type</code> is not <code>recpt</code>, <code>cc-recpt</code> or
<code>bcc-recpt</code>.

<br><dt><code>recipient-limit</code>
<dd>The text already has the maximum number of recipients.

<br><dt><code>permission-denied</code>
<dd>Attempt to change recipient types of a recipient without being the
supervisor of either the author, recipient, or sender of the
recipient.

<br><dt><code>access-denied</code>
<dd>Attempt to add a conference as recipient that the person logged on does
not have permission to add texts to.  The client may have to chase the
super conf chain.

</dl>

<p><hr>
Node:<a name="sub-recipient">sub-recipient</a>,
Next:<a rel=next accesskey=n href="#add-comment">add-comment</a>,
Previous:<a rel=previous accesskey=p href="#add-recipient">add-recipient</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>sub-recipient [31] (1) Recommended</h3>

<br><pre>        sub-recipient [31] (( text-no   :   <a href="#Text-No">Text-No</a>;
                              conf-no   :   <a href="#Conf-No">Conf-No</a> ))
                -&gt; ( );
</pre>

<p>Removes <code>conf-no</code> from the list of recipients of text
<code>text-no</code>.  Recipients may be removed by the author of the text or
by the supervisor of the recipients of the text or by the supervisor of
the author.

<p><i>Example:</i>
<br><pre>        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1</tt>
        <tt>   3 { 1 5 6 1 9 34 34 17 17 6 97 4 197 1 }</tt>
        1 31 1 5
        <tt>=1</tt>
        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 0 *</tt>
        1 31 1 5
        <tt>%1 30 0</tt>
</pre>

<p>In this example, conference 5 is removed from the recipient list of text
number 5.  When the call is repeated, the server simply returns an error
since conference 5 is not a recipient of the text.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>no-such-text</code>
<dd>The text <code>text-no</code> does not exist or is secret.

<br><dt><code>not-recipient</code>
<dd>The conference <code>conf-no</code> is not a recipient of text <code>text-no</code>.

<br><dt><code>undefined-conference</code>
<dd>The conference <code>conf-no</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>permission-denied</code>
<dd>Not supervisor of text author or conference, and not sender of text to
<code>conf-no</code> and not enough privileges set and enabled.

</dl>

<p><hr>
Node:<a name="add-comment">add-comment</a>,
Next:<a rel=next accesskey=n href="#sub-comment">sub-comment</a>,
Previous:<a rel=previous accesskey=p href="#sub-recipient">sub-recipient</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>add-comment [32] (1) Recommended</h3>

<br><pre>        add-comment [32] (( text-no     :       <a href="#Text-No">Text-No</a>;
                            comment-to  :       <a href="#Text-No">Text-No</a> ))
                -&gt; ( );
</pre>

<p>Add a comment link between the text <code>comment-to</code> and the text
<code>text-no</code> (<code>text-no</code> becomes a comment to the text
<code>comment-to</code>).  This call is used to add comment links after a text
has been created.  The normal procedure for creating comments is to add a
<code>comm-to</code> element to the text's misc-info list when the text is
created (see <a href="#The%20Misc-Info%20List">The Misc-Info List</a>).

<p><i>Example:</i>
<br><pre>        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 0 *</tt>
        1 26 2
        <tt>=1 49 49 18 17 6 97 4 197 1 5 1 52 1 2 { 0 2 6 1 }</tt>
        1 32 2 1
        <tt>=1</tt>
        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 1 { 3 2 }</tt>
        1 26 2
        <tt>=1 49 49 18 17 6 97 4 197 1 5 1 52 1</tt>
        <tt>   4 { 0 2 6 1 2 1 9 19 52 18 17 6 97 4 197 1 }</tt>
</pre>

<p>In this example, text number two is added as a comment to text number
one.  The change is reflected in the Misc-Info List of the texts.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>index-out-of-range</code>
<dd>The texts <code>text-no</code> and <code>comment-to</code> are identical.  The
<code>error-status</code> is <code>text-no</code>.

<br><dt><code>no-such-text</code>
<dd>The text <code>text-no</code> of <code>comment-to</code> are undefined.

<br><dt><code>comment-limit</code>
<dd>The text <code>comment-to</code> already has the maximum number of comments.

<br><dt><code>already-comment</code>
<dd>The text <code>text-no</code> is already a comment of <code>comment-to</code>.

<br><dt><code>already-footnote</code>
<dd>The text <code>text-no</code> is already a footnote of <code>comment-to</code>,
and a text cannot be both a comment and a footnote to the same text.

</dl>

<p><hr>
Node:<a name="sub-comment">sub-comment</a>,
Next:<a rel=next accesskey=n href="#get-map">get-map</a>,
Previous:<a rel=previous accesskey=p href="#add-comment">add-comment</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>sub-comment [33] (1) Recommended</h3>

<br><pre>        sub-comment [33] (( text-no      :       <a href="#Text-No">Text-No</a>;
                            comment-to   :       <a href="#Text-No">Text-No</a> ))
                -&gt; ( );
</pre>

<p>This call removes the text <code>text-no</code> from <code>comment-to</code>'s list
of comments.

<p><i>Example:</i>
<br><pre>        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 1 { 3 2 }</tt>
        1 26 2
        <tt>=1 49 49 18 17 6 97 4 197 1 5 1 52 1</tt>
        <tt>   4 { 0 2 6 1 2 1 9 19 52 18 17 6 97 4 197 1 }</tt>
        1 33 2 1
        <tt>=1</tt>
        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 0 *</tt>
        1 26 2
        <tt>=1 49 49 18 17 6 97 4 197 1 5 1 52 1 2 { 0 2 6 1 }</tt>
</pre>

<p>In this example text 2 is a comment to text 1, as shown by the misc-info
lists of the two texts.  The <code>sub-comment</code> is called.  The misc-info
lists are changed to reflect the change.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>no-such-text</code>
<dd>One of the texts <code>text-no</code> or <code>comment-to</code> does not exist. 
<br><dt><code>not-comment</code>
<dd>The text <code>text-no</code> is not a comment to <code>comment-to</code>. 
<br><dt><code>permission-denied</code>
<dd>Not supervisor of author of <code>text-no</code> or not sender of the
comment and not enough privileges set and enable to complete the call
anyway. 
</dl>

<p><hr>
Node:<a name="get-map">get-map</a>,
Next:<a rel=next accesskey=n href="#get-time">get-time</a>,
Previous:<a rel=previous accesskey=p href="#sub-comment">sub-comment</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-map [34] (1) Obsolete (10)</h3>

<br><pre>        get-map [34] (( conf-no         :       <a href="#Conf-No">Conf-No</a>;
                        first-local-no  :       <a href="#Local-Text-No">Local-Text-No</a>;
                        no-of-texts     :       <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#Text-List">Text-List</a> );
</pre>

<p>This call has been superseded by <code><a href="#local-to-global">local-to-global</a></code>.

<p>This call retrieves an array mapping local text numbers to global
numbers.  It is most often used to get a list of unread texts in a
conference.  Clients will usually use the <code><a href="#query-read-texts">query-read-texts</a></code> or
<code><a href="#get-membership">get-membership</a></code> calls to find the last local number a user has
read in a particular conference, then use the <code>get-map</code> call to
retrieve the global numbers of all unread texts in the conference.

<p>The <code>conf-no</code> parameter specifies which conference to get the map
of.  <code>first-local-no</code> is the local number of the first text returned
by the call.  <code>no-of-texts</code> is the maximum number of text the client
wants.

<p>The result is a list of global text numbers.  The first element of the
list is the global number of local number <code>first-local-no</code>,
specified by the call; the second element is the global number of local
number <code>first-local-no</code> plus one; and so forth.  The list returned
by the server is at most <code>no-of-texts</code> long, but may be shorter if
the call specifies more texts that there are in the conference.

<p>If <code>first-local-no</code> is higher than the highest local text number,
the server will return an error.

<p>If <code>first-local-no</code> is lower than the lowest number that still
exists, the server will set <code>first-local-no</code> in the returned
<code>Text-List</code> to the first text that still exists.  The size of the
returned array will be decreased by the same amount as
<code>first-local-no</code> is increased.  This may result in an empty array
being returned.  (This paragraph applies even when <code>first-local-no</code>
is 0.)

<p>If no texts at all exists in <code>conf-no</code> the resulting array will be
empty, and <code>first-local-no</code> will be set to the number the next text
to be created will receive.

<p><i>Example:</i>
<br><pre>        1 34 119 10 5
        <tt>=1 10 5 { 0 0 466 478 391 }</tt>
        2 34 119 16 5
        <tt>=2 16 3 { 481 0 491 }</tt>
        3 34 119 19 5
        <tt>%3 16 0</tt>
        4 34 120 1 5
        <tt>=4 4 2 { 480 485 }</tt>
        5 34 120 1 2
        <tt>=5 4 0 *</tt>
</pre>

<p>This example shows five <code>get-map</code> calls.  The first retrieves the
mappings of local numbers 10 to 15; the second call returns local
numbers 16 to 18.  As this example shows the maps are not necessarily
sorted in ascending order, since texts may be added after their
creation, and the maps may contain zeroes anywhere.  These represent
texts that have been removed for some reason.

<p>Since the first example returned two leading zeroes we can be certain
that at least one text with a local text number lower than 10 still
exists.  Otherwise the result would have been truncated in the front as
it is in examples 4 and 5.

<p>The third exchange in the example shows what happens when
<code>first-local-no</code> is too large.

<p>The forth and fifth examples shows what happens when an attempt to
retrieve a mapping from a conference where the first local text numbers
have been deleted.  In the example local text numbers 1, 2 and 3 no longer
exist, and 4 corresponds to 480, and 5 to 485.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> does not exist or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero. 
<br><dt><code>access-denied</code>
<dd>Conference <code>conf-no</code> is read protected. 
<br><dt><code>no-such-local-text</code>
<dd><code>first-local-no</code> is higher than the highest local text number that
ever has existed in this conference. 
</dl>

<p><hr>
Node:<a name="get-time">get-time</a>,
Next:<a rel=next accesskey=n href="#get-info-old">get-info-old</a>,
Previous:<a rel=previous accesskey=p href="#get-map">get-map</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-time [35] (1) Recommended</h3>

<br><pre>        get-time [35] ( )
                -&gt; ( <a href="#Time">Time</a> );
</pre>

<p>This call simply returns the local time according to the server.

<p><i>Example:</i>
<br><pre>        1 35
        <tt>=1 23 47 19 17 6 97 4 197 1</tt>
</pre>

<p>This example demonstrates the call.  According to the server the time is
19:47:23, Thursday July 17, 1997.  The result also shows that it is the
197th day of the year, and that daylight savings time is in effect.

<h4>Error codes</h4>

<p>This call always succeeds

<p><hr>
Node:<a name="get-info-old">get-info-old</a>,
Next:<a rel=next accesskey=n href="#add-footnote">add-footnote</a>,
Previous:<a rel=previous accesskey=p href="#get-time">get-time</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-info-old [36] (1) Obsolete (10)</h3>

<br><pre>        get-info-old [36] ( )
                -&gt; ( <a href="#Info-Old">Info-Old</a> );
</pre>

<p>This call returns the <code>Info-Old</code> structure for the server
(see <a href="#Info-Old">Info-Old</a>).  Clients should call this in order to find
out which conferences are used for presentations and such.

<p>This call has been superseded by <code><a href="#get-info">get-info</a></code>.

<p>This call can be issued without logging in.

<p><i>Example:</i>
<br><pre>        1 36
        <tt>=1 10900 1 2 3 4 1</tt>
</pre>

<p>In this example, the server version is 1.9, the conference for
presentation of new conferences is conference 1, the conference for
presentation of new persons is conference 2, the conference for door
messages is conference 3, the LysKOM news conference is conference 4 and
the login message is text number 1.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="add-footnote">add-footnote</a>,
Next:<a rel=next accesskey=n href="#sub-footnote">sub-footnote</a>,
Previous:<a rel=previous accesskey=p href="#get-info-old">get-info-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>add-footnote [37] (1) Recommended</h3>

<br><pre>        add-footnote [37] (( text-no    :       <a href="#Text-No">Text-No</a>;
                             footnote-to:       <a href="#Text-No">Text-No</a> ))
                -&gt; ( );
</pre>

<p>Add a footnote link between the text <code>footnote-to</code> and the text
<code>text-no</code> (<code>text-no</code> becomes a footnote to the text
<code>footnote-to</code>).  This call is used to add footnote links after a text
has been created.  Only the author of both texts is allowed to add
the footnote link.

<p><i>Example:</i>
<br><pre>        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 0 *</tt>
        1 26 2
        <tt>=1 49 49 18 17 6 97 4 197 1 5 1 52 1 2 { 0 2 6 1 }</tt>
        1 37 2 1
        <tt>=1</tt>
        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 1 { 5 2 }</tt>
        1 26 2
        <tt>=1 49 49 18 17 6 97 4 197 1 5 1 52 1</tt>
        <tt>   4 { 0 2 6 1 4 1 9 19 52 18 17 6 97 4 197 1 }</tt>
</pre>

<p>In this example, text number two is added as a footnote to text number
one.  The change is reflected in the Misc-Info List of the texts.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>no-such-text</code>
<dd>The text <code>text-no</code> or <code>footnote-to</code> does not exist or is
secret.

<br><dt><code>index-out-of-range</code>
<dd>The <code>text-no</code> and <code>footnote-to</code> arguments are equal, and the
server does not support texts that are footnotes to themselves.

<br><dt><code>not-author</code>
<dd>Not author of <code>footnote-to</code>.

<br><dt><code>footnote-limit</code>
<dd>Text <code>footnote-to</code> already has the maximum number of footnotes.

<br><dt><code>already-footnote</code>
<dd>Text <code>text-no</code> is already a footnote to <code>footnote-to</code>.

<br><dt><code>already-comment</code>
<dd>Text <code>text-no</code> is already a comment to <code>footnote-to</code>, and a
text cannot be both a comment and a footnote to the same text.

</dl>

<p><hr>
Node:<a name="sub-footnote">sub-footnote</a>,
Next:<a rel=next accesskey=n href="#who-is-on-old">who-is-on-old</a>,
Previous:<a rel=previous accesskey=p href="#add-footnote">add-footnote</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>sub-footnote [38] (1) Recommended</h3>

<br><pre>        sub-footnote [38] (( text-no            :       <a href="#Text-No">Text-No</a>;
                             footnote-to        :       <a href="#Text-No">Text-No</a> ))
                -&gt; ( );
</pre>

<p>This call removes the text <code>text-no</code> from <code>footnote-to</code>'s list
of footnotes.  Only the author of a footnote may remove it.

<p><i>Example:</i>
<br><pre>        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 1 { 5 2 }</tt>
        1 26 2
        <tt>=1 49 49 18 17 6 97 4 197 1 5 1 52 1</tt>
        <tt>   4 { 0 2 6 1 4 1 9 19 52 18 17 6 97 4 197 1 }</tt>
        1 38 2 1
        <tt>=1</tt>
        1 26 1
        <tt>=1 2 22 12 17 6 97 4 197 1 5 4 256 1 0 *</tt>
        1 26 2
        <tt>=1 49 49 18 17 6 97 4 197 1 5 1 52 1 2 { 0 2 6 1 }</tt>
</pre>

<p>In this example text 2 is a footnote to text 1, as shown by the
misc-info lists of the two texts.  The <code>sub-footnote</code> is called. 
The misc-info lists are changed to reflect the change.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>no-such-text</code>
<dd>The text <code>text-no</code> or <code>footnote-to</code> does not exist or is
secret. 
<br><dt><code>not-footnote</code>
<dd>The text <code>text-no</code> is not a footnote to <code>footnote-to</code>. 
<br><dt><code>permission-denied</code>
<dd>Not supervisor of the author of <code>text-no</code> and not enough privileges
set and enabled to complete call anyway. 
</dl>

<p><hr>
Node:<a name="who-is-on-old">who-is-on-old</a>,
Next:<a rel=next accesskey=n href="#set-unread">set-unread</a>,
Previous:<a rel=previous accesskey=p href="#sub-footnote">sub-footnote</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>who-is-on-old [39] (1) Obsolete (1)</h3>

<br><pre>        who-is-on-old [39] ( )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Who-Info-Old">Who-Info-Old</a> );
</pre>

<p>This call is obsolete.  Use <code><a href="#get-static-session-info">get-static-session-info</a></code> and
<code><a href="#who-is-on-dynamic">who-is-on-dynamic</a></code> instead.  If the server does not support these
calls, use <code><a href="#who-is-on">who-is-on</a></code> instead.

<p>The returned list contains all sessions where a person is logged in and
the invisible flag of the session is unset.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="set-unread">set-unread</a>,
Next:<a rel=next accesskey=n href="#set-motd-of-lyskom">set-motd-of-lyskom</a>,
Previous:<a rel=previous accesskey=p href="#who-is-on-old">who-is-on-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-unread [40] (1) Recommended</h3>

<br><pre>        set-unread [40] (( conf-no      :       <a href="#Conf-No">Conf-No</a>;
                           no-of-unread :       <a href="#INT32">INT32</a> ))
                -&gt; ( );
</pre>

<p>Only read the last <code>no-of-unread</code> in the conference <code>conf-no</code>. 
This call modifies the <code>last-text-read</code> of current person's
membership for the conference.  This call is sometimes used to
implement the "only read last N texts" command found in many
clients.  Due to possible race conditions<a rel=footnote href="#fn-14"><sup>14</sup></a>, this call is usually
better implemented using the <code><a href="#set-last-read">set-last-read</a></code>
 call
which explicitly sets the <code>last-text-read</code> field of the
membership.

<p><i>Example:</i>
<br><pre>        1 9 5 6
        <tt>=1 1 34 21 17 6 97 4 197 1 6 100 0 0 *</tt>
        1 40 6 0
        <tt>=1</tt>
        1 9 5 6
        <tt>=1 1 34 21 17 6 97 4 197 1 6 100 4 0 *</tt>
</pre>

<p>This example shows that person 5 last read text 0 in conference 6 (and
since 0 is an illegal local text number, that implies that the person
has not read anything in the conference.)  After calling
<code>set-unread</code> and asking to have zero unread texts in conference 6,
this is reflected by the call to <code>query-read-texts-old</code>.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>conf-no</code> does not exist or is secret. 
<br><dt><code>not-member</code>
<dd>Not a member of conference <code>conf-no</code>. 
</dl>

<p><hr>
Node:<a name="set-motd-of-lyskom">set-motd-of-lyskom</a>,
Next:<a rel=next accesskey=n href="#enable">enable</a>,
Previous:<a rel=previous accesskey=p href="#set-unread">set-unread</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-motd-of-lyskom [41] (1) Recommended</h3>

<br><pre>        set-motd-of-lyskom [41] ( text-no : <a href="#Text-No">Text-No</a> )
                -&gt; ( );
</pre>

<p>This call sets the login message of LysKOM.  It can only be executed by a
privileged person, with the proper privileges enabled.  A somewhat less
convenient way of doing this is to use the <code><a href="#set-info">set-info</a></code>

<p>call.

<p><i>Example:</i>
<br><pre>        1 36
        <tt>=1 10900 1 2 3 4 0</tt>
        1 41 435
        <tt>=1</tt>
        1 36
        <tt>=1 10900 1 2 3 4 435</tt>
</pre>

<p>This example shows how the login message of LysKOM is set using the
set-motd-of-lyskom call.  The results of the <code>get-info</code> calls
demonstrate the effect.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>permission-denied</code>
<dd>Administrator bit not set or privilege level not enabled. 
<br><dt><code>no-such-text</code>
<dd>The text <code>text-no</code> does not exist. 
<br><dt><code>mark-limit</code>
<dd>The text <code>text-no</code> already has the maximum number of marks. 
</dl>

<p><hr>
Node:<a name="enable">enable</a>,
Next:<a rel=next accesskey=n href="#sync-kom">sync-kom</a>,
Previous:<a rel=previous accesskey=p href="#set-motd-of-lyskom">set-motd-of-lyskom</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>enable [42] (1) Recommended</h3>

<br><pre>        enable [42] ( level : <a href="#INT8">INT8</a> )
                -&gt; ( );
</pre>

<p>Sets the security level for the current session to <code>level</code>. 
See <a href="#Security">Security</a>, for details about security levels.  The only levels
that make any sense right now are 0 and 255.  This call may be issued
by any person, but without the right privilege bits set, it has no
effect.

<p><i>Example:</i>
<br><pre>        1 41 1
        <tt>%1 12 0</tt>
        1 42 255
        <tt>=1</tt>
        1 41 1
        <tt>=1</tt>
</pre>

<p>This example shows how <code>enable</code> makes a privileged call possible,
in this case a call to <code><a href="#set-motd-of-lyskom">set-motd-of-lyskom</a></code>.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
</dl>

<p><hr>
Node:<a name="sync-kom">sync-kom</a>,
Next:<a rel=next accesskey=n href="#shutdown-kom">shutdown-kom</a>,
Previous:<a rel=previous accesskey=p href="#enable">enable</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>sync-kom [43] (1) Recommended</h3>

<br><pre>        sync-kom [43] ( )
                -&gt; ( );
</pre>

<p>This call instructs the LysKOM server to make sure the permanent copy of
its database is current.  Processing of requests is normally blocked
until this call has completed, but the exact details depend on the
server implementation.  This call is privileged in most implementations.

<p><i>Example:</i>
<br><pre>        1 42 255
        <tt>=1</tt>
        1 43
        <tt>:0 7</tt>
        <tt>:0 7</tt>
        <tt>=1</tt>
</pre>

<p>This example shows how the <code><a href="#enable">enable</a></code>
 call is used to enable
all privileges, then the <code>sync-kom</code> call is used to
save the database.  The server responds with two asynchronous messages
signaling that the database is being saved.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>permission-denied</code>
<dd>Administrator bit not set or privileges not enabled. 
</dl>

<p><hr>
Node:<a name="shutdown-kom">shutdown-kom</a>,
Next:<a rel=next accesskey=n href="#broadcast">broadcast</a>,
Previous:<a rel=previous accesskey=p href="#sync-kom">sync-kom</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>shutdown-kom [44] (1) Recommended</h3>

<br><pre>        shutdown-kom [44] ( exit-val : <a href="#INT8">INT8</a> )
                -&gt; ( );
</pre>

<p>This call instructs the server to save all data and shut down. 
<code>exit-val</code> is currently not used.  This call is privileged.

<p><i>Example:</i>
<br><pre>        1 42 255
        <tt>=1</tt>
        1 44 0
        <tt>=1</tt>
        <tt>:2 13 5 3</tt>
</pre>

<p>This example shows the shutdown of a server.  The asynchronous message
sent after the call returns is the result of a session being forced to
log out.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>permission-denied</code>
<dd>Administrator bit not set or privileges not enabled. 
</dl>

<p><hr>
Node:<a name="broadcast">broadcast</a>,
Next:<a rel=next accesskey=n href="#get-membership-old">get-membership-old</a>,
Previous:<a rel=previous accesskey=p href="#shutdown-kom">shutdown-kom</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>broadcast [45] (1) Obsolete (1)</h3>

<br><pre>        broadcast [45] ( message : <a href="#HOLLERITH">HOLLERITH</a> )
                -&gt; ( );
</pre>

<p>This call can been replaced by <code><a href="#send-message">send-message</a></code>.  It is a privileged
call.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>string-too-long</code>
<dd>The string <code>message</code> is too long. 
<br><dt><code>feature-disabled</code>
<dd>Messages have been disabled. 
</dl>

<p><hr>
Node:<a name="get-membership-old">get-membership-old</a>,
Next:<a rel=next accesskey=n href="#get-created-texts">get-created-texts</a>,
Previous:<a rel=previous accesskey=p href="#broadcast">broadcast</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-membership-old [46] (1) Obsolete (10)</h3>

<br><pre>        get-membership-old [46] (( person          : <a href="#Pers-No">Pers-No</a>;
                                   first           : <a href="#INT16">INT16</a>;
                                   no-of-confs     : <a href="#INT16">INT16</a>;
                                   want-read-texts : <a href="#BOOL">BOOL</a> ))
                    -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Membership-Old">Membership-Old</a> );
</pre>

<p>This call retrieves the membership record for a list of conferences for
a single person.  <code>person</code> is the person whose memberships are to be
retrieved.  <code>first</code> is the first position in the membership list to
retrieve, numbered from 0 and up.  <code>no-of-confs</code> is the number of
membership records to retrieve.  If <code>want-read-texts</code> is <code>0</code>
the server will not send the contents of the <code>read-texts</code> array
of the memberships.  (The size will be transmitted, but a single
asterisk (<code>*</code>) will be sent instead of the array itself.)

<p>The server will return a membership list that is shorter than
<code>no-of-confs</code> if <code>no-of-confs</code> + <code>first</code> is larger than
the number of conferences the person is a member of.

<p>Servers that support protocol version 10 will return a priority of zero
if the passive bit in the membership record has been set (either by a
set-membership-type or by setting the priority of the conference to
zero.)

<p><i>Example:</i>
<br><pre>        1 46 5 0 3 1
        <tt>=1 2 { 49 14 17 13 8 91 5 255 1 5 255 0 0 * </tt>
        <tt>   20 14 22 17 6 97 4 197 1 6 100 2 0 * }</tt>
        1 46 5 0 1 1
        <tt>=1 1 { 49 14 17 13 8 91 5 255 1 5 255 0 0 * }</tt>
        1 46 5 1 4 1
        <tt>=1 1 { 20 14 22 17 6 97 4 197 1 6 100 2 0 * }</tt>
</pre>

<p>In this example we retrieve the memberships of person 5.  The first
call asks for three memberships, starting with number 0.  Since this
person is only a member of two conferences, the list returned only
contains two memberships.  (An extra newline has been inserted in the
result of the first call to make the result more readable.) The next
two calls retrieve a single membership each, the first by asking for
only one, and the second by asking for four memberships, starting with
number 1.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-person</code>
<dd>The person <code>person</code> does not exist.

<br><dt><code>undefined-conference</code>
<dd>The conference <code>person</code> does not exist or is secret.

<br><dt><code>index-out-of-range</code>
<dd><code>first</code> is higher than the index of the last conference in the
person's membership list.

<br><dt><code>bad-bool</code>
<dd><code>want-read-texts</code> must be either <code>0</code> or <code>1</code>.

</dl>

<p><hr>
Node:<a name="get-created-texts">get-created-texts</a>,
Next:<a rel=next accesskey=n href="#get-members-old">get-members-old</a>,
Previous:<a rel=previous accesskey=p href="#get-membership-old">get-membership-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-created-texts [47] (1) Obsolete (10)</h3>

<br><pre>        get-created-texts [47] (( person        :   <a href="#Pers-No">Pers-No</a>;
                                  first         :   <a href="#Local-Text-No">Local-Text-No</a>;
                                  no-of-texts   :   <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#Text-List">Text-List</a> );
</pre>

<p>This call is obsolete; instead you should use <code><a href="#map-created-texts">map-created-texts</a></code>.

<p>This call returns a list of the texts written by a person. 
<code>person</code> is the person whose created texts are to be
retrieved.  <code>first</code> is the first text to
retrieve.  <code>no-of-texts</code> is the number of texts to retrieve.

<p>This call is essentially the same as <code><a href="#get-map">get-map</a></code>, but instead of
returning the texts sent to a single conference, it returns the texts
written by a single person to any conference.  The number of texts
written by any one person is contained in the Person record for that
person.

<p>If <code>first</code> is lower than the first text written by <code>person</code>
that still exists, it will be automatically increased to the first still
existing text written by <code>person</code>.  The <code>get-created-texts</code>
will still attempt to return information about <code>no-of-texts</code> texts. 
(In this regard <code>get-map</code> and <code>get-created-texts</code> differ,
since <code>get-map</code> will never ever return information about a later
text than specified in the arguments to the call.<a rel=footnote href="#fn-15"><sup>15</sup></a>)

<p><i>Example:</i>
<br><pre>        1 47 5 0 100
        <tt>=1 1 8 { 1 2 3 4 5 6 7 8 }</tt>
        2 47 5 4 2
        <tt>=2 4 2 { 4 5 }</tt>
        3 47 10 8 8
        <tt>=3 12 8 { 309 312 324 327 329 339 0 387 }</tt>
</pre>

<p>In this example we have retrieved all texts written by person five.  The
first call asked for 100 texts, but only 8 were returned, which implies
that person number 5 only created a total of 8 texts.  We can also see
that person 5 wrote all the first 8 texts in the conference system.  The
second call shows how a part of the map can be retrieved.

<p>The third call asks for eight texts written by person 10, starting with
the eighth number.  Since the first eleven texts written by that person
no longer exists the server instead returns information about eight
texts staring from the twelfth text person 10 created.  One of the eight
texts has been deleted.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-person</code>
<dd>The person <code>person</code> does not exist or is secret. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>person</code> does not exist or is secret. 
<br><dt><code>no-such-local-text</code>
<dd><code>first</code> is higher than the local text number of the last created
text. 
</dl>

<p><hr>
Node:<a name="get-members-old">get-members-old</a>,
Next:<a rel=next accesskey=n href="#get-person-stat">get-person-stat</a>,
Previous:<a rel=previous accesskey=p href="#get-created-texts">get-created-texts</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-members-old [48] (1) Obsolete (10)</h3>

<br><pre>        get-members-old [48] (( conf            : <a href="#Conf-No">Conf-No</a>;
                                first           : <a href="#INT16">INT16</a>;
                                no-of-members   : <a href="#INT16">INT16</a> ))
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Pers-No">Pers-No</a> );
</pre>

<p>This call returns a list of members of the conference <code>conf</code>. 
<code>first</code> is the first index in the membership to return, numbered
from zero and up.  <code>no-of-members</code> is the maximum number of members
to return.

<p><i>Example:</i>
<br><pre>        1 48 1 0 100
        <tt>=1 4 { 7 8 9 10 }</tt>
        1 48 6 0 100
        <tt>=1 4 { 5 7 9 10 }</tt>
        1 48 6 2 2
        <tt>=1 2 { 9 10 }</tt>
</pre>

<p>In this example the client first requests the first 100 members in
conference 1.  The second request is for the first 100 members of
conference 6.  The last request is for members 2 and 3 in conference 6. 
As can be seen from the examples, the returned list is truncated if
there are fewer members than requested.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-conference</code>
<dd>The conference <code>conf</code> does not exist or is secret. 
<br><dt><code>index-out-of-range</code>
<dd><code>first</code> is higher than the number of members in <code>conf</code>. 
</dl>

<p><hr>
Node:<a name="get-person-stat">get-person-stat</a>,
Next:<a rel=next accesskey=n href="#get-conf-stat-old">get-conf-stat-old</a>,
Previous:<a rel=previous accesskey=p href="#get-members-old">get-members-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-person-stat [49] (1) Recommended</h3>

<br><pre>        get-person-stat [49] ( pers-no : <a href="#Pers-No">Pers-No</a> )
                -&gt; ( <a href="#Person">Person</a> );
</pre>

<p>This call returns the person <code>pers-no</code>.  This call does not return
all the information a client usually needs since the name is not
included in the Person data structure.  Use <code><a href="#get-conf-stat">get-conf-stat</a></code> on the
same number to get additional information about the person.

<p><i>Example:</i>
<br><pre>        1 49 8
        <tt>=1 44Hbyers@lage.lysator.liu.se 0000010000000000 00000000</tt>
        <tt>   44 21 19 18 6 97 5 198 1 0 2 3 0 0 0 0 0 0 1 0 0 2</tt>
        1 50 8
        <tt>=1 11HPaul Dekker 1001 8 6 19 18 6 97 5 198 1</tt>
        <tt>   8 6 19 18 6 97 5 198 1 8 0 8 0 0 0 77 1 1 0</tt>
</pre>

<p>This simple example shows how person number 8 is retrieved from the
server.  The second call shows the <code>get-conf-stat-old</code> call on the same
ID number.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-person</code>
<dd>The person <code>pers-no</code> does not exist. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>pers-no</code> does not exist or is secret. 
</dl>

<p><hr>
Node:<a name="get-conf-stat-old">get-conf-stat-old</a>,
Next:<a rel=next accesskey=n href="#who-is-on">who-is-on</a>,
Previous:<a rel=previous accesskey=p href="#get-person-stat">get-person-stat</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-conf-stat-old [50] (1) Obsolete (10)</h3>

<br><pre>        get-conf-stat-old [50] ( conf-no : <a href="#Conf-No">Conf-No</a> )
                -&gt; ( <a href="#Conference-Old">Conference-Old</a> );
</pre>

<p>This call retrieves the conference data structure for conference number
<code>conf-no</code>.

<p>Important note: This call does not return the extra flag bits that were
introduced in protocol version 8.  To get this information, use the
<code>get-uconf-stat</code> call instead.  However, clients should be able to
handle <code>Conference-Old</code> structures with an arbitrary number of flag
bits since we may decide to change the behavior of this call in the
future.

<p><i>Example:</i>
<br><pre>        1 50 1
        <tt>=1 27HPresentation (av nya) möten 0000 48 11 17 13 8 91 5 255</tt>
        <tt>   1 18 34 21 17 6 97 4 197 1 0 0 0 0 0 0 77 0 1 1</tt>
        1 50 8
        <tt>=1 11HPaul Dekker 1001 8 6 19 18 6 97 5 198 1</tt>
        <tt>   8 6 19 18 6 97 5 198 1 8 0 8 0 0 0 77 1 1 0</tt>
</pre>

<p>This simple example retrieves conferences 1 and 8 from the server. 
Conference 1 is a regular conference, and conference 8 is a mailbox.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-conference</code>
<dd>The conference <code>conf-no</code> does not exist or is secret. 
</dl>

<p><hr>
Node:<a name="who-is-on">who-is-on</a>,
Next:<a rel=next accesskey=n href="#get-unread-confs">get-unread-confs</a>,
Previous:<a rel=previous accesskey=p href="#get-conf-stat-old">get-conf-stat-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>who-is-on [51] (1) Obsolete (9)</h3>

<br><pre>        who-is-on [51] ( )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Who-Info">Who-Info</a> );
</pre>

<p>This call is obsolete.  Please use <code><a href="#who-is-on-dynamic">who-is-on-dynamic</a></code> and
<code><a href="#get-static-session-info">get-static-session-info</a></code>
 calls instead. 
Nonetheless, servers should support this call since many clients still
use it.

<p>This call should simply return a list of visible sessions (sessions
where a person is logged in and the invisible flag is unset).  The data
structure is described elsewhere (see <a href="#Who-Info">Who-Info</a>).

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="get-unread-confs">get-unread-confs</a>,
Next:<a rel=next accesskey=n href="#send-message">send-message</a>,
Previous:<a rel=previous accesskey=p href="#who-is-on">who-is-on</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-unread-confs [52] (1) Recommended</h3>

<br><pre>        get-unread-confs [52] ( pers-no : <a href="#Pers-No">Pers-No</a> )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Conf-No">Conf-No</a> );
</pre>

<p>This call returns a list of conferences in which the person
<code>pers-no</code> may have unread texts.  This call will return a result for
any valid <code>pers-no</code>.  To retrieve information about secret persons,
or to get information about unread texts in secret conference, the
session must log on as a person with access to that information.

<p>The result is guaranteed to include all conferences where <code>pers-no</code>
has unread texts.  It may also return some extra conferences. 
Passive memberships are never returned.

<p>The returned conference numbers will be returned in the same order as
they appear on the persons list of memberships.

<p><i>Example:</i>
<br><pre>        1 52 7
        <tt>=1 2 { 1 6 }</tt>
        1 52 1
        <tt>%1 10 0</tt>
        1 52 1000
        <tt>%1 10 0</tt>
</pre>

<p>This example shows how a session first retrieves the list of conferences
in which person 7 has unread texts.  The next request is for the unread
conferences of person 1, but that happens to be a conference.  The last
request is for the unread conferences of person 1000, but that person
didn't exist in the test database.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-person</code>
<dd>Person <code>pers-no</code> does not exist or is secret. 
</dl>

<p><hr>
Node:<a name="send-message">send-message</a>,
Next:<a rel=next accesskey=n href="#get-session-info">get-session-info</a>,
Previous:<a rel=previous accesskey=p href="#get-unread-confs">get-unread-confs</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>send-message [53] (1) Recommended</h3>

<br><pre>        send-message [53] (( recipient  :   <a href="#Conf-No">Conf-No</a>;
                             message    :   <a href="#HOLLERITH">HOLLERITH</a> ))
                -&gt; ( );
</pre>

<p>This call sends the message <code>message</code> to all members of
<code>recipient</code> using <code><a href="#async-send-message">async-send-message</a></code>.  If
<code>recipient</code> is 0, the message is sent to all sessions that are
logged in.

<p>The message is sent to all members of <code>recipient</code> that are
currently logged in, and where the <code>passive</code> and
<code>passive-message-invert</code> bits of the <code>Membership-Type</code>
(see <a href="#Membership-Type">Membership-Type</a>) don't prevent the message from being
delivered.

<p><i>Example:</i>
<br><pre>        1 53 4 14HThis is a test
        <tt>=1</tt>
        1 53 1 14HThis is a test
        <tt>:3 12 1 8 14HThis is a test</tt>
        <tt>=1</tt>
        1 53 0 14HThis is a test
        <tt>:3 12 0 8 14HThis is a test</tt>
        <tt>=1</tt>
        1 53 5 14HThis is a test
        <tt>%1 16 0</tt>
        1 53 3 14HThis is a test
        <tt>%1 42 0</tt>
</pre>

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>string-too-long</code>
<dd>The string <code>message</code> is too long. 
<br><dt><code>undefined-conference</code>
<dd>Conference <code>recipient</code> does not exist or is secret. 
<br><dt><code>feature-disabled</code>
<dd>The message feature has been disabled in the server. 
<br><dt><code>message-not-sent</code>
<dd>The message was not sent for some other reason.  Perhaps the recipient is
not accepting messages or no member of the recipient was logged on. 
</dl>

<p><hr>
Node:<a name="get-session-info">get-session-info</a>,
Next:<a rel=next accesskey=n href="#disconnect">disconnect</a>,
Previous:<a rel=previous accesskey=p href="#send-message">send-message</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-session-info [54] (1) Obsolete (4)</h3>

<br><pre>        get-session-info [54] ( session-no : <a href="#Session-No">Session-No</a> )
                -&gt; ( <a href="#Session-Info">Session-Info</a> );
</pre>

<p>This call is obsolete.  It has been replaced by
<code><a href="#get-session-info-ident">get-session-info-ident</a></code>, which in turn is also obsolete.  See
<code>get-session-info-ident</code> for more information.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-session</code>
<dd>The session <code>session-no</code> does not exist. 
</dl>

<p><hr>
Node:<a name="disconnect">disconnect</a>,
Next:<a rel=next accesskey=n href="#who-am-i">who-am-i</a>,
Previous:<a rel=previous accesskey=p href="#get-session-info">get-session-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>disconnect [55] (1) Recommended</h3>

<br><pre>        disconnect [55] ( session-no : <a href="#Session-No">Session-No</a> )
                -&gt; ( );
</pre>

<p>This call disconnects the session <code>session-no</code> from the LysKOM
server.  A session can always disconnect itself, even without logging in. 
If the session is logged in as user <i>foo</i> it can also disconnect any
session logged in as a person for which <i>foo</i> is the supervisor.

<p>Session number zero is always interpreted as the session making the
call, so the easiest way to disconnect the current session is to
disconnect session zero.

<p><i>Example:</i>
<br><pre>        1 56
        <tt>=1 7</tt>
        1 55 7
        <tt>=1</tt>
        <tt>:2 13 8 7</tt>
        <tt>Connection closed by foreign host.</tt>
</pre>

<p>In this example the client asks for its own session number, then
disconnects itself (disconnection session 0 would have had the same
effect.) The asynchronous message sent just before the session is
disconnected is the logout message for the user that was logged on in
the session.  The "Connection closed by foreign host." is not part of
the server output.  This message was generated by telnet.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call if <code>session-no</code> is not the
session issuing the call. 
<br><dt><code>permission-denied</code>
<dd>Attempt to disconnect another session and not supervisor of person
logged in and not enough privileges set and enabled to complete the call
anyway. 
<br><dt><code>undefined-session</code>
<dd>The session <code>session-no</code> does not exist. 
</dl>

<p><hr>
Node:<a name="who-am-i">who-am-i</a>,
Next:<a rel=next accesskey=n href="#set-user-area">set-user-area</a>,
Previous:<a rel=previous accesskey=p href="#disconnect">disconnect</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>who-am-i [56] (1) Recommended</h3>

<br><pre>        who-am-i [56] ( )
                -&gt; ( <a href="#Session-No">Session-No</a> );
</pre>

<p>This call simply returns the session number of the session issuing the
call.

<p><i>Example:</i>
<br><pre>        1 56
        <tt>=1 7</tt>
</pre>

<p>In this example the session number of the session issuing the call is
seven.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="set-user-area">set-user-area</a>,
Next:<a rel=next accesskey=n href="#get-last-text">get-last-text</a>,
Previous:<a rel=previous accesskey=p href="#who-am-i">who-am-i</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-user-area [57] (2) Recommended</h3>

<br><pre>        set-user-area [57] (( pers-no   :   <a href="#Pers-No">Pers-No</a>;
                              user-area :   <a href="#Text-No">Text-No</a> ))
                -&gt; ( );
</pre>

<p>This call sets the user-area field for the person <code>pers-no</code> in the
database to the text <code>user-area</code>.  The user area is used to store
client data for a particular person.  See <a href="#The%20User%20Area">The User Area</a>, for more
details.

<p><i>Example:</i>
<br><pre>        1 49 7
        <tt>=1 25Hdavby@lage.lysator.liu.se 0000010000000000 00000000</tt>
        <tt>   6 58 21 19 6 97 6 199 1 0 458 7 3 12 7 12 0 0 3 0 0 4</tt>
        1 57 7 11
        <tt>=1</tt>
        1 49 7
        <tt>=1 25Hdavby@lage.lysator.liu.se 0000010000000000 00000000</tt>
        <tt>   6 58 21 19 6 97 6 199 1 11 458 7 71 2592 7 13 0 0 3 1 0 4</tt>
</pre>

<p>In this example the user area of person 7 is set to text number 11.  The
original user area was text numbers zero, which means that the person
had no user area.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-person</code>
<dd>The person <code>pers-no</code> does not exist or is secret. 
<br><dt><code>permission-denied</code>
<dd>Not enough access to person <code>pers-no</code> to complete the call. 
</dl>

<p><hr>
Node:<a name="get-last-text">get-last-text</a>,
Next:<a rel=next accesskey=n href="#create-anonymous-text-old">create-anonymous-text-old</a>,
Previous:<a rel=previous accesskey=p href="#set-user-area">set-user-area</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-last-text [58] (3) Recommended</h3>

<br><pre>        get-last-text [58] ( before : <a href="#Time">Time</a> )
                -&gt; ( <a href="#Text-No">Text-No</a> );
</pre>

<p>This call returns the number of the last text created before
<code>before</code>.  There is no guarantee that the text is readable by the
person making the request, or that the text even exists.

<p>This call assumes that all texts are written in chronological order,
when the time is expressed in the local time zone of the server.  That
may not always be the case in real life.  When daylight savings time
reverts to standard time the same time span will occur twice.  The clock
of the server may also have been adjusted manually from time to time. 
This protocol specification does not mandate what the server should do
in such cases.

<p>If <code><a href="#set-connection-time-format">set-connection-time-format</a></code> has been used with
<code>use-utc</code> set to 1, the <code>before</code> time should be expressed in
UTC.  Daylight savings time will not be an issue in that case.

<p><i>Example:</i>
<br><pre>        1 58 49 6 22 19 6 97 6 199 1
        <tt>=1 11</tt>
        1 58 49 6 22 18 6 97 6 199 1
        <tt>=1 8</tt>
        1 58 49 6 22 1 6 97 6 199 1
        <tt>=1 0</tt>
</pre>

<p>In this example the text created most recently before 22:06 on July 19,
1997 was text number 11; the text created most recently before 22:06 on
July 18 was text number 8; and the text created most recently before
22:06 on July 1st was text number 0, which means that there is no text
that old in the database.

<h4>Error codes</h4>

<dl>

<br><dt><code>login-first</code>
<dd>Login required before issuing this call. 
</dl>

<p><hr>
Node:<a name="create-anonymous-text-old">create-anonymous-text-old</a>,
Next:<a rel=next accesskey=n href="#find-next-text-no">find-next-text-no</a>,
Previous:<a rel=previous accesskey=p href="#get-last-text">get-last-text</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>create-anonymous-text-old [59] (3) Obsolete (10)</h3>

<br><pre>    create-anonymous-text-old [59] (( text      : <a href="#HOLLERITH">HOLLERITH</a>;
                                      misc-info : <a href="#ARRAY">ARRAY</a> <a href="#Misc-Info">Misc-Info</a> ))
            -&gt; ( <a href="#Text-No">Text-No</a> );
</pre>

<p>Similar to <code><a href="#create-text-old">create-text-old</a></code>, but the text is created with the
<code>author</code> field set to zero.  Not even the server has a record of
who created the text.

<p>The original intended use for this call was for importing texts from
other sources, such as WWW, FTP or Gopher, but some clients include
explicit support for sending anonymous texts to a server.

<p>It is only possible to send anonymous texts to a conference with the
right flag bit set.

<p>The only Misc-Info items valid for this call in the <code>misc-info</code>
array are <code>recpt</code>, <code>cc-recpt</code>, <code>bcc-recpt</code> (introduced
in protocol version 10), <code>comm-to</code> and <code>footn-to</code>.

<p><i>Example:</i>
<br><pre>        1 28 20HExample&#149;Message body 3 { 0 5 1 112 2 33467 }
        <tt>:16 0 33502 13 16 15 16 6 97 3 196 1 0 1 20 0</tt>
        <tt>    5 { 0 5 6 148 1 112 6 3438 2 33467 } </tt>
        <tt>=1 33502</tt>
</pre>

<p>In the example, <code>&#149;</code> represents a linefeed.

<p>In this example, person 119 creates a text containing a subject and a
one-line body.  The recipient of the text is conference five, conference
112 is a CC recipient and the text is a comment to text 33467.  The
server reply indicates that the new text has been given number 33502. 
Finally there is an asynchronous message sent to all members of
recipient conferences.  Note how the message was sent before the reply to
the client.  The misc-info list in this message has two additional
fields, the local numbers of the text in each of its recipient
conferences.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>string-too-long</code>
<dd>The string <code>text</code> is longer than the maximum length of a message. 
<br><dt><code>temporary-failure</code>
<dd>The text could not be created at the moment. 
<br><dt><code>no-such-text</code>
<dd>Attempt to comment or footnote a non-existent or secret text. 
<br><dt><code>not-author</code>
<dd>Attempt to footnote a text authored by someone else. 
<br><dt><code>footnote-limit</code>
<dd>Attempt to footnote a text with the maximum number of footnotes already
set. 
<br><dt><code>comment-limit</code>
<dd>Attempt to comment a text with the maximum number of comments already
set. 
<br><dt><code>access-denied</code>
<dd>Attempt to send a text to a conference failed because no access to the
conference or any super conference that will accept a text. 
<br><dt><code>anonymous-rejected</code>
<dd>Attempt to send an anonymous text to a conference that does not accept
anonymous texts. 
<br><dt><code>illegal-misc</code>
<dd>Invalid misc-info list.  A recipient is listed more than once or there is
an unknown misc item in the misc-info list. 
</dl>

<p><hr>
Node:<a name="find-next-text-no">find-next-text-no</a>,
Next:<a rel=next accesskey=n href="#find-previous-text-no">find-previous-text-no</a>,
Previous:<a rel=previous accesskey=p href="#create-anonymous-text-old">create-anonymous-text-old</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>find-next-text-no [60] (3) Recommended</h3>

<br><pre>        find-next-text-no [60] ( start : <a href="#Text-No">Text-No</a> )
                -&gt; ( <a href="#Text-No">Text-No</a> );
</pre>

<p>This call returns the next readable text in the database created after
text <code>start</code>.  <code>start</code> does not have to be a valid or readable
text number, as shown in the examples.

<p><i>Example:</i>
<br><pre>        1 60 0
        <tt>=1 2</tt>
        1 60 2
        <tt>=1 4</tt>
</pre>

<p>This example shows how to retrieve the first readable text in the LysKOM
database by calling <code>find-next-text-no</code> with <code>start</code> set to zero. 
In the example, the first text is number 2.  The second example gets the
text following number 2, which happens to be text number 4.

<h4>Error codes</h4>

<dl>

<br><dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>no-such-text</code>
<dd>There is no text following text <code>start</code>. 
</dl>

<p><hr>
Node:<a name="find-previous-text-no">find-previous-text-no</a>,
Next:<a rel=next accesskey=n href="#login">login</a>,
Previous:<a rel=previous accesskey=p href="#find-next-text-no">find-next-text-no</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>find-previous-text-no [61] (3) Recommended</h3>

<br><pre>        find-previous-text-no [61] ( start : <a href="#Text-No">Text-No</a> )
                -&gt; ( <a href="#Text-No">Text-No</a> );
</pre>

<p>This call returns the first readable text in the database created most
recently before <code>start</code>.  <code>start</code> does not have to be a valid
or readable text number, as shown in the examples.

<p><i>Example:</i>
<br><pre>        1 61 134217727
        <tt>=1 11</tt>
        1 61 4
        <tt>=1 2</tt>
</pre>

<p>This example shows that the last readable text in the database is number
11 (unless by some odd coincidence all text from 11 to text number
134217727 have been deleted.) It also shows that the most recent text
before number 4 is text number 2.

<h4>Error codes</h4>

<dl>

<br><dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>no-such-text</code>
<dd>There is no text preceding text <code>start</code>. 
</dl>

<p><hr>
Node:<a name="login">login</a>,
Next:<a rel=next accesskey=n href="#who-is-on-ident">who-is-on-ident</a>,
Previous:<a rel=previous accesskey=p href="#find-previous-text-no">find-previous-text-no</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>login [62] (4) Recommended</h3>

<br><pre>        login [62] (( person        :   <a href="#Pers-No">Pers-No</a>;
                      passwd        :   <a href="#HOLLERITH">HOLLERITH</a>;
                      invisible     :   <a href="#BOOL">BOOL</a> ))
                -&gt; ( );
</pre>

<p>This call is used to log in.  The session is logged in as person number
<code>person</code> if <code>passwd</code> is the correct password for that person. 
If <code>invisible</code> is true, the session is invisible: it will not be
returned by <code><a href="#who-is-on">who-is-on</a></code> and <code><a href="#who-is-on-ident">who-is-on-ident</a></code>, and the
dynamic session info (see <a href="#Dynamic-Session-Info">Dynamic-Session-Info</a>)
will have the invisible flag set.

<p>Invisible sessions are primarily used by software agents that do not act
on the behalf of real users.

<p><i>Example:</i>
<br><pre>        1 62 7 6Hgazonk 1
        <tt>=1</tt>
        1 62 7 6Hgazonk 0
        <tt>:2 9 7 1</tt>
        1 62 7 6Hgazonk 0
        <tt>:2 13 7 1</tt>
        <tt>:2 9 7 1</tt>
        <tt>=1</tt>
</pre>

<p>This example first shows a session log in as person seven with the
invisible flag set.  Because of this the asynchronous login message is
not sent.  The second call logs in as person seven again.  This time a
login message is sent, but not a logout message since the login was
invisible.  The third example shows a third login as person 7, but this
time both the logout and login messages are sent.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-person</code>
<dd>The person <code>person</code> does not exist.

<br><dt><code>login-disallowed</code>
<dd>Logins have been disabled and person <code>person</code> does not have enough
privileges to override.

<br><dt><code>invalid-password</code>
<dd>The password <code>passwd</code> is not the password of <code>person</code> and the
currently logged in person is not the supervisor of <code>person</code> and
does not have enough privileges set and enabled to log in anyway.

<br><dt><code>conference-zero</code>
<dd>Attempt to log in as person number 0.

<br><dt><code>bad-bool</code>
<dd><code>invisible</code> must be either <code>0</code> or <code>1</code>.

</dl>

<p><hr>
Node:<a name="who-is-on-ident">who-is-on-ident</a>,
Next:<a rel=next accesskey=n href="#get-session-info-ident">get-session-info-ident</a>,
Previous:<a rel=previous accesskey=p href="#login">login</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>who-is-on-ident [63] (4) Obsolete (9)</h3>

<br><pre>        who-is-on-ident [63] ( )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Who-Info-Ident">Who-Info-Ident</a> );
</pre>

<p>This call is obsolete.  It has been replaced by
<code><a href="#who-is-on-dynamic">who-is-on-dynamic</a></code> and <code><a href="#get-static-session-info">get-static-session-info</a></code>.  It
returns a list of all visible sessions.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="get-session-info-ident">get-session-info-ident</a>,
Next:<a rel=next accesskey=n href="#re-lookup-person">re-lookup-person</a>,
Previous:<a rel=previous accesskey=p href="#who-is-on-ident">who-is-on-ident</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-session-info-ident [64] (4) Obsolete (9)</h3>

<br><pre>        get-session-info-ident [64] ( session-no : <a href="#Session-No">Session-No</a> )
                -&gt; ( <a href="#Session-Info-Ident">Session-Info-Ident</a> );
</pre>

<p>This call is obsolete.  Use <code><a href="#who-is-on-dynamic">who-is-on-dynamic</a></code> combined with
<code><a href="#get-static-session-info">get-static-session-info</a></code> instead.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-session</code>
<dd>The session <code>session-no</code> does not exist. 
</dl>

<p><hr>
Node:<a name="re-lookup-person">re-lookup-person</a>,
Next:<a rel=next accesskey=n href="#re-lookup-conf">re-lookup-conf</a>,
Previous:<a rel=previous accesskey=p href="#get-session-info-ident">get-session-info-ident</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>re-lookup-person [65] (5) Obsolete (7)</h3>

<br><pre>        re-lookup-person [65] ( regexp : <a href="#HOLLERITH">HOLLERITH</a> )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Pers-No">Pers-No</a> );
</pre>

<p>This call is obsolete.  It has been replaced by <code><a href="#re-z-lookup">re-z-lookup</a></code>. 
It returns a list of persons matching the regular expression
<code>regexp</code>.  The regexp syntax used is that of the <code>ed</code>(1)
Unix utility.

<h4>Error codes</h4>

<dl>
<dt><code>regexp-error</code>
<dd>Error compiling the regexp <code>regexp</code>.  Perhaps the pattern is
not a correct regexp. 
</dl>

<p><hr>
Node:<a name="re-lookup-conf">re-lookup-conf</a>,
Next:<a rel=next accesskey=n href="#lookup-person">lookup-person</a>,
Previous:<a rel=previous accesskey=p href="#re-lookup-person">re-lookup-person</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>re-lookup-conf [66] (5) Obsolete (7)</h3>

<br><pre>        re-lookup-conf [66] ( regexp : <a href="#HOLLERITH">HOLLERITH</a> )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Conf-No">Conf-No</a> );
</pre>

<p>This call is obsolete.  It has been replaced by <code><a href="#re-z-lookup">re-z-lookup</a></code>.  It
returns a list of conferences matching the regular expression
<code>regexp</code>.  The regexp syntax used is that of the <code>ed</code>(1) Unix
utility.

<h4>Error codes</h4>

<dl>
<dt><code>regexp-error</code>
<dd>Error compiling the regexp <code>regexp</code>.  Perhaps the pattern is
not a correct regexp. 
</dl>

<p><hr>
Node:<a name="lookup-person">lookup-person</a>,
Next:<a rel=next accesskey=n href="#lookup-conf">lookup-conf</a>,
Previous:<a rel=previous accesskey=p href="#re-lookup-conf">re-lookup-conf</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>lookup-person [67] (6) Obsolete (7)</h3>

<br><pre>        lookup-person [67] ( name : <a href="#HOLLERITH">HOLLERITH</a> )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Pers-No">Pers-No</a> );
</pre>

<p>This call is obsolete.  It has been replaced by <code><a href="#lookup-z-name">lookup-z-name</a></code>.

<p>This call returns a list of persons with names matching the
contracted name in <code>name</code>.  See <a href="#Name%20Expansion">Name Expansion</a>, for a
description of the matching process.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="lookup-conf">lookup-conf</a>,
Next:<a rel=next accesskey=n href="#set-client-version">set-client-version</a>,
Previous:<a rel=previous accesskey=p href="#lookup-person">lookup-person</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>lookup-conf [68] (6) Obsolete (7)</h3>

<br><pre>        lookup-conf [68] ( name : <a href="#HOLLERITH">HOLLERITH</a> )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Conf-No">Conf-No</a> );
</pre>

<p>This call is obsolete.  It has been replaced by <code><a href="#lookup-z-name">lookup-z-name</a></code>.

<p>This call returns a list of conferences with names matching the
contracted name in <code>name</code>.  See <a href="#Name%20Expansion">Name Expansion</a>, for a
description of the matching process.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="set-client-version">set-client-version</a>,
Next:<a rel=next accesskey=n href="#get-client-name">get-client-name</a>,
Previous:<a rel=previous accesskey=p href="#lookup-conf">lookup-conf</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-client-version [69] (6) Recommended</h3>

<br><pre>        set-client-version [69] (( client-name      :   <a href="#HOLLERITH">HOLLERITH</a>;
                                   client-version   :   <a href="#HOLLERITH">HOLLERITH</a> ))
                -&gt; ( );
</pre>

<p>This call is used to tell the server which client and which version of
that client is being used.  The name of the client is passed in
<code>client-name</code> and the version in <code>client-version</code>.  The
information sent in this call is made available to other sessions
through the <code><a href="#get-client-name">get-client-name</a></code> and <code><a href="#get-client-version">get-client-version</a></code>

<p>calls.  This call should be used exactly once per session.

<p>The following names are currently registered:

<p><table><tr align="left"><td valign="top">elisp-client     </td><td valign="top">The famous CPU hog. 
<br></td></tr><tr align="left"><td valign="top">nilkom           </td><td valign="top">C++ experiment
<br></td></tr><tr align="left"><td valign="top">tkom             </td><td valign="top">C++ experiment
<br></td></tr><tr align="left"><td valign="top">getmail          </td><td valign="top">Postmaster
<br></td></tr><tr align="left"><td valign="top">ttykom           </td><td valign="top">The one and second tty client by Linus
<br></td></tr><tr align="left"><td valign="top">WinKOM           </td><td valign="top">Windows client
<br></td></tr><tr align="left"><td valign="top">JySKom           </td><td valign="top">JSK Web Client
<br></td></tr></table>

<p><i>Example:</i>
<br><pre>        1 56
        <tt>=1 7</tt>
        2 69 11Helisp-client 4H0.45
        <tt>=2</tt>
        3 70 7
        <tt>=3 11Helisp-client</tt>
        4 71 7
        <tt>=4 4H0.45</tt>
</pre>

<p>In this example the <code><a href="#who-am-i">who-am-i</a></code>
 call is used to find the ID of
the current session.  Next, <code>set-client-version</code> is used
to set the name of the client to "elisp-client" and the version to
"0.45".  The third call is to <code><a href="#get-client-name">get-client-name</a></code>
, which
returns the string just sent to the server.  Finally
<code><a href="#get-client-version">get-client-version</a></code> is used to retrieve the client version of
session number 7, which is, as expected, the string "0.45".

<h4>Error codes</h4>

<dl>
<dt><code>string-too-long</code>
<dd>The string <code>client-name</code> or <code>client-version</code> is too long.

<br><dt><code>client-is-crazy</code>
<dd>The client attempted to use this call more than once.  The <code>error-status</code>
is undefined.

</dl>

<p><hr>
Node:<a name="get-client-name">get-client-name</a>,
Next:<a rel=next accesskey=n href="#get-client-version">get-client-version</a>,
Previous:<a rel=previous accesskey=p href="#set-client-version">set-client-version</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-client-name [70] (6) Recommended</h3>

<br><pre>        get-client-name [70] ( session : <a href="#Session-No">Session-No</a> )
                -&gt; ( <a href="#HOLLERITH">HOLLERITH</a> );
</pre>

<p>This call returns the name of the client that owns session number
<code>session</code>.  This client name string returned is the one set by the
client using <code><a href="#set-client-version">set-client-version</a></code>.  If <code>set-client-version</code>
has not been issued in session number <code>session</code>, the empty string
is returned.

<p>See <a href="#set-client-version">set-client-version</a>, for an example of this call.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-session</code>
<dd>The session <code>session</code> does not exist. 
</dl>

<p><hr>
Node:<a name="get-client-version">get-client-version</a>,
Next:<a rel=next accesskey=n href="#mark-text">mark-text</a>,
Previous:<a rel=previous accesskey=p href="#get-client-name">get-client-name</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-client-version [71] (6) Recommended</h3>

<br><pre>        get-client-version [71] ( session : <a href="#Session-No">Session-No</a> )
                -&gt; ( <a href="#HOLLERITH">HOLLERITH</a> );
</pre>

<p>This call returns the version of the client that owns session number
<code>session</code>.  This client version string returned is the one set by
the client using <code><a href="#set-client-version">set-client-version</a></code>.  If
<code>set-client-version</code> has not been issued in session number
<code>session</code>, the empty string is returned.

<p>See <a href="#set-client-version">set-client-version</a>, for an example of this call.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-session</code>
<dd>The session <code>session</code> does not exist. 
</dl>

<p><hr>
Node:<a name="mark-text">mark-text</a>,
Next:<a rel=next accesskey=n href="#unmark-text">unmark-text</a>,
Previous:<a rel=previous accesskey=p href="#get-client-version">get-client-version</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>mark-text [72] (4) Recommended</h3>

<br><pre>        mark-text [72] (( text      :   <a href="#Text-No">Text-No</a>;
                          mark-type :   <a href="#INT8">INT8</a> ))
                -&gt; ( );
</pre>

<p>This call associates the mark <code>mark-type</code> with the text
<code>text</code>.  The list of marks set by a person can be retrieved using
the <code><a href="#get-marks">get-marks</a></code>
 call.

<p>Currently, servers do not associate any particular meaning to the
different types of marks, but that may change in the future.  Currently,
servers should not delete texts that have marks, except by user request.

<p><i>Example:</i>
<br><pre>        1 23
        <tt>=1 0 *</tt>
        2 72 110 230
        <tt>=2</tt>
        3 23
        <tt>=3 1 { 110 230 }</tt>
</pre>

<p>This example shows how a person with no marks set sets mark 230 on text
number 110.  The calls to <code><a href="#get-marks">get-marks</a></code> show the effect of the call.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>no-such-text</code>
<dd>The text <code>text</code> does not exists or is secret. 
<br><dt><code>permission-denied</code>
<dd>No read access to text <code>text</code>. 
<br><dt><code>undefined-person</code>
<dd>The person currently logged in does not exist (can't happen error.) 
<br><dt><code>mark-limit</code>
<dd>Already the maximum number of marks on text <code>text</code>. 
</dl>

<p><hr>
Node:<a name="unmark-text">unmark-text</a>,
Next:<a rel=next accesskey=n href="#re-z-lookup">re-z-lookup</a>,
Previous:<a rel=previous accesskey=p href="#mark-text">mark-text</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>unmark-text [73] (6) Recommended</h3>

<br><pre>        unmark-text [73] ( text-no : <a href="#Text-No">Text-No</a> )
                -&gt; ( );
</pre>

<p>This call removes any marks the logged-in person has set on the text
<code>text-no</code>.

<p><i>Example:</i>
<br><pre>        1 23
        <tt>=1 1 { 110 230 }</tt>
        2 73 110
        <tt>=2</tt>
        3 23
        <tt>=3 0 *</tt>
</pre>

<p>This example shows how a user with a mark set on text number 110 removes
it using the <code>unmark-text</code> call.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-person</code>
<dd>The person currently logged in does not exist (can't happen error.) 
<br><dt><code>not-marked</code>
<dd>The text <code>text-no</code> was not marked. 
</dl>

<p><hr>
Node:<a name="re-z-lookup">re-z-lookup</a>,
Next:<a rel=next accesskey=n href="#get-version-info">get-version-info</a>,
Previous:<a rel=previous accesskey=p href="#unmark-text">unmark-text</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>re-z-lookup [74] (7) Recommended</h3>

<br><pre>        re-z-lookup [74] (( regexp          :   <a href="#HOLLERITH">HOLLERITH</a>;
                            want-persons    :   <a href="#BOOL">BOOL</a>;
                            want-confs      :   <a href="#BOOL">BOOL</a> ))
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Conf-Z-Info">Conf-Z-Info</a> );
</pre>

<p>This call returns a list of those conferences and/or persons matching
the regular expression <code>regexp</code>.  If <code>want-confs</code> is true, then
the result will include non-mailbox conferences.  If
<code>want-persons</code> is true, then the result will include mailbox
conferences.

<p>See also <a href="#lookup-z-name">lookup-z-name</a>, for an alternative way to look up names.

<p>Refer to <a href="#Name%20Expansion">Name Expansion</a>, for more details on how name lookup
works.

<p><i>Example:</i>
<br><pre>    1 74 2H.* 1 1
    <tt>=1 4 { 15HTest Conference 0000 10 11HDavid Byers 1001 6</tt>
    <tt>        21HTrains (-) Discussion 0000 11 4HJohn 1001 9 }</tt>
    2 74 2H.* 0 1
    <tt>=2 2 { 15HTest Conference 0000 10</tt>
    <tt>       21HTrains (-) Discussion 0000 11 }</tt>
    3 74 7HT.*[cC] 1 1
    <tt>=3 2 { 15HTest Conference 0000 10</tt>
    <tt>       21HTrains (-) Discussion 0000 11 }</tt>
</pre>

<p>This example shows three calls to <code>re-z-lookup</code>.  The first call
returns all conferences and persons in the entire database, in this case
two conferences and two persons.  The second example uses the same
regular expression, but in this case, the call specifies that the
result is only to contain conferences, so the two persons are not
returned.  The third example simply returns all names matching the
pattern "T.*[cC]".

<h4>Error codes</h4>

<dl>

<br><dt><code>regexp-error</code>
<dd>Error compiling the regexp <code>regexp</code>.  Perhaps the pattern is
not a correct regexp.

<br><dt><code>bad-bool</code>
<dd><code>want-persons</code> and <code>want-confs</code> must be either <code>0</code> or
<code>1</code>.

</dl>

<p><hr>
Node:<a name="get-version-info">get-version-info</a>,
Next:<a rel=next accesskey=n href="#lookup-z-name">lookup-z-name</a>,
Previous:<a rel=previous accesskey=p href="#re-z-lookup">re-z-lookup</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-version-info [75] (7) Recommended</h3>

<br><pre>        get-version-info [75] ( )
                -&gt; ( <a href="#Version-Info">Version-Info</a> );
</pre>

<p>This call returns information about the server version.  The data
returned by this call are primarily useful for presenting to the user.  A
client should not use this call to determine what the server's
capabilities are.

<p><i>Example:</i>
<br><pre>        1 75
        <tt>=1 9 7Hlyskomd 5H1.9.0</tt>
</pre>

<p>This example lets us know that the server is lyskomd, version 1.9.0,
which at the time of writing this is the only really usable server.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="lookup-z-name">lookup-z-name</a>,
Next:<a rel=next accesskey=n href="#set-last-read">set-last-read</a>,
Previous:<a rel=previous accesskey=p href="#get-version-info">get-version-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>lookup-z-name [76] (7) Recommended</h3>

<br><pre>        lookup-z-name [76] (( name          :   <a href="#HOLLERITH">HOLLERITH</a>;
                              want-pers     :   <a href="#BOOL">BOOL</a>;
                              want-confs    :   <a href="#BOOL">BOOL</a> ))
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Conf-Z-Info">Conf-Z-Info</a> );
</pre>

<p>This call looks up the name <code>name</code> in the server, and returns a
list of all matching conferences and/or persons.  If <code>want-confs</code>
is true, then the result will include conferences that are not
mailboxes.  If <code>want-pers</code> is true, then the result will include
conferences that are mailboxes.

<p>See also <a href="#re-z-lookup">re-z-lookup</a>, for an alternative way to look up names.

<p>Refer to <a href="#Name%20Expansion">Name Expansion</a>, for details on the matching process.

<p><i>Example:</i>
<br><pre>    1 76 0H 1 1
    <tt>=1 4 { 15HTest Conference 0000 10 11HDavid Byers 1001 6</tt>
    <tt>        21HTrains (-) Discussion 0000 11 4HJohn 1001 9 }</tt>
    2 76 0H 0 1
    <tt>=1 2 { 15HTest Conference 0000 10</tt>
    <tt>       21HTrains (-) Discussion 0000 11 }</tt>
    3 76 3HT C 1 1
    <tt>=3 1 { 15HTest Conference 0000 10 }</tt>
</pre>

<p>This example shows three calls to <code>lookup-z-name</code>.  The first call
retrieves all conferences and persons in the server.  The second request
looks up the same name as the first, but this time the result is
restricted to conferences.  The final request requests all conferences
and persons matching the pattern "T C".

<h4>Error codes</h4>

<dl>

<br><dt><code>bad-bool</code>
<dd><code>want-pers</code> and <code>want-confs</code> must be either <code>0</code> or
<code>1</code>.

</dl>

<p><hr>
Node:<a name="set-last-read">set-last-read</a>,
Next:<a rel=next accesskey=n href="#get-uconf-stat">get-uconf-stat</a>,
Previous:<a rel=previous accesskey=p href="#lookup-z-name">lookup-z-name</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-last-read [77] (8) Recommended</h3>

<br><pre>        set-last-read [77] (( conference :   <a href="#Conf-No">Conf-No</a>;
                              last-read  :   <a href="#Local-Text-No">Local-Text-No</a> ))
                -&gt; ( );
</pre>

<p>This call tells the server that the last local text number the person
issuing the call has read in conference <code>conference</code> is
<code>last-read</code>.  This call is typically used when a user wants to have
a specific number of unread texts in a particular conference.

<p><i>Example:</i>
<br><pre>        1 9 7 6
        <tt>=1 2 4 22 18 6 97 5 198 1 6 100 6 0 *</tt>
        2 77 6 3
        <tt>=2</tt>
        3 9 7 6
        <tt>=3 2 4 22 18 6 97 5 198 1 6 100 3 0 *</tt>
</pre>

<p>This example shows how person 7 originally had read everything up to and
including local text number 6 in conference 6.  After the call to
<code>set-last-read</code>, the <code><a href="#query-read-texts-old">query-read-texts-old</a></code> call reports that
person 7 has read everything up to and including local text number 3.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>conference</code> does not exist or is secret. 
<br><dt><code>not-member</code>
<dd>Not a member of conference <code>conference</code>. 
</dl>

<p><hr>
Node:<a name="get-uconf-stat">get-uconf-stat</a>,
Next:<a rel=next accesskey=n href="#set-info">set-info</a>,
Previous:<a rel=previous accesskey=p href="#set-last-read">set-last-read</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-uconf-stat [78] (8) Recommended</h3>

<br><pre>        get-uconf-stat [78] ( conference : <a href="#Conf-No">Conf-No</a> )
                -&gt; ( <a href="#UConference">UConference</a> );
</pre>

<p>This call returns some information about conference <code>conference</code>. 
The information it returns is sufficient for most uses of conference
information, and this call should be used instead of
<code><a href="#get-conf-stat">get-conf-stat</a></code>
 wherever possible.  It uses less
bandwidth and the lyskomd server always keeps all <code>UConference</code>
objects in memory, so this call is significantly faster than
<code>get-conf-stat</code>.

<p>This is also currently the only way to get all the flag bits of the
conference.

<p><i>Example:</i>
<br><pre>        1 50 6
        <tt>=1 8HTestconf 0000 1 34 21 17 6 97 4 197 1</tt>
        <tt>   37 3 22 18 6 97 5 198 1 5 4 5 0 5 0 77 4 1 6</tt>
        2 78 6
        <tt>=2 8HTestconf 00001000 6 77</tt>
        3 50 7
        <tt>=3 11HDavid Byers 1111 13 4 19 18 6 97 5 198 1</tt>
        <tt>   13 4 19 18 6 97 5 198 1 7 0 7 0 0 0 77 1 1 0</tt>
        4 78 7
        <tt>=4 11HDavid Byers 11111000 0 77</tt>
</pre>

<p>This example shows the difference between <code><a href="#get-conf-stat-old">get-conf-stat-old</a></code> and
<code>get-uconf-stat</code>.  In the first two examples conference 6 is
retrieved, and in the second two, conference 7, which happens to be a
person, is retrieved.  Note the difference in length of the flag field.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-conference</code>
<dd>The conference <code>conference</code> does not exist or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero. 
</dl>

<p><hr>
Node:<a name="set-info">set-info</a>,
Next:<a rel=next accesskey=n href="#accept-async">accept-async</a>,
Previous:<a rel=previous accesskey=p href="#get-uconf-stat">get-uconf-stat</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-info [79] (9) Recommended</h3>

<br><pre>        set-info [79] ( info : <a href="#Info-Old">Info-Old</a> )
                -&gt; ( );
</pre>

<p>This call sets the server information retrieved by
<code><a href="#get-info-old">get-info-old</a></code>.  The version number in the info structure is
ignored (but must be present); all other fields are stored permanently
in the LysKOM database.  This is a privileged call.

<p><i>Example:</i>
<br><pre>        1 79 10901 1 2 3 4 1080
        <tt>=1</tt>
</pre>

<p>This example sets the conference presentation conference to one, the
user presentation conference to two, the motd conference to three and
the news conference to four.  It also sets the login message to text
1080.  It also attempts to set the version number to 1.9.1, but that
number is silently ignored by the server.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>permission-denied</code>
<dd>Administrator bit not set or privileges not enabled.

<br><dt><code>undefined-conference</code>
<dd>One of the conferences in <code>info</code> does not exist.

<br><dt><code>no-such-text</code>
<dd>The MOTD text in <code>info</code> does not exist.

<br><dt><code>mark-limit</code>
<dd>The MOTD text in <code>info</code> already has the maximum number of marks.

<br><dt><code>text-zero</code>
<dd>This error message should never be returned, but lyskomd 1.9.0
erroneously returned this error message if the MOTD text in <code>info</code>
was set to 0.  That should mean that there should be no message of the
day, and the current implementation of the server does accept MOTD to be
0. 
</dl>

<p><hr>
Node:<a name="accept-async">accept-async</a>,
Next:<a rel=next accesskey=n href="#query-async">query-async</a>,
Previous:<a rel=previous accesskey=p href="#set-info">set-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>accept-async [80] (9) Recommended</h3>

<br><pre>        accept-async [80] ( request-list : <a href="#ARRAY">ARRAY</a> <a href="#INT32">INT32</a> )
                -&gt; ( );
</pre>

<p>This call advises the server that the client wants to receive the
asynchronous messages listed in <code>request-list</code>.  The server must
send these messages to the client when applicable, but may also send
other types of messages if it so desires.  The list of currently
requested asynchronous messages may be retrieved using the
<code><a href="#query-async">query-async</a></code>
 call.

<p>Don't forget that message type 12 is personal, group and global
text messages.  Most users will not want these turned off.

<p><i>Example:</i>
<br><pre>        1 80 2 { 7 9 }
        <tt>=1</tt>
</pre>

<p>This example tells the server that the client wants to receive
asynchronous messages when the database is being synched (message 7) and
when someone logs in (message 9).

<h4>Error codes</h4>

<p>If the client requests a message that the server does not send, the
server will reply with an error message saying which message number it
does not support.  The call will succeed anyway.  This mechanism is useful
for clients that want new versions of some messages, but need to be
compatible with older servers.

<dl>
<dt><code>unknown-async</code>
<dd>At least one of the numbers in <code>request-list</code> is not the number
of an async message the server knows about.  The <code>error-status</code>
indicates the first offending number.

<p>Please note that a bug in lyskomd 1.9.0 prevented the server from
sending this error message (frankly, we simply forgot about it.)

<br><dt><code>long-array</code>
<dd>The <code>request-list</code> was too long.  Servers should always accept a
<code>request-list</code> that contains a lot more asynchronous messages than
the server sends, so that it can deal with newer clients.  This error
message should only be returned if the client tries to trigger a buffer
overrun.

</dl>

<p><hr>
Node:<a name="query-async">query-async</a>,
Next:<a rel=next accesskey=n href="#user-active">user-active</a>,
Previous:<a rel=previous accesskey=p href="#accept-async">accept-async</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>query-async [81] (9) Recommended</h3>

<br><pre>        query-async [81] ( )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#INT32">INT32</a> );
</pre>

<p>This call queries the server for which asynchronous messages the client
is receiving.  Note that the client may not be able to turn off all
messages returned in this list since the server may consider some
messages to be mandatory.  Also note that the client may still receive
messages that are not listed in the result of this call.  Even though
those messages are turned off, the server may decide to send them under
certain circumstances.

<p><i>Example:</i>
<br><pre>        1 81
        <tt>=1 7 { 0 5 7 9 11 12 13 }</tt>
</pre>

<p>In this example the client is receiving seven types of asynchronous
messages: messages about new articles, changed names, database synching,
new logins, rejected connections, personal messages and logouts.  This
particular set was the default for new connections to lyskomd 1.9
servers.  See <a href="#Asynchronous%20Messages">Asynchronous Messages</a>, for the currently recommended
list of asynchronous messages that servers should preselect.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="user-active">user-active</a>,
Next:<a rel=next accesskey=n href="#who-is-on-dynamic">who-is-on-dynamic</a>,
Previous:<a rel=previous accesskey=p href="#query-async">query-async</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>user-active [82] (9) Recommended</h3>

<br><pre>        user-active [82] ( )
                -&gt; ( );
</pre>

<p>This call simply notifies the server that the user is active.  The
server uses the time of the last user-active call to calculate how long
a user has been idle.

<p>The client should send this to the server every time the user actively
does something LysKOM-related, such as reads a texts, writes on a
comment, gives a command, de-iconifies the LysKOM window, et c. 
However, the call should not be issued more than twice per minute, to
avoid excessive network and server load.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="who-is-on-dynamic">who-is-on-dynamic</a>,
Next:<a rel=next accesskey=n href="#get-static-session-info">get-static-session-info</a>,
Previous:<a rel=previous accesskey=p href="#user-active">user-active</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>who-is-on-dynamic [83] (9) Recommended</h3>

<br><pre>        who-is-on-dynamic [83] (( want-visible      :   <a href="#BOOL">BOOL</a>;
                                  want-invisible    :   <a href="#BOOL">BOOL</a>;
                                  active-last       :   <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Dynamic-Session-Info">Dynamic-Session-Info</a> );
</pre>

<p>This call returns a list of information about sessions.  Only sessions
with the desired visibility and activeness are returned.

<p>If <code>want-visible</code> is true then information about visible sessions is
returned.  If <code>want-invisible</code> is true then information about
invisible sessions is returned.  If they are both true sessions will be
included in the answer regardless of their visibility status.

<p>Sessions where no-one is logged in are considered invisible, and the
<code>invisible</code> flag is set in the corresponding
<code>Dynamic-Session-Info</code> that is returned.

<p>If <code>active-last</code> is zero then the result is a list of all sessions
with the proper visibility.  If <code>active-last</code> is nonzero then only
sessions that have issued an <code>user-active</code> call within the last
<code>active-last</code> seconds are included in the list.  Sessions that have
never issued an <code>user-active</code> call are always included (if they
have the proper visibility).

<h4>Error codes</h4>

<dl>

<br><dt><code>bad-bool</code>
<dd><code>want-visible</code> and <code>want-invisible</code> must be either <code>0</code>
or <code>1</code>.

</dl>

<p><hr>
Node:<a name="get-static-session-info">get-static-session-info</a>,
Next:<a rel=next accesskey=n href="#get-collate-table">get-collate-table</a>,
Previous:<a rel=previous accesskey=p href="#who-is-on-dynamic">who-is-on-dynamic</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-static-session-info [84] (9) Recommended</h3>

<br><pre>        get-static-session-info [84] ( session-no : <a href="#Session-No">Session-No</a> )
                -&gt; ( <a href="#Static-Session-Info">Static-Session-Info</a> );
</pre>

<p>This call returns information about session number <code>session-no</code>. 
The returned information cannot change until the session number is
reused (and that cannot happen until the server is shut down), so
clients are encouraged to cache the information.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-session</code>
<dd>The session <code>session-no</code> does not exist. 
</dl>

<p><hr>
Node:<a name="get-collate-table">get-collate-table</a>,
Next:<a rel=next accesskey=n href="#create-text">create-text</a>,
Previous:<a rel=previous accesskey=p href="#get-static-session-info">get-static-session-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-collate-table [85] (10) Recommended</h3>

<br><pre>        get-collate-table [85] ( )
                -&gt; ( <a href="#HOLLERITH">HOLLERITH</a> );
</pre>

<p>This call returns the collate table being used by the server to match
names.  If index A and index B in the string are the same character,
characters A and B are considered equivalent.  An empty collate table
indicates that the server considers all characters different.

<p>Currently, the lyskomd server only deals with 8-bit characters.  Clients
should be prepared for collate tables of any length.  Characters whose
code are greater than the length of the collate table should be
considered to be unique.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="create-text">create-text</a>,
Next:<a rel=next accesskey=n href="#create-anonymous-text">create-anonymous-text</a>,
Previous:<a rel=previous accesskey=p href="#get-collate-table">get-collate-table</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>create-text [86] (10) Recommended</h3>

<br><pre>        create-text [86] (( text        :   <a href="#HOLLERITH">HOLLERITH</a>;
                            misc-info   :   <a href="#ARRAY">ARRAY</a> <a href="#Misc-Info">Misc-Info</a>;
                            aux-items   :   <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item-Input">Aux-Item-Input</a> ))
                -&gt; ( <a href="#Text-No">Text-No</a> );
</pre>

<p>Creates a new text with contents from <code>text</code> and recipients
etc. defined by <code>misc-info</code> (see <a href="#The%20Misc-Info%20List">The Misc-Info List</a>).  In
addition to the result, the server will send an asynchronous message
to all members of any of the recipients of the new text.  It is not
defined whether this messages comes before or after the reply to
the create-text message.  Clients should be prepared for either
situation.

<p>The text up to the first linefeed is considered to be the subject
line.  The remaining text is the message body.  Although messages with
only a subject are valid, clients should avoid letting users create
such messages.

<p>The items in <code>aux-items</code> are attached to the new text.

<p>The only Misc-Info items valid for this call are <code>recpt</code>,
<code>cc-recpt</code>, <code>bcc-recpt</code> (introduced in protocol version 10),
<code>comm-to</code> and <code>footn-to</code>.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>string-too-long</code>
<dd>The string <code>text</code> is longer than the maximum length of a message.

<br><dt><code>temporary-failure</code>
<dd>The text could not be created at the moment.

<br><dt><code>no-such-text</code>
<dd>Attempt to comment or footnote a non-existent or secret text.

<br><dt><code>not-author</code>
<dd>Attempt to footnote a text authored by someone else.

<br><dt><code>footnote-limit</code>
<dd>Attempt to footnote a text with the maximum number of footnotes already
set.

<br><dt><code>comment-limit</code>
<dd>Attempt to comment a text with the maximum number of comments already
set.

<br><dt><code>index-out-of-range</code>
<dd>Attempt to create a text failed because we reached the maximum number
of texts permitted.  The <code>error-status</code> indicates the text
number that should have been created if the limit hadn't been reached.

<br><dt><code>access-denied</code>
<dd>Attempt to send a text to a conference failed because no access to the
conference or any super conference that will accept a text.

<br><dt><code>anonymous-rejected</code>
<dd>Attempt to send an anonymous text to a conference that does not accept
anonymous texts.

<br><dt><code>illegal-misc</code>
<dd>Invalid misc-info list.  A recipient is listed more than once or there is
an unknown misc item in the misc-info list.

<br><dt><code>illegal-aux-item</code>
<dd>One of the aux-items in <code>aux-items</code> is illegal.  The tag might be
out of range, the item not applicable to texts or whatever

<br><dt><code>aux-item-permission</code>
<dd>One of the items looks valid but could not be created anyway.

<br><dt><code>long-array</code>
<dd>Too many Misc-Info items or aux-items were specified. 
</dl>

<p><hr>
Node:<a name="create-anonymous-text">create-anonymous-text</a>,
Next:<a rel=next accesskey=n href="#create-conf">create-conf</a>,
Previous:<a rel=previous accesskey=p href="#create-text">create-text</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>create-anonymous-text [87] (10) Recommended</h3>

<br><pre>    create-anonymous-text [87] (( text      : <a href="#HOLLERITH">HOLLERITH</a>;
                                  misc-info : <a href="#ARRAY">ARRAY</a> <a href="#Misc-Info">Misc-Info</a>;
                                  aux-items : <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item-Input">Aux-Item-Input</a> ))
            -&gt; ( <a href="#Text-No">Text-No</a> );
</pre>

<p>Similar to <code><a href="#create-text">create-text</a></code>, but the text is created the author
field set to zero.  Not even the server has a record of who created the
text.

<p>The original intended use for this call was for importing texts from
other sources, such as WWW, FTP or Gopher, but some clients include
explicit support for sending anonymous texts to a server.

<p>It is only possible to send anonymous texts to a conference with the
right flag bit set.

<p>The only Misc-Info items valid for this call in the <code>misc-info</code>
array are <code>recpt</code>, <code>cc-recpt</code>, <code>bcc-recpt</code> (introduced
in protocol version 10), <code>comm-to</code> and <code>footn-to</code>.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>string-too-long</code>
<dd>The string <code>text</code> is longer than the maximum length of a message. 
<br><dt><code>temporary-failure</code>
<dd>The text could not be created at the moment. 
<br><dt><code>no-such-text</code>
<dd>Attempt to comment or footnote a non-existent or secret text. 
<br><dt><code>not-author</code>
<dd>Attempt to footnote a text authored by someone else. 
<br><dt><code>footnote-limit</code>
<dd>Attempt to footnote a text with the maximum number of footnotes already
set. 
<br><dt><code>comment-limit</code>
<dd>Attempt to comment a text with the maximum number of comments already
set. 
<br><dt><code>access-denied</code>
<dd>Attempt to send a text to a conference failed because no access to the
conference or any super conference that will accept a text. 
<br><dt><code>anonymous-rejected</code>
<dd>Attempt to send an anonymous text to a conference that does not accept
anonymous texts. 
<br><dt><code>illegal-misc</code>
<dd>Invalid misc-info list.  A recipient is listed more than once or there is
an unknown misc item in the misc-info list. 
<br><dt><code>illegal-aux-item</code>
<dd>One of the aux-items in <code>aux-items</code> is illegal.  The tag might be
out of range, the item not applicable to texts or whatever
<br><dt><code>aux-item-permission</code>
<dd>One of the items looks valid but could not be created anyway. 
</dl>

<p><hr>
Node:<a name="create-conf">create-conf</a>,
Next:<a rel=next accesskey=n href="#create-person">create-person</a>,
Previous:<a rel=previous accesskey=p href="#create-anonymous-text">create-anonymous-text</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>create-conf [88] (10) Recommended</h3>

<br><pre>        create-conf [88] (( name        :   <a href="#HOLLERITH">HOLLERITH</a>;
                            type        :   <a href="#Any-Conf-Type">Any-Conf-Type</a>;
                            aux-items   :   <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item-Input">Aux-Item-Input</a> ))
                -&gt; ( <a href="#Conf-No">Conf-No</a> );
</pre>

<p>This call is used to create new conferences.  <code>name</code> is the name of
the new conference and <code>type</code> is its type.  If successful, the call
returns the conference number of the newly created conference.  The list
<code>aux-items</code> contains the aux items to attach to the conference.

<p>To use this call the session must have logged in as a user with
privileges to create conferences (see <a href="#Security">Security</a>).

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>permission-denied</code>
<dd>The server does not allow everyone to create a conference and user does
not have the <code>create-conf</code> bit set.  May also be an attempt to
create a conference with the <code>letterbox</code> bit set.

<br><dt><code>conference-exists</code>
<dd>A conference named <code>name</code> already exists.

<br><dt><code>bad-name</code>
<dd><code>name</code> contains invalid characters.

<br><dt><code>string-to-long</code>
<dd><code>name</code> is too long to be used as a conference name.

<br><dt><code>secret-public</code>
<dd>The conference type has the <code>secret</code> bit set, but the
<code>rd-prot</code> bit is cleared.

<br><dt><code>illegal-aux-item</code>
<dd>One of the aux-items in <code>aux-items</code> is illegal.  The tag might be
out of range, the item not applicable to conferences or whatever

<br><dt><code>aux-item-permission</code>
<dd>One of the items looks valid but could not be created anyway.

<br><dt><code>index-out-of-range</code>
<dd>Attempt to create a conference failed because we reached the maximum
number of conferences permitted.  The <code>error-status</code> indicates
the conference number that should have been created if the limit
hadn't been reached. 
</dl>

<p><hr>
Node:<a name="create-person">create-person</a>,
Next:<a rel=next accesskey=n href="#get-text-stat">get-text-stat</a>,
Previous:<a rel=previous accesskey=p href="#create-conf">create-conf</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>create-person [89] (10) Recommended</h3>

<br><pre>        create-person [89] (( name      :   <a href="#HOLLERITH">HOLLERITH</a>;
                              passwd    :   <a href="#HOLLERITH">HOLLERITH</a>;
                              flags     :   <a href="#Personal-Flags">Personal-Flags</a>;
                              aux-items :   <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item-Input">Aux-Item-Input</a> ))
                -&gt; ( <a href="#Pers-No">Pers-No</a> );
</pre>

<p>This call requests that the server create a new person with the name and
password given as arguments.  To create a person the session must be
logged in as a person with sufficient privileges.  The list
<code>aux-items</code> contains the aux items that are to be attached to the
new person's mailbox conference.  The person flags are set to
<code>flags</code>.

<p>The new person will be a member of exactly one conference: the
associated mailbox.  That membership will have priority 255 and (of
course) position 0.  All flags of the membership will be 0.

<p>Unlike call number 5, this call does not do an automatic login.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>The session is not logged in and the server does not allow person
creation before logging in.

<br><dt><code>permission-denied</code>
<dd>The server does not allow everyone to create person and the person
currently logged on does not have the <code>create-pers</code> bit set.

<br><dt><code>person-exists</code>
<dd>There is already a person named <code>name</code>.

<br><dt><code>invalid-password</code>
<dd>The string <code>passwd</code> is not a valid password.

<br><dt><code>illegal-aux-item</code>
<dd>One of the aux-items in <code>aux-items</code> is illegal.  The tag might be
out of range, the item not applicable to conferences or mailboxes or
whatever.

<br><dt><code>aux-item-permission</code>
<dd>One of the items looks valid but could not be created anyway.

<br><dt><code>index-out-of-range</code>
<dd>Attempt to create a person failed because we reached the maximum
number of conferences permitted.  The <code>error-status</code> indicates
the person number that should have been created if the limit hadn't
been reached. 
</dl>

<p><hr>
Node:<a name="get-text-stat">get-text-stat</a>,
Next:<a rel=next accesskey=n href="#get-conf-stat">get-conf-stat</a>,
Previous:<a rel=previous accesskey=p href="#create-person">create-person</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-text-stat [90] (10) Recommended</h3>

<br><pre>        get-text-stat [90] ( text-no : <a href="#Text-No">Text-No</a> )
                -&gt; ( <a href="#Text-Stat">Text-Stat</a> );
</pre>

<p>Get information about text number <code>text-no</code>.  The text-stat contains
information about the size of the text, its recipients, comments, author
and more.

<h4>Error codes</h4>

<dl>
<dt><code>no-such-text</code>
<dd>The text <code>text-no</code> does not exist, or no read access. 
This error code will also be used when attempting to fetch texts
without logging in first.  (There are some texts that are readable
without logging in: the motd-of-lyskom (see <a href="#set-motd-of-lyskom">set-motd-of-lyskom</a>),
and texts with the <code>world-readable</code> aux item set on them.)

<br><dt><code>text-zero</code>
<dd>Attempt to retrieve text number 0. 
</dl>

<p><hr>
Node:<a name="get-conf-stat">get-conf-stat</a>,
Next:<a rel=next accesskey=n href="#modify-text-info">modify-text-info</a>,
Previous:<a rel=previous accesskey=p href="#get-text-stat">get-text-stat</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-conf-stat [91] (10) Recommended</h3>

<br><pre>        get-conf-stat [91] ( conf-no : <a href="#Conf-No">Conf-No</a> )
                -&gt; ( <a href="#Conference">Conference</a> );
</pre>

<p>This call retrieves the conference data structure for conference number
<code>conf-no</code>.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-conference</code>
<dd>The conference <code>conf-no</code> does not exist or is secret. 
</dl>

<p><hr>
Node:<a name="modify-text-info">modify-text-info</a>,
Next:<a rel=next accesskey=n href="#modify-conf-info">modify-conf-info</a>,
Previous:<a rel=previous accesskey=p href="#get-conf-stat">get-conf-stat</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>modify-text-info [92] (10) Recommended</h3>

<br><pre>        modify-text-info [92] (( text   :   <a href="#Text-No">Text-No</a>;
                                 delete :   <a href="#ARRAY">ARRAY</a> <a href="#Aux-No">Aux-No</a>;
                                 add    :   <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item-Input">Aux-Item-Input</a> ))
                -&gt; ( );
</pre>

<p>This call deletes the aux-items listed in <code>delete</code> from the text
<code>text</code> and then adds the ones listed in <code>add</code> to the text. 
Either list may be empty, and the call is guaranteed to either
completely fail or completely succeed.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>no-such-text</code>
<dd>The text <code>text</code> does not exist or is secret. 
<br><dt><code>aux-item-permission</code>
<dd>No permission to delete one or more of the items in <code>delete</code>, or
not enough permissions to add one or more of the items in <code>add</code>. 
<br><dt><code>illegal-aux-item</code>
<dd>One of the items in <code>add</code> is illegal for some reason. 
</dl>

<p><hr>
Node:<a name="modify-conf-info">modify-conf-info</a>,
Next:<a rel=next accesskey=n href="#get-info">get-info</a>,
Previous:<a rel=previous accesskey=p href="#modify-text-info">modify-text-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>modify-conf-info [93] (10) Recommended</h3>

<br><pre>        modify-conf-info [93] (( conf   :   <a href="#Conf-No">Conf-No</a>;
                                 delete :   <a href="#ARRAY">ARRAY</a> <a href="#Aux-No">Aux-No</a>;
                                 add    :   <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item-Input">Aux-Item-Input</a> ))
                -&gt; ( );
</pre>

<p>This call deleted the aux-items listed in <code>delete</code> from the
conference <code>conf</code> and then adds the ones listed in <code>add</code> to
the conference.  Either list may be empty, and the call is guaranteed
to either completely fail or completely succeed.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>conf</code> does not exist or is secret. 
<br><dt><code>aux-item-permission</code>
<dd>No permission to delete one or more of the items in <code>delete</code>, or
not enough permissions to add one or more of the items in <code>add</code>. 
<br><dt><code>illegal-aux-item</code>
<dd>One of the items in <code>add</code> is illegal for some reason. 
</dl>

<p><hr>
Node:<a name="get-info">get-info</a>,
Next:<a rel=next accesskey=n href="#modify-system-info">modify-system-info</a>,
Previous:<a rel=previous accesskey=p href="#modify-conf-info">modify-conf-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-info [94] (10) Recommended</h3>

<br><pre>        get-info [94] ( )
                -&gt; ( <a href="#Info">Info</a> );
</pre>

<p>This call returns the <code>Info</code> structure for the server
(see <a href="#Info">Info</a>).  Clients should call this in order to find
out which conferences are used for presentations and such.

<p>It can be issued without logging in.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="modify-system-info">modify-system-info</a>,
Next:<a rel=next accesskey=n href="#query-predefined-aux-items">query-predefined-aux-items</a>,
Previous:<a rel=previous accesskey=p href="#get-info">get-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>modify-system-info [95] (10) Recommended</h3>

<br><pre> modify-system-info [95] (( items-to-delete : <a href="#ARRAY">ARRAY</a> <a href="#Aux-No">Aux-No</a>;
                            items-to-add    : <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item-Input">Aux-Item-Input</a> ))
          -&gt; ( );
</pre>

<p>This call modifies the aux-item list of the server information (which
can be retrieved using <code><a href="#get-info">get-info</a></code>.) It only succeeds when issued by
a person with the admin bit set and privileges enabled.

<p>The items in <code>items-to-delete</code> are removed, and the items in
<code>items-to-add</code> are added.  This call is atomic; either all
deletions or additions succeeded, or none of them is made.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login requires before issuing this call. 
<br><dt><code>permission-denied</code>
<dd>Admin bit not set or privileges not enabled. 
<br><dt><code>illegal-aux-item</code>
<dd>Attempt to create an invalid aux item. 
<br><dt><code>aux-item-permission</code>
<dd>Attempt to delete an undeletable item or create an uncreateable item. 
</dl>

<p><hr>
Node:<a name="query-predefined-aux-items">query-predefined-aux-items</a>,
Next:<a rel=next accesskey=n href="#set-expire">set-expire</a>,
Previous:<a rel=previous accesskey=p href="#modify-system-info">modify-system-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>query-predefined-aux-items [96] (10) Recommended</h3>

<br><pre>        query-predefined-aux-items [96] ( )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#INT32">INT32</a> );
</pre>

<p>Returns the list of aux-items that have specific definitions in the
server.  These items are the only items within the restricted tag ranges
that can be created.  The meanings of the various item types are defined
in this document; see <a href="#Aux-Item%20Types">Aux-Item Types</a>.

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="set-expire">set-expire</a>,
Next:<a rel=next accesskey=n href="#query-read-texts-10">query-read-texts-10</a>,
Previous:<a rel=previous accesskey=p href="#query-predefined-aux-items">query-predefined-aux-items</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-expire [97] (10) Experimental</h3>

<br><pre>        set-expire [97] (( conf-no  :   <a href="#Conf-No">Conf-No</a>;
                           expire   :   <a href="#Garb-Nice">Garb-Nice</a> ))
                -&gt; ( );
</pre>

<p>This call sets the <code>expire</code> field of the conference <code>conf-no</code>
to <code>expire</code>.  This call can only be issued by the conference's
supervisor or a privileged user.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>conf-no</code> does not exist or is secret. 
<br><dt><code>permission-denied</code>
<dd>Not supervisor of conference <code>conf-no</code> and not privileged enough to
complete the call anyway. 
</dl>

<p><hr>
Node:<a name="query-read-texts-10">query-read-texts-10</a>,
Next:<a rel=next accesskey=n href="#get-membership-10">get-membership-10</a>,
Previous:<a rel=previous accesskey=p href="#set-expire">set-expire</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>query-read-texts-10 [98] (10) Obsolete (11)</h3>

<br><pre>        query-read-texts-10 [98] (( person     : <a href="#Pers-No">Pers-No</a>;
                                    conference : <a href="#Conf-No">Conf-No</a> ))
                -&gt; ( <a href="#Membership-10">Membership-10</a> );
</pre>

<p>This call is obsolete.  Use <code><a href="#query-read-texts">query-read-texts</a></code>.

<p>This call is used to find the number of unread texts in a conference. 
The data it returns is actually a membership structure which specifies
which texts have been read.  It is up to the client to transform the data
to a more usable form.  <code>person</code> is the person being queried
and <code>conference</code> is the conference in question.

<p>Calling <code>query-read-texts-10</code> does not require the session to be
logged in.

<p><i>Example:</i>
<br><pre>        1 98 6 1
        <tt>=1 4 32 5 11 12 7 93 1 193 1 1 20 133</tt>
        <tt>   3 { 135 136 137 } 5 43 8 3 12 7 93 1 193 1 01000000</tt>
</pre>

<p>This example finds the read texts for user 6 in conference 1.  The
returned data indicates that conference 1 is the fifth conference on
the users' membership list (<code>4</code>; remember that the
<code>position</code> starts its count at 0), user last read the conference
on Monday July 12th, 1993 at 11:05:32 (<code>32 5 11 12 7 93 1 193
1</code>), that it is the membership in conference number 1 (<code>1</code>), that
the person has assigned priority 20 to the conference (<code>20</code>) and
that all articles up to and including local number 133 (<code>133</code>)
plus articles 135, 136 and 137 (<code>3 { 135 136 137 }</code>) have been
read.  The membership was added by person 5 (<code>5</code>) at Monday July
12th, 1993 at 03:08:43 (<code>43 8 3 12 7 93 1 193 1</code>) and it is
passive (<code>01000000</code>).

<h4>Error codes</h4>

<dl>
<dt><code>undefined-person</code>
<dd><code>person</code> does not exist, or no access to person. 
<br><dt><code>undefined-conference</code>
<dd>Conference <code>conference</code> does not exist, or is secret. 
<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero. 
<br><dt><code>not-member</code>
<dd><code>person</code> is not a member of <code>conference</code> or insufficient
privileges to find out if <code>person</code> is a member. 
</dl>

<p><hr>
Node:<a name="get-membership-10">get-membership-10</a>,
Next:<a rel=next accesskey=n href="#add-member">add-member</a>,
Previous:<a rel=previous accesskey=p href="#query-read-texts-10">query-read-texts-10</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-membership-10 [99] (10) Obsolete (11)</h3>

<br><pre>        get-membership-10 [99] (( person          : <a href="#Pers-No">Pers-No</a>;
                                  first           : <a href="#INT16">INT16</a>;
                                  no-of-confs     : <a href="#INT16">INT16</a>;
                                  want-read-texts : <a href="#BOOL">BOOL</a> ))
                    -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Membership-10">Membership-10</a> );
</pre>

<p>This call is obsolete.  Use <code><a href="#get-membership">get-membership</a></code>.

<p>This call retrieves the membership record for a list of conferences
for a single person.  <code>person</code> is the person whose memberships are
to be retrieved.  <code>first</code> is the first position in the membership
list to retrieve, numbered from 0 and up.  <code>no-of-confs</code> is the
number of membership records to retrieve.  If <code>want-read-texts</code> is
<code>0</code>, the server will not send the contents of the
<code>read-texts</code> array of the memberships.  (The size will be
transmitted, but a single asterisk (<code>*</code>) will be sent instead of
the array itself.)

<p>The server will return a membership list that is shorter than
<code>no-of-confs</code> if <code>no-of-confs</code> + <code>first</code> is larger than
the number of conferences the person is a member of.  Elements of the
member list that the person requesting the list does not have sufficient
privileges to see may be cleared.  Cleared elements simply have all
fields set to zero.

<p><i>Example:</i>
<br><pre>        1 99 5 0 3 1
        <tt>=1 2 { 0 49 14 17 13 8 91 5 255 1 5 255 0 0 * 5 </tt>
        <tt>   49 14 17 13 8 91 5 255 1 00000000 </tt>
        <tt>   1 20 14 22 17 6 97 4 197 1 6 100 2 0 * 5 </tt>
        <tt>   49 14 17 13 8 91 5 255 1 00000000 }</tt>
        2 99 5 0 1 1
        <tt>=2 1 { 0 49 14 17 13 8 91 5 255 1 5 255 0 0 * 5 </tt>
        <tt>   49 14 17 13 8 91 5 255 1 00000000 }</tt>
        3 99 5 1 4 1
        <tt>=3 1 { 1 20 14 22 17 6 97 4 197 1 6 100 2 0 * 5 </tt>
        <tt>   49 14 17 13 8 91 5 255 1 00000000 }</tt>
</pre>

<p>In this example we retrieve the memberships of person 5.  The first call
asks for three memberships, starting with number 0.  Since this person is
only a member of two conferences, the list returned only contains two
memberships.  The next two calls retrieve a single membership each.  The
first by asking for only one, and the second by asking for four
memberships, starting with number 1.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-person</code>
<dd>The person <code>person</code> does not exist.

<br><dt><code>undefined-conference</code>
<dd>The conference <code>person</code> does not exist or is secret.

<br><dt><code>index-out-of-range</code>
<dd><code>first</code> is higher than the index of the last conference in the
person's membership list.

<br><dt><code>bad-bool</code>
<dd><code>want-read-texts</code> must be either <code>0</code> or <code>1</code>.

</dl>

<p><hr>
Node:<a name="add-member">add-member</a>,
Next:<a rel=next accesskey=n href="#get-members">get-members</a>,
Previous:<a rel=previous accesskey=p href="#get-membership-10">get-membership-10</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>add-member [100] (10) Recommended</h3>

<br><pre>        add-member [100] (( conf-no  : <a href="#Conf-No">Conf-No</a>;
                            pers-no  : <a href="#Pers-No">Pers-No</a>;
                            priority : <a href="#INT8">INT8</a>;
                            where    : <a href="#INT16">INT16</a>;
                            type     : <a href="#Membership-Type">Membership-Type</a> ))
                -&gt; ( );
</pre>

<p>Make the person <code>pers-no</code> a member of conference <code>conf-no</code>. 
The membership priority is set to <code>priority</code> and its position in
the membership list is set to <code>where</code>.

<p>The membership flags are set to <code>type</code>.  If the current user is
adding a user he isn't supervisor of, the <code>invitation</code> bit of
<code>type</code> is automatically set by the server.

<p>This call can be used to change the priority, position and flags of a
conference in the person's membership list if the person is already a
member of the conference.  The person doing this must either be a
supervisor of the affected person, or have sufficient privileges
enabled.

<p><i>Example:</i>
<br><pre>        1 99 119 0 10 0
        <tt>=1 1 { 49 14 17 13 8 91 5 255 1 119 255 0 0 * 119 00001111 }</tt>
        1 100 1 119 250 0 10000000
        <tt>=1</tt>
        1 100 119 119 251 1 00000000
        <tt>=1</tt>
        1 99 119 0 10 0
        <tt>=1 2 { 52 30 14 11 5 96 2 162 1 1 250 0 0 * 119 00000000
               49 14 17 13 8 91 5 251 1 119 255 0 0 * 10000000 }</tt>
</pre>

<p>This example makes person 119 (me) a member of conference number 1 and
changes the priority and some flags of the preexisting membership in
conference 119.  The priority is set to 250 and the conference is placed
first in the membership list.  The first and last calls of the example
show the membership list for person 119 before and after the calls.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conf-no</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conf-no</code> is zero.

<br><dt><code>undefined-person</code>
<dd>Person <code>pers-no</code> does not exist

<br><dt><code>access-denied</code>
<dd>Not enough permissions or privileges to add members to <code>conf-no</code>
or to change privileges, position or type of a preexisting membership.

<br><dt><code>permission-denied</code>
<dd>Person <code>pers-no</code> is already a member of conference <code>conf-no</code>,
but the person logged on is not a supervisor and does not have enough
privileges to change the priorities of person <code>pers-no</code>.

</dl>

<p><hr>
Node:<a name="get-members">get-members</a>,
Next:<a rel=next accesskey=n href="#set-membership-type">set-membership-type</a>,
Previous:<a rel=previous accesskey=p href="#add-member">add-member</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-members [101] (10) Recommended</h3>

<br><pre>        get-members [101] (( conf            : <a href="#Conf-No">Conf-No</a>;
                             first           : <a href="#INT16">INT16</a>;
                             no-of-members   : <a href="#INT16">INT16</a> ))
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Member">Member</a> );
</pre>

<p>This call returns a list of members of the conference <code>conf</code>. 
<code>first</code> is the first index in the membership to return, numbered
from zero and up.  <code>no-of-members</code> is the maximum number of members
to return.

<p>Some of the elements of the result may be cleared if the person
requesting the information does not have sufficient privileges to see
the contents.  Cleared elements simply have all fields set to zero.

<p><i>Example:</i>
<br><pre>        1 101 1 0 100
        <tt>=1 4 { 7 7 00000000 8 8 00000000 9 8 00000000 </tt>
        <tt>   10 10 00000000 }</tt>
        1 101 6 0 100
        <tt>=1 4 { 5 5 01000000 7 7 01000000 9 8 10000000 </tt>
        <tt>   10 10 00000000 }</tt>
        1 101 6 2 2
        <tt>=1 2 { 9 8 10000000 10 10 00000000 }</tt>
</pre>

<p>In this example the client first requests the first 100 members in
conference 1.  The second request is for the first 100 members of
conference 6.  The last request is for members 2 and 3 in conference 6.

<h4>Error codes</h4>

<dl>
<dt><code>undefined-conference</code>
<dd>The conference <code>conf</code> does not exist or is secret. 
<br><dt><code>index-out-of-range</code>
<dd><code>first</code> is higher than the number of members in <code>conf</code>. 
</dl>

<p><hr>
Node:<a name="set-membership-type">set-membership-type</a>,
Next:<a rel=next accesskey=n href="#local-to-global">local-to-global</a>,
Previous:<a rel=previous accesskey=p href="#get-members">get-members</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-membership-type [102] (10) Recommended</h3>

<br><pre>        set-membership-type [102] (( pers       : <a href="#Pers-No">Pers-No</a>;
                                     conf       : <a href="#Conf-No">Conf-No</a>;
                                     type       : <a href="#Membership-Type">Membership-Type</a> ))
                -&gt; ( );
</pre>

<p>This call modifies the type of a membership.  The person <code>pers</code>
membership in conference <code>conf</code> is affected.  The server may impose
arbitrary restrictions on how the membership type may be changed. 
Typically it will only be possible to clear the <code>invitation</code> bit. 
It is possible that the server will not permit the <code>secret</code> bit to
be set.  Attempting to set a membership type that does not agree with
the server's restrictions will result in an error.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>conference-zero</code>
<dd><code>conf</code> is zero.

<br><dt><code>undefined-conference</code>
<dd>The conference <code>conf</code> does not exist or is secret or the person
<code>pers</code> does not exist or is secret.

<br><dt><code>permission-denied</code>
<dd>Insufficient permissions to change the membership of <code>pers</code>.

<br><dt><code>not-member</code>
<dd>Person <code>pers</code> is not a member of conference <code>conf</code>.

<br><dt><code>invalid-membership-type</code>
<dd>The requested membership type <code>type</code> was not compatible with
restrictions set on the server or on the conference <code>conf</code>

</dl>

<p><hr>
Node:<a name="local-to-global">local-to-global</a>,
Next:<a rel=next accesskey=n href="#map-created-texts">map-created-texts</a>,
Previous:<a rel=previous accesskey=p href="#set-membership-type">set-membership-type</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>local-to-global [103] (10) Recommended</h3>

<br><pre>        local-to-global [103] (( conf-no              : <a href="#Conf-No">Conf-No</a>;
                                 first-local-no       : <a href="#Local-Text-No">Local-Text-No</a>;
                                 no-of-existing-texts : <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#Text-Mapping">Text-Mapping</a> );
</pre>

<p>This call retrieves information that makes it possible to convert
<code>no-of-existing-texts</code> existing local text numbers starting at
<code>first-local-no</code> to global text numbers, provided that there are
that many local texts.

<p>The <code>conf-no</code> parameter specifies which conference to look up local
numbers in.  <code>first-local-no</code> is the first number that the client
is interested in.  <code>no-of-existing-texts</code> is the maximum number of
texts the client wants information about.  Legal values for
<code>no-of-existing-texts</code> are 1-255 (inclusive).

<p>The server will return a sparse or dense Text-Mapping depending on the
how many deleted texts there are after <code>first-local-no</code>.

<p>The <code><a href="#local-to-global-reverse">local-to-global-reverse</a></code> request can be useful if you
want to traverse the mapping from higher to lower numbers.

<p><i>Example:</i>
<br><pre>        1 103 93 1 5
        <tt>=1 1 7 1 1 1 6 { 1003 1005 1009 1029 0 1034 }</tt>
        2 103 93 1 6
        <tt>=2 1 63 1 0 6 {
            1 1003
            2 1005
            3 1009
            4 1029
            6 1034
            62 1302 }</tt>
        3 103 93 50 10
        <tt>=3 50 70 0 0 2 {
            62 1302
            69 1006 }</tt>
</pre>

<p>The above example shows three calls to <code>local-to-global</code>.  (Extra
newlines have been inserted in the result of the two final calls to make
the result more readable.)

<p>The first call requests information about the first five existing
texts in conference 93.  The result contains information about texts
in the range 1-7 (including the lower limit, but not the upper), and
there are more texts.  The server uses the dense form of the
<code>Text-Mapping</code>.  As can be seen from the result, they have local
text numbers 1, 2, 3, 4 and 6.  The global text number corresponding
to local text number 5 is sent as 0, indicating that it doesn't exist.

<p>In the second call, the client requests the same information, but one
additional text.  The result looks dramatically different, since the
next existing text in this example has local text number 62.  The
result contains information about texts in the range 1-63 (including
the lower limit, and excluding the upper), and there are more texts. 
The server of course uses the sparse form of the <code>Text-Mapping</code>.

<p>The final call shows what happens when <code>first-local-no</code> doesn't
exist.  The result contains information about texts in the range 50-70
(including the lower limit and excluding the upper); only local text
number 62 and 69 actually exists in that range.  69 is the highest
local text number.

<p>(Note that local text number 69 corresponds to global text number 1006,
which is lower than 1302.  Situations like this often occurs when
<code>add-recipient</code> is used.)

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>long-array</code>
<dd><code>no-of-existing-texts</code> was larger than 255.

<br><dt><code>conf-zero</code>
<dd><code>conf-no</code> was set to 0.

<br><dt><code>local-text-zero</code>
<dd><code>first-local-no</code> was set to 0.

<br><dt><code>undef-conf</code>
<dd>The conference does not exist, or the client is not allowed to know that
it exists.

<br><dt><code>access-denied</code>
<dd>The conference exists, but the client is not allowed to retrieve
information about the texts in the conference.

<br><dt><code>no-such-local-text</code>
<dd><code>first-local-no</code> is greater than the highest local text number that
ever existed in the conference.

</dl>

<p><hr>
Node:<a name="map-created-texts">map-created-texts</a>,
Next:<a rel=next accesskey=n href="#set-keep-commented">set-keep-commented</a>,
Previous:<a rel=previous accesskey=p href="#local-to-global">local-to-global</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>map-created-texts [104] (10) Recommended</h3>

<br><pre>    map-created-texts [104] (( author               : <a href="#Pers-No">Pers-No</a>;
                               first-local-no       : <a href="#Local-Text-No">Local-Text-No</a>;
                               no-of-existing-texts : <a href="#INT32">INT32</a> ))
            -&gt; ( <a href="#Text-Mapping">Text-Mapping</a> );
</pre>

<p>Return text numbers for existing texts that <code>author</code> has written.

<p>Just as each conference has a mapping from local text numbers to global
text numbers, each person has a mapping from the N:th text written by
him to the global text number.  This function can be used to retrieve
part of that mapping.

<p>More information and examples may be found in <a href="#local-to-global">local-to-global</a>.

<p>The <code><a href="#map-created-texts-reverse">map-created-texts-reverse</a></code> request can be useful if you
want to traverse the mapping from higher to lower numbers.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>long-array</code>
<dd><code>no-of-existing-texts</code> was larger than 255.

<br><dt><code>conf-zero</code>
<dd><code>author</code> was set to 0.

<br><dt><code>local-text-zero</code>
<dd><code>first-local-no</code> was set to 0.

<br><dt><code>undef-pers</code>
<dd>The conference does not exist, or the client is not allowed to know that
it exists.

<br><dt><code>no-such-local-text</code>
<dd><code>first-local-no</code> is greater than the highest local text number that
ever existed in the conference.

<br><dt><code>access-denied</code>
<dd>The conference exists, but the client is not allowed to retrieve
information about the texts in the conference.

</dl>

<p><hr>
Node:<a name="set-keep-commented">set-keep-commented</a>,
Next:<a rel=next accesskey=n href="#set-pers-flags">set-pers-flags</a>,
Previous:<a rel=previous accesskey=p href="#map-created-texts">map-created-texts</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-keep-commented [105] (10) Recommended</h3>

<br><pre>        set-keep-commented [105] (( conf-no          :   <a href="#Conf-No">Conf-No</a>;
                                    keep-commented   :   <a href="#Garb-Nice">Garb-Nice</a> ))
                -&gt; ( );
</pre>

<p>Sets the <code>keep-commented</code> field of the conference <code>conf-no</code> to
<code>keep-commented</code>.  This call can only be issued by a conference's
supervisor or a privileged user.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>conf-no</code> does not exist or is secret. 
<br><dt><code>permission-denied</code>
<dd>Not supervisor of conference <code>conf-no</code> and not privileged enough to
complete the call anyway. 
</dl>

<p><hr>
Node:<a name="set-pers-flags">set-pers-flags</a>,
Next:<a rel=next accesskey=n href="#query-read-texts">query-read-texts</a>,
Previous:<a rel=previous accesskey=p href="#set-keep-commented">set-keep-commented</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-pers-flags [106] (10) Recommended</h3>

<br><pre>        set-pers-flags [106] (( pers-no     :   <a href="#Pers-No">Pers-No</a>;
                                flags       :   <a href="#Personal-Flags">Personal-Flags</a> ))
                -&gt; ( );
</pre>

<p>Set the flags field of person <code>pers-no</code> to <code>flags</code>.  This call
can only be issued by the person supervisor or a privileged user.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call. 
<br><dt><code>conference-zero</code>
<dd>The <code>pers-no</code> parameter is zero. 
<br><dt><code>undefined-person</code>
<dd>The person does not exist, or the session does not have permission to
know about the person. 
<br><dt><code>permission-denied</code>
<dd>Person exists, but the session does not have permission to change the
flags. 
</dl>

<p><hr>
Node:<a name="query-read-texts">query-read-texts</a>,
Next:<a rel=next accesskey=n href="#get-membership">get-membership</a>,
Previous:<a rel=previous accesskey=p href="#set-pers-flags">set-pers-flags</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>query-read-texts [107] (11) Recommended</h3>

<br><pre>        query-read-texts [107] (( person           : <a href="#Pers-No">Pers-No</a>;
                                  conference       : <a href="#Conf-No">Conf-No</a>;
                                  want-read-ranges : <a href="#BOOL">BOOL</a>;
                                  max-ranges       : <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#Membership">Membership</a> );
</pre>

<p>This call is used to find the number of unread texts in a conference. 
The data it returns is actually a membership structure which specifies
which texts have been read.  It is up to the client to transform the
data to a more usable form.  <code>person</code> is the person being queried
and <code>conference</code> is the conference in question.

<p>If <code>want-read-ranges</code> is <code>0</code>, the server will not send the
contents of the <code>read-ranges</code> array of the memberships.  (The
size will be transmitted, but a single asterisk (<code>*</code>) will be
sent instead of the array itself.)  The <code>max-ranges</code> argument is
ignored in this case.

<p>If <code>want-read-ranges</code> is <code>1</code>, the <code>read-ranges</code> array
will be returned.  If <code>max-ranges</code> is non-zero, the array will be
truncated to <code>max-ranges</code> ranges.  (It isn't possible to
determine if the array has been truncated, or if the array actually
contained exactly that many ranges.)  Setting <code>max-ranges</code> to
<code>1</code> gives you enough information to find out the first unread
text.

<p>When you call this request with <code>want-read-ranges</code> set to
<code>1</code>, the ranges will expand to include any adjacent texts that
are now deleted.  This may not happen if <code><a href="#get-membership">get-membership</a></code> is
used to retrieve the information.

<p>Calling <code>query-read-texts</code> does not require the session to be
logged in.

<p><i>Example:</i>
<br><pre>        1 107 6 1 1 0
        <tt>=1 4 32 5 11 12 7 93 1 193 1 1 20</tt>
        <tt>   2 { 1 133 135 137 } 5 43 8 3 12 7 93 1 193 1 01000000</tt>
</pre>

<p>This example finds the read texts for user 6 in conference 1.  The
returned data indicates that conference 1 is the fifth conference on
the users' membership list (<code>4</code>; remember that the
<code>position</code> starts its count at 0), user last read the conference
on Monday July 12th, 1993 at 11:05:32 (<code>32 5 11 12 7 93 1 193
1</code>), that it is the membership in conference number 1 (<code>1</code>), that
the person has assigned priority 20 to the conference (<code>20</code>) and
that all texts 1-133 and 135-137 have been read (<code>2 { 1 133 135
137 }</code>).  The membership was added by person 5 (<code>5</code>) at Monday
July 12th, 1993 at 03:08:43 (<code>43 8 3 12 7 93 1 193 1</code>) and it is
passive (<code>01000000</code>).

<h4>Error codes</h4>

<dl>
<dt><code>undefined-person</code>
<dd><code>person</code> does not exist, or no access to person.

<br><dt><code>undefined-conference</code>
<dd>Conference <code>conference</code> does not exist, or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero.

<br><dt><code>not-member</code>
<dd><code>person</code> is not a member of <code>conference</code> or insufficient
privileges to find out if <code>person</code> is a member.

<br><dt><code>bad-bool</code>
<dd><code>want-read-ranges</code> must be either <code>0</code> or <code>1</code>.

</dl>

<p><hr>
Node:<a name="get-membership">get-membership</a>,
Next:<a rel=next accesskey=n href="#mark-as-unread">mark-as-unread</a>,
Previous:<a rel=previous accesskey=p href="#query-read-texts">query-read-texts</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-membership [108] (11) Recommended</h3>

<br><pre>        get-membership [108] (( person           : <a href="#Pers-No">Pers-No</a>;
                                first            : <a href="#INT16">INT16</a>;
                                no-of-confs      : <a href="#INT16">INT16</a>;
                                want-read-ranges : <a href="#BOOL">BOOL</a>;
                                max-ranges       : <a href="#INT32">INT32</a> ))
                    -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Membership">Membership</a> );
</pre>

<p>This call retrieves the membership record for a list of conferences
for a single person.  <code>person</code> is the person whose memberships are
to be retrieved.  <code>first</code> is the first position in the membership
list to retrieve, numbered from 0 and up.  <code>no-of-confs</code> is the
number of membership records to retrieve.

<p>If <code>want-read-ranges</code> is <code>0</code>, the server will not send the
contents of the <code>read-texts</code> array of the memberships.  (The
sizes will be transmitted, but a single asterisk (<code>*</code>) will be
sent instead of the array itself.)  The <code>max-ranges</code> argument is
ignored in this case.

<p>If <code>want-read-ranges</code> is <code>1</code>, the <code>read-ranges</code> arrays
of the memberships will be returned.  If <code>max-ranges</code> is
non-zero, each array will be truncated to <code>max-ranges</code> ranges. 
(It isn't possible to determine if an array has been truncated, or if
that array actually contained exactly that many ranges.)  Unlike
<code><a href="#query-read-texts">query-read-texts</a></code>, the ranges may not expand to include
deleted texts, so it isn't certain that you get enough information
to find the first unread text if you specify a non-zero
<code>max-ranges</code> argument.

<p>The server will return a membership list that is shorter than
<code>no-of-confs</code> if <code>no-of-confs</code> + <code>first</code> is larger than
the number of conferences the person is a member of.  Elements of the
member list that the person requesting the list does not have sufficient
privileges to see may be cleared.  Cleared elements simply have all
fields set to zero.

<p><i>Example:</i>
<br><pre>        1 108 5 0 3 1 0
        <tt>=1 2 { 0 49 14 17 13 8 91 5 255 1 5 255 0 * 5 </tt>
        <tt>   49 14 17 13 8 91 5 255 1 00000000 </tt>
        <tt>   1 20 14 22 17 6 97 4 197 1 6 100 1 { 1 2 } 5 </tt>
        <tt>   49 14 17 13 8 91 5 255 1 00000000 }</tt>
        2 108 5 0 1 1 0
        <tt>=2 1 { 0 49 14 17 13 8 91 5 255 1 5 255 0 * 5 </tt>
        <tt>   49 14 17 13 8 91 5 255 1 00000000 }</tt>
        3 108 5 1 4 1 0
        <tt>=3 1 { 1 20 14 22 17 6 97 4 197 1 6 100 1 { 1 2 } 5 </tt>
        <tt>   49 14 17 13 8 91 5 255 1 00000000 }</tt>
</pre>

<p>In this example we retrieve the memberships of person 5.  The first call
asks for three memberships, starting with number 0.  Since this person is
only a member of two conferences, the list returned only contains two
memberships.  The next two calls retrieve a single membership each.  The
first by asking for only one, and the second by asking for four
memberships, starting with number 1.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-person</code>
<dd>The person <code>person</code> does not exist. 
<br><dt><code>undefined-conference</code>
<dd>The conference <code>person</code> does not exist or is secret.

<br><dt><code>index-out-of-range</code>
<dd><code>first</code> is higher than the index of the last conference in the
person's membership list.

<br><dt><code>bad-bool</code>
<dd><code>want-read-ranges</code> must be either <code>0</code> or <code>1</code>.

</dl>

<p><hr>
Node:<a name="mark-as-unread">mark-as-unread</a>,
Next:<a rel=next accesskey=n href="#set-read-ranges">set-read-ranges</a>,
Previous:<a rel=previous accesskey=p href="#get-membership">get-membership</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>mark-as-unread [109] (11) Recommended</h3>

<br><pre>        mark-as-unread [109] (( conference : <a href="#Conf-No">Conf-No</a>;
                                text       : <a href="#Local-Text-No">Local-Text-No</a> ))
                -&gt; ( );
</pre>

<p>Marks text <code>text</code> in conference number <code>conference</code> as not
read for the current user.  This call updates the membership record
for the user.  It can be used to undo the effect of
<code><a href="#mark-as-read">mark-as-read</a></code>.

<p><i>Example:</i>
<br><pre>        1 9 6 7
        <tt>=1 20 32 11 17 6 96 3 198 1 7 1 241 0 *</tt>
        1 78 7
        <tt>=1 13HInlägg }t mig 00001000 241 1</tt>
        1 27 7 241
        <tt>=1</tt>
        1 9 6 7
        <tt>=1 20 32 11 17 6 96 3 198 1 7 1 240 0 *</tt>
</pre>

<p>This example shows person 6 marking local text number 241 in
conference 7 as not read.  In the first <code>query-read-texts-old</code>
call the person has read local text 241, and nothing higher.  The
<code>mark-as-read</code> call is reflected in the second
<code>query-read-texts-old</code> call, where the user is seen to have read
text 240 in conference 7, but nothing higher.

<p>To mark a global text number as not read it is necessary to translate
it into local text numbers by looking at the misc-info list in the
<code>Text-Stat</code> and calling <code>mark-as-read</code> once for each
recipient.

<p>Attempts to mark a deleted text as unread will appear to succeed, but
might have no effect, since the server will automatically mark them as
read, sooner or later.

<h4>Error codes</h4>

<dl>

<br><dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>The conference <code>conference</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero.

<br><dt><code>not-member</code>
<dd>The person logged on is not a member of conference <code>conference</code>.

<br><dt><code>no-such-local-text</code>
<dd><code>text</code> is not, and has never been, a local text number in
<code>conference</code>.  The error argument contains the invalid number.

<br><dt><code>local-text-zero</code>
<dd><code>text</code> is zero. 
</dl>

<p><hr>
Node:<a name="set-read-ranges">set-read-ranges</a>,
Next:<a rel=next accesskey=n href="#get-stats-description">get-stats-description</a>,
Previous:<a rel=previous accesskey=p href="#mark-as-unread">mark-as-unread</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-read-ranges [110] (11) Recommended</h3>

<br><pre>        set-read-ranges [110] (( conference  : <a href="#Conf-No">Conf-No</a>;
                                 read-ranges : <a href="#ARRAY">ARRAY</a> <a href="#Read-Range">Read-Range</a> ))
                -&gt; ( );
</pre>

<p>This call tells the server that the person issuing the call has read
exactly those texts specified by <code>read-ranges</code> in conference
<code>conference</code>.  This call is typically used to migrate a
membership from one person to another.  It can also be used instead of
<code><a href="#set-unread">set-unread</a></code> or <code><a href="#set-last-read">set-last-read</a></code>.

<p>The server may automatically extend the ranges with adjacent local
text numbers that are deleted.

<p><i>Example:</i>
<br><pre>        1 9 7 6
        <tt>=1 2 4 22 18 6 97 5 198 1 6 100 6 0 *</tt>
        2 110 6 3 { 1 20 23 23 25 28 }
        <tt>=2</tt>
        3 9 7 6
        <tt>=3 2 4 22 18 6 97 5 198 1 6 100 20 5 { 23 25 26 27 28 }</tt>
</pre>

<p>This example shows how person 7 originally had read everything up to
and including local text number 6 in conference 6.  After the call to
<code>set-read-ranges</code>, the <code><a href="#query-read-texts-old">query-read-texts-old</a></code> call reports
that person 7 has read the local text numbers 1-20, 23 and 25-28.

<h4>Error codes</h4>

<dl>

<br><dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>The conference <code>conference</code> does not exist or is secret.

<br><dt><code>conference-zero</code>
<dd><code>conference</code> is zero.

<br><dt><code>not-member</code>
<dd>Not a member of conference <code>conference</code>.

<br><dt><code>local-text-zero</code>
<dd><code>read-ranges</code> contains the number 0.

<br><dt><code>no-such-local-text</code>
<dd><code>read-ranges</code> contains a local text number that never has
existed.

<br><dt><code>long-array</code>
<dd>The <code>read-ranges</code> array is too long.  <code>error-status</code>
indicates the maximum range allowed.

<br><dt><code>invalid-range</code>
<dd>The <code>first-read</code> field in one of the ranges in
<code>read-ranges</code> is greater than <code>last-read</code>.  The
<code>error-status</code> indicates the interval (0 for the first interval,
1 for the second, and so on).

<br><dt><code>invalid-range-list</code>
<dd>The <code>first-read</code> field in one of the ranges in
<code>read-ranges</code> is not greater than the <code>last-read</code> field of
the previous range.  The <code>error-status</code> indicates the interval
(0 for the first interval, 1 for the second, and so on).

</dl>

<p><hr>
Node:<a name="get-stats-description">get-stats-description</a>,
Next:<a rel=next accesskey=n href="#get-stats">get-stats</a>,
Previous:<a rel=previous accesskey=p href="#set-read-ranges">set-read-ranges</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-stats-description [111] (11) Recommended</h3>

<br><pre>        get-stats-description [111] ( )
                -&gt; ( <a href="#Stats-Description">Stats-Description</a> );
</pre>

<p>Return a list of the supported statistical measurements.  This request
always succeeds, and always returns the same value for the duration of
a session, so a client doesn't need to use it more than once per
session.

<p>See <a href="#Stats-Description">Stats-Description</a>, for more info about the data type. 
See <a href="#Measured%20Properties">Measured Properties</a>, for more info on what the returned values
means.

<p><i>Example:</i>
<br><pre>        1 111
        <tt>=1 2 { 3HX-a 3HX-b } 4 { 0 60 300 900 }</tt>
</pre>

<h4>Error codes</h4>

<p>This call always succeeds.

<p><hr>
Node:<a name="get-stats">get-stats</a>,
Next:<a rel=next accesskey=n href="#get-boottime-info">get-boottime-info</a>,
Previous:<a rel=previous accesskey=p href="#get-stats-description">get-stats-description</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-stats [112] (11) Recommended</h3>

<br><pre>        get-stats [112] ( what : <a href="#HOLLERITH">HOLLERITH</a> )
                -&gt; ( <a href="#ARRAY">ARRAY</a> <a href="#Stats">Stats</a> );
</pre>

<p>Return a list of the statistical measurements of <code>what</code>.  The
number of elements in the result corresponds to the <code>when</code> field
of the <code>Stats-Description</code> returned by
<code><a href="#get-stats-description">get-stats-description</a></code>.

<p>See <a href="#Measured%20Properties">Measured Properties</a>, for more info on the <code>what</code>
argument.  See also <a href="#Stats-Description">Stats-Description</a>.

<p><i>Example:</i>
<br><pre>        1 112 7Hclients
        <tt>=1 4 { 20 0 0 19.80 1.2 1.1 18.33 1.2 1.1 16.11 1.2 1.2e-02 }</tt>
</pre>

<p>Assuming that the <code>when</code> field of <code>get-stats-description</code>
contains the time periods 0, 60, 300 and 900, the above result
indicates that there is currently 20 connected clients.  The past
averages for 1, 5 and 15 minutes are 19.8, 18.33 and 16.11 connected
clients.

<p>You can use this call even if you are not logged in.

<h4>Error codes</h4>

<dl>
<dt><code>feature-disabled</code>
<dd>The measurement that was requested has been disabled.

<br><dt><code>undefined-measurement</code>
<dd>The server doesn't measure the value requested by <code>what</code>.

<br><dt><code>access-denied</code>
<dd>The client isn't allowed to retrieve the requested value.  The client
might be granted the privilege by logging in as a privileged user,
using the <code><a href="#enable">enable</a></code> request, by a receiving a privilege bit, or
in an implementation-defined way. 
</dl>

<p><hr>
Node:<a name="get-boottime-info">get-boottime-info</a>,
Next:<a rel=next accesskey=n href="#first-unused-conf-no">first-unused-conf-no</a>,
Previous:<a rel=previous accesskey=p href="#get-stats">get-stats</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-boottime-info [113] (11) Recommended</h3>

<br><pre>        get-boottime-info [113] ( )
                -&gt; ( <a href="#Static-Server-Info">Static-Server-Info</a> );
</pre>

<p>Return status information that was current when the server started. 
This include the time of the last restart.  Clients are encouraged to
cache the return value of this request, as it will never change while
a client is connected.

<h4>Error codes</h4>

<p>This call always succeeds

<p><hr>
Node:<a name="first-unused-conf-no">first-unused-conf-no</a>,
Next:<a rel=next accesskey=n href="#first-unused-text-no">first-unused-text-no</a>,
Previous:<a rel=previous accesskey=p href="#get-boottime-info">get-boottime-info</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>first-unused-conf-no [114] (11) Recommended</h3>

<br><pre>        first-unused-conf-no [114] ( )
                -&gt; ( <a href="#Conf-No">Conf-No</a> );
</pre>

<p>Return first conference number that is not yet used.

<h4>Error codes</h4>

<p>This call always succeeds

<p><hr>
Node:<a name="first-unused-text-no">first-unused-text-no</a>,
Next:<a rel=next accesskey=n href="#find-next-conf-no">find-next-conf-no</a>,
Previous:<a rel=previous accesskey=p href="#first-unused-conf-no">first-unused-conf-no</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>first-unused-text-no [115] (11) Recommended</h3>

<br><pre>        first-unused-text-no [115] ( )
                -&gt; ( <a href="#Text-No">Text-No</a> );
</pre>

<p>Return first text number that is not yet used.

<h4>Error codes</h4>

<p>This call always succeeds

<p><hr>
Node:<a name="find-next-conf-no">find-next-conf-no</a>,
Next:<a rel=next accesskey=n href="#find-previous-conf-no">find-previous-conf-no</a>,
Previous:<a rel=previous accesskey=p href="#first-unused-text-no">first-unused-text-no</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>find-next-conf-no [116] (11) Recommended</h3>

<br><pre>        find-next-conf-no [116] ( start : <a href="#Conf-No">Conf-No</a> )
                -&gt; ( <a href="#Conf-No">Conf-No</a> );
</pre>

<p>This call returns the next conference that you are allowed to see in
the database created after conference <code>start</code>.  <code>start</code> does
not have to be a valid or readable conference number, as shown in the
examples.

<p><i>Example:</i>
<br><pre>        1 116 0
        <tt>=1 2</tt>
        1 116 2
        <tt>=1 4</tt>
</pre>

<p>This example shows how to retrieve the first readable conference in
the LysKOM database by calling <code>find-next-conf-no</code> with
<code>start</code> set to zero.  In the example, the first conference is number 2. 
The second example gets the conference following number 2, which happens to
be conference number 4.

<h4>Error codes</h4>

<dl>

<br><dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>There is no conference following conf <code>start</code>. 
</dl>

<p><hr>
Node:<a name="find-previous-conf-no">find-previous-conf-no</a>,
Next:<a rel=next accesskey=n href="#get-scheduling">get-scheduling</a>,
Previous:<a rel=previous accesskey=p href="#find-next-conf-no">find-next-conf-no</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>find-previous-conf-no [117] (11) Recommended</h3>

<br><pre>        find-previous-conf-no [117] ( start : <a href="#Conf-No">Conf-No</a> )
                -&gt; ( <a href="#Conf-No">Conf-No</a> );
</pre>

<p>This call returns the last accessible conference in the database
created before <code>start</code>.  <code>start</code> does not have to be a valid
or readable conference number, as shown in the examples.

<p><i>Example:</i>
<br><pre>        1 114
        <tt>=1 12345</tt>
        2 117 12345
        <tt>=2 12330</tt>
        1 117 12330
        <tt>=1 12329</tt>
</pre>

<p>This example uses <code><a href="#first-unused-conf-no">first-unused-conf-no</a></code> to find the largest
number that can meaningfully be sent to <code>find-previous-conf-no</code>. 
It then uses the request twice to find that the two conferences with
highest conference numbers that are accessible to the user logged in
is 12329 and 12330.

<h4>Error codes</h4>

<dl>

<br><dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>undefined-conference</code>
<dd>There is no conf preceding conf <code>start</code>. 
</dl>

<p><hr>
Node:<a name="get-scheduling">get-scheduling</a>,
Next:<a rel=next accesskey=n href="#set-scheduling">set-scheduling</a>,
Previous:<a rel=previous accesskey=p href="#find-previous-conf-no">find-previous-conf-no</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>get-scheduling [118] (11) Experimental</h3>

<br><pre>        get-scheduling [118] ( session-no : <a href="#Session-No">Session-No</a> )
                -&gt; ( <a href="#Scheduling-Info">Scheduling-Info</a> );
</pre>

<p>Get the current scheduling information for a session.  You can use 0
as <code>session-no</code> to get information about the current session.

<p><code><a href="#set-scheduling">set-scheduling</a></code> contains an example.

<h4>Error codes</h4>

<p>The first error code in the list below that is applicable will be
returned.

<dl>

<br><dt><code>login-first</code>
<dd>Login required before issuing this call, unless <code>session-no</code> is
0 or the number of the current session.

<br><dt><code>undefined-session</code>
<dd>That session does not exist.

</dl>

<p><hr>
Node:<a name="set-scheduling">set-scheduling</a>,
Next:<a rel=next accesskey=n href="#set-connection-time-format">set-connection-time-format</a>,
Previous:<a rel=previous accesskey=p href="#get-scheduling">get-scheduling</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-scheduling [119] (11) Experimental</h3>

<br><pre>        set-scheduling [119] (( session-no : <a href="#Session-No">Session-No</a>;
                                priority   : <a href="#INT16">INT16</a>;
                                weight     : <a href="#INT16">INT16</a> ))
                -&gt; ( );
</pre>

<p>This call sets the scheduling priority and weight of the connection. 
<a href="#Scheduling-Info">Scheduling-Info</a>, for more information.  You can use 0 as
<code>session-no</code> to set the info for the current session.

<p><i>Example:</i>
<br><pre>        1 118 0
        <tt>=1 1 1000</tt>
        2 119 0 0 1000
        <tt>%2 58 1</tt>
        3 119 0 1 2500
        <tt>%2 59 1500</tt>
        3 119 0 1 1500
        <tt>=3</tt>
</pre>

<p>This example uses <code><a href="#get-scheduling">get-scheduling</a></code> to find out the current
scheduling setting (priority 1 and weight 1000).  The client then
attempts to get a better priority (0), but is informed that priority 1
is the best priority available to this user (or before logging in). 
At request 3 the client attempts to increase the weight to 2500, but
is informed that 1500 is the best weight available.  It finally sets
the weight to 1500.  This will result in a 50% speedup compared to the
default setting.

<p>The <code>set-scheduling</code> request makes it possible to implement a
quite complex scheduling machinery in the server.  Please note,
however, that a server that only implements priority 0 and weight 1
(and thus treats all sessions equally) is fully compliant with this
specification.  The number of priorities and weights that are
available is implementation-defined.  They can vary depending on the
privileges of the user that is logged in, and may be affected by the
<code><a href="#enable">enable</a></code> call.

<h4>Error codes</h4>

<p>The first error code in the list below that is applicable will be
returned.

<dl>

<br><dt><code>weight-zero</code>
<dd>You must specify a non-zero <code>weight</code>.

<br><dt><code>login-first</code>
<dd>Login required before issuing this call, unless <code>session-no</code> is
0 or the number of the current session.

<br><dt><code>undefined-session</code>
<dd>That session does not exist.

<br><dt><code>access-denied</code>
<dd>You don't have enough privileges to modify the priority of the
specified session.  You can only modify your own session and sessions
logged in as a person you are supervisor of.

<br><dt><code>index-out-of-range</code>
<dd>The <code>priority</code> argument is numerically too large. 
<code>error-status</code> indicates the numerically largest priority that
the server supports.

<br><dt><code>priority-denied</code>
<dd>You don't have enough privileges to lower your priority. 
<code>error-status</code> indicates the lowest priority that you have
access to.

<br><dt><code>weight-denied</code>
<dd>You don't have enough privileges to set the specified weight at the
specified priority.  <code>error-status</code> indicates the highest weight
you have access to at the specified priority.  The limit may differ at
different priorities.

</dl>

<p><hr>
Node:<a name="set-connection-time-format">set-connection-time-format</a>,
Next:<a rel=next accesskey=n href="#local-to-global-reverse">local-to-global-reverse</a>,
Previous:<a rel=previous accesskey=p href="#set-scheduling">set-scheduling</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>set-connection-time-format [120] (11) Recommended</h3>

<br><pre>        set-connection-time-format [120] ( use-utc : <a href="#BOOL">BOOL</a> )
                    -&gt; ( );
</pre>

<p>This call specifies how <code>Time</code> values are sent over the
protocol.  By default, they are sent in the local time zone of the
server.  If <code>use-utc</code> is 1, they will instead be sent using UTC.

<p>This affects both times sent from the server to the client, and from
the client to the server.

<p>Please note that there is a race condition.  The time contained in any
asynchronous message received after sending a
<code>set-connection-time-format</code> request and before getting the reply
may have been sent using either the old or the new setting.  You
should not trust them.

<h4>Error codes</h4>

<dl>

<br><dt><code>bad-bool</code>
<dd><code>use-utc</code> must be either <code>0</code> or <code>1</code>.

</dl>

<p><hr>
Node:<a name="local-to-global-reverse">local-to-global-reverse</a>,
Next:<a rel=next accesskey=n href="#map-created-texts-reverse">map-created-texts-reverse</a>,
Previous:<a rel=previous accesskey=p href="#set-connection-time-format">set-connection-time-format</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>local-to-global-reverse [121] (11) Recommended</h3>

<br><pre>    local-to-global-reverse [121] (( conf-no              : <a href="#Conf-No">Conf-No</a>;
                                     local-no-ceiling     : <a href="#Local-Text-No">Local-Text-No</a>;
                                     no-of-existing-texts : <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#Text-Mapping">Text-Mapping</a> );
</pre>

<p>This call retrieves information that makes it possible to convert
<code>no-of-existing-texts</code> existing local text numbers smaller than
<code>local-no-ceiling</code> to global text numbers, provided that there
are that many local texts smaller than <code>local-no-ceiling</code>.

<p>In other words, this request is just link <code><a href="#local-to-global">local-to-global</a></code>,
but it searches backwards in the mapping.

<p>The <code>conf-no</code> parameter specifies which conference to look up
local numbers in.  <code>local-no-ceiling</code> is the first number that
the client is not interested in.  <code>no-of-existing-texts</code> is the
maximum number of texts the client wants information about.  Legal
values for <code>no-of-existing-texts</code> are 1-255 (inclusive).

<p>The server will return a sparse or dense Text-Mapping depending on the
how many deleted texts there are before <code>local-no-ceiling</code>.

<p>As a special case, if <code>local-no-ceiling</code> is 0, information will
be returned about the <code>no-of-existing-texts</code> highest-numbered
texts.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>long-array</code>
<dd><code>no-of-existing-texts</code> was larger than 255.

<br><dt><code>conf-zero</code>
<dd><code>conf-no</code> was set to 0.

<br><dt><code>undef-conf</code>
<dd>The conference does not exist, or the client is not allowed to know that
it exists.

<br><dt><code>access-denied</code>
<dd>The conference exists, but the client is not allowed to retrieve
information about the texts in the conference.

</dl>

<p><hr>
Node:<a name="map-created-texts-reverse">map-created-texts-reverse</a>,
Previous:<a rel=previous accesskey=p href="#local-to-global-reverse">local-to-global-reverse</a>,
Up:<a rel=up accesskey=u href="#Protocol%20Requests">Protocol Requests</a>
<br>

<h3>map-created-texts-reverse [122] (11) Recommended</h3>

<br><pre>  map-created-texts-reverse [122] (( author               : <a href="#Pers-No">Pers-No</a>;
                                     local-no-ceiling     : <a href="#Local-Text-No">Local-Text-No</a>;
                                     no-of-existing-texts : <a href="#INT32">INT32</a> ))
                -&gt; ( <a href="#Text-Mapping">Text-Mapping</a> );
</pre>

<p>Return text numbers for existing texts that <code>author</code> has written. 
This is just like <code><a href="#map-created-texts">map-created-texts</a></code>, but searches in the
other direction.  (Compare with <code><a href="#local-to-global-reverse">local-to-global-reverse</a></code>.)

<p>As a special case, if <code>local-no-ceiling</code> is 0, information will
be returned about the last <code>no-of-existing-texts</code> texts.

<h4>Error codes</h4>

<dl>
<dt><code>login-first</code>
<dd>Login required before issuing this call.

<br><dt><code>long-array</code>
<dd><code>no-of-existing-texts</code> was larger than 255.

<br><dt><code>conf-zero</code>
<dd><code>author</code> was set to 0.

<br><dt><code>undef-pers</code>
<dd>The conference does not exist, or the client is not allowed to know that
it exists.

<br><dt><code>access-denied</code>
<dd>The conference exists, but the client is not allowed to retrieve
information about the texts in the conference.

</dl>

<p><hr>
Node:<a name="Asynchronous%20Messages">Asynchronous Messages</a>,
Next:<a rel=next accesskey=n href="#Error%20Codes">Error Codes</a>,
Previous:<a rel=previous accesskey=p href="#Protocol%20Requests">Protocol Requests</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Asynchronous Messages</h2>

<p>Asynchronous messages are information messages sent from the server to
the client.  Most of them are used to inform the client about changes
to the database (such as when a new text is created), so that the
clients don't have to poll the server for new information.  Some have
other uses.

<p>The messages with status "O" are included here for historical purposes
only.  Servers are not required to handle them, and are encouraged to
reject them if a client uses it as an argument to
<code><a href="#accept-async">accept-async</a></code>.

<ul>
<li><a accesskey=1 href="#About%20Asynchronous%20Messages">About Asynchronous Messages</a>:   Introductory information about
                                  asynchronous messages. 
<li><a accesskey=2 href="#async-new-text-old">async-new-text-old</a>:           O A text has been created                   (0)
<li><a accesskey=3 href="#async-i-am-off">async-i-am-off</a>:               O Logged off (obsolete)                     (1)
<li><a accesskey=4 href="#async-i-am-on-obsolete">async-i-am-on-obsolete</a>:       O Client changed i-am-on string (obsolete)  (2)
<li><a accesskey=5 href="#async-new-name">async-new-name</a>:               r Conference or person changed name         (5)
<li><a accesskey=6 href="#async-i-am-on">async-i-am-on</a>:                r Client changed i-am-doing string          (6)
<li><a accesskey=7 href="#async-sync-db">async-sync-db</a>:                r Server is saving the database             (7)
<li><a accesskey=8 href="#async-leave-conf">async-leave-conf</a>:             r Person has been removed from a conference (8)
<li><a accesskey=9 href="#async-login">async-login</a>:                  r Someone has logged in                     (9)
<li><a href="#async-broadcast">async-broadcast</a>:              O Broadcast message (obsolete)             (10)
<li><a href="#async-rejected-connection">async-rejected-connection</a>:    r LysKOM is full. Log out to make room.    (11)
<li><a href="#async-send-message">async-send-message</a>:           r Text message to group or person          (12)
<li><a href="#async-logout">async-logout</a>:                 r A person has logged out                  (13)
<li><a href="#async-deleted-text">async-deleted-text</a>:           r A text was deleted                       (14)
<li><a href="#async-new-text">async-new-text</a>:               r A text has been created                  (15)
<li><a href="#async-new-recipient">async-new-recipient</a>:          r A new recipient has been added to a text (16)
<li><a href="#async-sub-recipient">async-sub-recipient</a>:          r A recipient has been removed from a text (17)
<li><a href="#async-new-membership">async-new-membership</a>:         r A user has been added to a conference    (18)
<li><a href="#async-new-user-area">async-new-user-area</a>:          r A user-area was changed                  (19)
<li><a href="#async-new-presentation">async-new-presentation</a>:       r A presentation was changed               (20)
<li><a href="#async-new-motd">async-new-motd</a>:               r A motd was changed                       (21)
<li><a href="#async-text-aux-changed">async-text-aux-changed</a>:       r The aux-item list of a text was changed  (22)
</ul>

<p><hr>
Node:<a name="About%20Asynchronous%20Messages">About Asynchronous Messages</a>,
Next:<a rel=next accesskey=n href="#async-new-text-old">async-new-text-old</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>About Asynchronous Messages</h3>

<p>Clients can select which messages to receive by issuing an
<code><a href="#accept-async">accept-async</a></code>
 call.  They can find out which
messages are being sent by issuing the <code><a href="#query-async">query-async</a></code>

<p>call.  Note that the server can send other messages as
well.  For example, a broadcast message from a person with admin bits
set may get through even if the client has not requested broadcast
messages.

<p>When a connection is opened some messages are selected by default. 
Clients should use the <code>accept-async</code> call to select which
messages they want.  Servers are encouraged to preselect the
<code>async-new-text-old</code>, <code>async-new-name</code>,
<code>async-sync-db</code>, <code>async-leave-conf</code>, <code>async-login</code>,
<code>async-rejected-connection</code>, <code>async-send-message</code> and
<code>async-logout</code> messages.  These correspond to the useful messages
that were sent prior to the introduction of <code><a href="#accept-async">accept-async</a></code>.

<p>An asynchronous message is sent as a colon immediately followed by the
number of message parameters, the message number and the message
parameters.  For example, message number 5 could be sent as

<br><pre>:3 5 119 11HDavid Byers 13HDavid C Byers
</pre>

<p>The parameters of each message are listed in the same format as server
calls.

<p><hr>
Node:<a name="async-new-text-old">async-new-text-old</a>,
Next:<a rel=next accesskey=n href="#async-i-am-off">async-i-am-off</a>,
Previous:<a rel=previous accesskey=p href="#About%20Asynchronous%20Messages">About Asynchronous Messages</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-new-text-old [0] (1) Obsolete (10)</h3>

<br><pre>        async-new-text-old [0] (( text-no     :   <a href="#Text-No">Text-No</a>;
                                  text-stat   :   <a href="#Text-Stat-Old">Text-Stat-Old</a> ));
</pre>

<p>This message is sent when a text is created.  The text number of the text
is sent in <code>text-no</code> and the text stat in <code>text-stat</code>.  This
message is sent to all logged-in members of any recipient of the text,
any text it is a comment of, and any text it is a footnote of.

<p>In protocol version 10 this call has been superseded by <a href="#async-new-text">async-new-text</a>.

<p><hr>
Node:<a name="async-i-am-off">async-i-am-off</a>,
Next:<a rel=next accesskey=n href="#async-i-am-on-obsolete">async-i-am-on-obsolete</a>,
Previous:<a rel=previous accesskey=p href="#async-new-text-old">async-new-text-old</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-i-am-off [1] (1) Obsolete (1)</h3>

<br><pre>        async-i-am-off [1] ( person  :   <a href="#Pers-No">Pers-No</a> );
</pre>

<p>This message was sent when <code>person</code> logged off.  It has been
replaced by <code><a href="#async-logout">async-logout</a></code>, since this asynchronous message
could not differentiate between sessions if the same person was logged
in more than once.

<p><hr>
Node:<a name="async-i-am-on-obsolete">async-i-am-on-obsolete</a>,
Next:<a rel=next accesskey=n href="#async-new-name">async-new-name</a>,
Previous:<a rel=previous accesskey=p href="#async-i-am-off">async-i-am-off</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-i-am-on-obsolete [2] (1) Obsolete (1)</h3>

<br><pre>        async-i-am-on-obsolete [2] (( person          :   <a href="#Pers-No">Pers-No</a>;
                                      conference      :   <a href="#Conf-No">Conf-No</a>;
                                      what-am-i-doing :   <a href="#HOLLERITH">HOLLERITH</a> ));
</pre>

<p>This message was sent when <code>person</code> changed his
<code>what-i-am-doing</code> string to <code>what-am-i-doing</code> or his working
conference to <code>conference</code>.

<p>It has been replaced by call number 6, <code><a href="#async-i-am-on">async-i-am-on</a></code>, since
this asynchronous message could not differentiate between sessions if
the same person was logged in more than once.

<p><hr>
Node:<a name="async-new-name">async-new-name</a>,
Next:<a rel=next accesskey=n href="#async-i-am-on">async-i-am-on</a>,
Previous:<a rel=previous accesskey=p href="#async-i-am-on-obsolete">async-i-am-on-obsolete</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-new-name [5] (1) Recommended</h3>

<br><pre>        async-new-name [5] (( conf-no     :   <a href="#Conf-No">Conf-No</a>;
                              old-name    :   <a href="#HOLLERITH">HOLLERITH</a>;
                              new-name    :   <a href="#HOLLERITH">HOLLERITH</a> ));
</pre>

<p>This message is sent when a person or conference changes names.  The
conference whose name is being changed is sent in <code>conf-no</code>, the
old name in <code>old-name</code> and the new name in <code>new-name</code>.

<p><hr>
Node:<a name="async-i-am-on">async-i-am-on</a>,
Next:<a rel=next accesskey=n href="#async-sync-db">async-sync-db</a>,
Previous:<a rel=previous accesskey=p href="#async-new-name">async-new-name</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-i-am-on [6] (1) Recommended</h3>

<br><pre>        async-i-am-on [6] ( info :   <a href="#Who-Info">Who-Info</a> );
</pre>

<p>This message is sent when a session's working conference,
<code>what-i-am-doing</code> string (see <a href="#change-what-i-am-doing">change-what-i-am-doing</a>) or
username changes.  The new information is sent in <code>info</code>.

<p><hr>
Node:<a name="async-sync-db">async-sync-db</a>,
Next:<a rel=next accesskey=n href="#async-leave-conf">async-leave-conf</a>,
Previous:<a rel=previous accesskey=p href="#async-i-am-on">async-i-am-on</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-sync-db [7] (1) Recommended</h3>

<br><pre>        async-sync-db [7] ( );
</pre>

<p>This message is sent once just before the server blocks to save its
database and once just after it blocks.  There is no good way to tell the
difference between the two cases.

<p><hr>
Node:<a name="async-leave-conf">async-leave-conf</a>,
Next:<a rel=next accesskey=n href="#async-login">async-login</a>,
Previous:<a rel=previous accesskey=p href="#async-sync-db">async-sync-db</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-leave-conf [8] (1) Recommended</h3>

<br><pre>        async-leave-conf [8] ( conf-no    :   <a href="#Conf-No">Conf-No</a> );
</pre>

<p>This message is sent to a user when the user's membership in the working
conference is removed for any reason.  The conference the user is being
removed from is sent in <code>conf-no</code>.

<p>Earlier versions of the LysKOM Protocol A specifications stated that
this message was only sent if the membership was "revoked forcefully". 
The exact meaning of that phrasing was never specified.  The lyskomd
implementation has probably always followed the current version of the
specification, which means that this message is sent whatever the reason
for the removal is.

<p>Possible reasons include:
<ul>
<li>The session issued a <code><a href="#sub-member">sub-member</a></code>
 call. 
<li>Some other session issued a <code><a href="#sub-member">sub-member</a></code>
 call. 
<li>The conference was deleted. 
</ul>

<p>This message is not sent if a membership is transformed from an active
to a passive membership.

<p><hr>
Node:<a name="async-login">async-login</a>,
Next:<a rel=next accesskey=n href="#async-broadcast">async-broadcast</a>,
Previous:<a rel=previous accesskey=p href="#async-leave-conf">async-leave-conf</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-login [9] (1) Recommended</h3>

<br><pre>        async-login [9] (( pers-no    :   <a href="#Pers-No">Pers-No</a>;
                           session-no :   <a href="#Session-No">Session-No</a> ));
</pre>

<p>This message is sent when someone logs in.  The identity of the person
logging in is sent in <code>pers-no</code>, and the session number in
<code>session-no</code>.

<p><hr>
Node:<a name="async-broadcast">async-broadcast</a>,
Next:<a rel=next accesskey=n href="#async-rejected-connection">async-rejected-connection</a>,
Previous:<a rel=previous accesskey=p href="#async-login">async-login</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-broadcast [10] (1) Obsolete (1)</h3>

<br><pre>        async-broadcast [10] (( sender    :   <a href="#Pers-No">Pers-No</a>;
                                message   :   <a href="#HOLLERITH">HOLLERITH</a> ));
</pre>

<p>This message has been superseded by <code><a href="#async-send-message">async-send-message</a></code>
 which
is more flexible.  It used to be sent when the administrator
(<code>sender</code>) broadcasted a string (<code>message</code>) to all LysKOM
users, but is no longer used.

<p><hr>
Node:<a name="async-rejected-connection">async-rejected-connection</a>,
Next:<a rel=next accesskey=n href="#async-send-message">async-send-message</a>,
Previous:<a rel=previous accesskey=p href="#async-broadcast">async-broadcast</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-rejected-connection [11] (1) Recommended</h3>

<br><pre>        async-rejected-connection [11] ( );
</pre>

<p>This message is sent when someone fails to log in because the maximum
number of allowed connections has been reached.  Some clients may take
this as a signal to log out.  Administrators should take it as a signal
to allow more connections.

<p><hr>
Node:<a name="async-send-message">async-send-message</a>,
Next:<a rel=next accesskey=n href="#async-logout">async-logout</a>,
Previous:<a rel=previous accesskey=p href="#async-rejected-connection">async-rejected-connection</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-send-message [12] (1) Recommended</h3>

<br><pre>        async-send-message [12] (( recipient  :   <a href="#Conf-No">Conf-No</a>;
                                   sender     :   <a href="#Pers-No">Pers-No</a>;
                                   message    :   <a href="#HOLLERITH">HOLLERITH</a> ));
</pre>

<p>This message is sent when someone (the <code>sender</code>) sends a message
string (the <code>message</code>).  The recipient of the message is sent in
<code>recipient</code>.  If it is zero, then the message was sent to all
connections.  If it is a conference, then the message is being sent to
all logged-in members of that conference.  If it is a mailbox then the
message is personal and is only sent to members of the mailbox
conference.

<p>The <code>passive</code> and <code>passive-message-invert</code> bits of the
membership influence if this message is sent.  See <a href="#Membership-Type">Membership-Type</a>.

<p><hr>
Node:<a name="async-logout">async-logout</a>,
Next:<a rel=next accesskey=n href="#async-deleted-text">async-deleted-text</a>,
Previous:<a rel=previous accesskey=p href="#async-send-message">async-send-message</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-logout [13] (1) Recommended</h3>

<br><pre>        async-logout [13] (( pers-no      :   <a href="#Pers-No">Pers-No</a>;
                             session-no   :   <a href="#Session-No">Session-No</a> ));
</pre>

<p>This message is sent when someone logs out.  <code>pers-no</code> is the person
logging out and <code>session-no</code> is the session in which the person is
logging out.  This message might also be sent when a session disconnects,
even if there is nobody logged on in the session.

<p><hr>
Node:<a name="async-deleted-text">async-deleted-text</a>,
Next:<a rel=next accesskey=n href="#async-new-text">async-new-text</a>,
Previous:<a rel=previous accesskey=p href="#async-logout">async-logout</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-deleted-text [14] (10) Recommended</h3>

<br><pre>        async-deleted-text [14] (( text-no    :   <a href="#Text-No">Text-No</a>;
                                   text-stat  :   <a href="#Text-Stat">Text-Stat</a> ));
</pre>

<p>This message is sent when a text is deleted and the currently
logged-in person is a member of one of the recipients, or a recipient
of any text that is linked to this text via a comment or footnote
link.  The text number being deleted is sent in <code>text-no</code> and the
text stat in <code>text-stat</code>.

<p><hr>
Node:<a name="async-new-text">async-new-text</a>,
Next:<a rel=next accesskey=n href="#async-new-recipient">async-new-recipient</a>,
Previous:<a rel=previous accesskey=p href="#async-deleted-text">async-deleted-text</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-new-text [15] (10) Recommended</h3>

<br><pre>        async-new-text [15] (( text-no    :   <a href="#Text-No">Text-No</a>;
                               text-stat  :   <a href="#Text-Stat">Text-Stat</a> ));
</pre>

<p>This message indicates that a new text has been created.  The text has
number <code>text-no</code>, and the text stat is <code>text-stat</code>.  The
message is sent to all logged-in members of any recipient of the text,
any text it is a comment of, and any text it is a footnote of.

<p><hr>
Node:<a name="async-new-recipient">async-new-recipient</a>,
Next:<a rel=next accesskey=n href="#async-sub-recipient">async-sub-recipient</a>,
Previous:<a rel=previous accesskey=p href="#async-new-text">async-new-text</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-new-recipient [16] (10) Recommended</h3>

<br><pre>        async-new-recipient [16] (( text-no     :   <a href="#Text-No">Text-No</a>;
                                    conf-no     :   <a href="#Conf-No">Conf-No</a>;
                                    type        :   <a href="#Info-Type">Info-Type</a> ));
</pre>

<p>This message indicates that a new recipient has been added to text
<code>text-no</code>.  The recipient added is <code>conf-no</code> and the type of
recipient is indicated by <code>type</code>.  This message is sent to all
recipients of the text (of any text that is linked to this text via a
comment or footnote link) that are permitted to know about the new
recipient.

<p><hr>
Node:<a name="async-sub-recipient">async-sub-recipient</a>,
Next:<a rel=next accesskey=n href="#async-new-membership">async-new-membership</a>,
Previous:<a rel=previous accesskey=p href="#async-new-recipient">async-new-recipient</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-sub-recipient [17] (10) Recommended</h3>

<br><pre>        async-sub-recipient [17] (( text-no     :   <a href="#Text-No">Text-No</a>;
                                    conf-no     :   <a href="#Conf-No">Conf-No</a>;
                                    type        :   <a href="#Info-Type">Info-Type</a> ));
</pre>

<p>This message indicates that a recipient has been removed from text
<code>text-no</code>.  The recipient removed is <code>conf-no</code> and the type
of recipient is indicated by <code>type</code>.  This message is sent to
everybody that were recipients of the text (or any text that is linked
to this text via a comment or footnote link) and that were permitted
to know about the recipient.

<p><hr>
Node:<a name="async-new-membership">async-new-membership</a>,
Next:<a rel=next accesskey=n href="#async-new-user-area">async-new-user-area</a>,
Previous:<a rel=previous accesskey=p href="#async-sub-recipient">async-sub-recipient</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-new-membership [18] (10) Recommended</h3>

<br><pre>        async-new-membership [18] (( pers-no    :   <a href="#Pers-No">Pers-No</a>;
                                     conf-no    :   <a href="#Conf-No">Conf-No</a> ));
</pre>

<p>This message indicates that the membership for <code>pers-no</code> in
conference <code>conf-no</code> has been added.  This message is currently sent
only to <code>pers-no</code>, but that may change in the future.

<p>See also <a href="#async-leave-conf">async-leave-conf</a>.

<p><hr>
Node:<a name="async-new-user-area">async-new-user-area</a>,
Next:<a rel=next accesskey=n href="#async-new-presentation">async-new-presentation</a>,
Previous:<a rel=previous accesskey=p href="#async-new-membership">async-new-membership</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-new-user-area [19] (11) Recommended</h3>

<br><pre>        async-new-user-area [19] (( pers-no       :   <a href="#Pers-No">Pers-No</a>;
                                    old-user-area :   <a href="#Text-No">Text-No</a>;
                                    new-user-area :   <a href="#Text-No">Text-No</a> ));
</pre>

<p>This message indicates that the user-area of <code>pers-no</code> has
changed from <code>old-user-area</code> to <code>new-user-area</code>.  This
message is sent to all supervisors of <code>pers-no</code> (which of course
includes <code>pers-no</code> himself).

<p><hr>
Node:<a name="async-new-presentation">async-new-presentation</a>,
Next:<a rel=next accesskey=n href="#async-new-motd">async-new-motd</a>,
Previous:<a rel=previous accesskey=p href="#async-new-user-area">async-new-user-area</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-new-presentation [20] (11) Recommended</h3>

<br><pre>    async-new-presentation [20] (( conf-no          : <a href="#Conf-No">Conf-No</a>;
                                   old-presentation : <a href="#Text-No">Text-No</a>;
                                   new-presentation : <a href="#Text-No">Text-No</a> ));
</pre>

<p>This message indicates that the presentation of <code>conf-no</code> has
changed from <code>old-presentation</code> to <code>new-presentation</code>.  This
message is sent to everybody who is allowed to see <code>conf-no</code>.  If
the conference had no presentation, <code>old-presentation</code> will be
0.  Likewise, if the presentation of the conference was removed,
<code>new-presentation</code> will be 0.

<p><hr>
Node:<a name="async-new-motd">async-new-motd</a>,
Next:<a rel=next accesskey=n href="#async-text-aux-changed">async-text-aux-changed</a>,
Previous:<a rel=previous accesskey=p href="#async-new-presentation">async-new-presentation</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-new-motd [21] (11) Recommended</h3>

<br><pre>        async-new-motd [21] (( conf-no  : <a href="#Conf-No">Conf-No</a>;
                               old-motd : <a href="#Text-No">Text-No</a>;
                               new-motd : <a href="#Text-No">Text-No</a> ));
</pre>

<p>This message indicates that the <code>msg-of-day</code> of <code>conf-no</code>
has changed from <code>old-motd</code> to <code>new-motd</code>.  This message is
sent to everybody who is allowed to see <code>conf-no</code>.  If the
conference had no message-of-the-day, <code>old-motd</code> will be 0. 
Likewise, if the motd of the conference was removed, <code>new-motd</code>
will be 0.

<p><hr>
Node:<a name="async-text-aux-changed">async-text-aux-changed</a>,
Previous:<a rel=previous accesskey=p href="#async-new-motd">async-new-motd</a>,
Up:<a rel=up accesskey=u href="#Asynchronous%20Messages">Asynchronous Messages</a>
<br>

<h3>async-text-aux-changed [22] (11) Recommended</h3>

<br><pre>        async-text-aux-changed [22] (( text-no : <a href="#Text-No">Text-No</a>;
                                       deleted : <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item">Aux-Item</a>;
                                       added   : <a href="#ARRAY">ARRAY</a> <a href="#Aux-Item">Aux-Item</a> ));
</pre>

<p>This message indicates that the aux-items of text <code>text-no</code> have
been changed.  (This message is not sent when the text is created or
deleted.)  <code>deleted</code> is a list of the deleted items, and
<code>added</code> is a list of the added items.  At least one of the arrays
will be non-empty.

<p>Please note that all items in <code>deleted</code> will have the
<code>deleted</code> bit of the <code>flags</code> field set.

<p><hr>
Node:<a name="Error%20Codes">Error Codes</a>,
Next:<a rel=next accesskey=n href="#Aux-Item%20Types">Aux-Item Types</a>,
Previous:<a rel=previous accesskey=p href="#Asynchronous%20Messages">Asynchronous Messages</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Error Codes</h2>

<p>Normal errors are sent in reply to syntactically correct calls to the
server.  The client should accept any error code in response to any call,
even if the error code in question is not listed in the description of
the call, and even if the error code in question is not defined in the
protocol specification yet.

<p>This table lists the currently defined error codes together with a
short explanation.  The explanation given below is the default
semantics for the error code.  It can be updated by the descriptions
found for a specific call.

<p>See <a href="#Client-Server%20Dialog">Client-Server Dialog</a>, for more information about error responses,
including the syntax of the error response.

<dl>

<br><dt><code>no-error (0)</code>
<dd>No error has occurred.  <code>error-status</code> is undefined.  This should
never happen, but it might.

<br><dt><code>not-implemented (2)</code>
<dd>The call has not been implemented yet.  <code>error-status</code> is undefined.

<br><dt><code>obsolete-call (3)</code>
<dd>The call is obsolete and no longer implemented.  <code>error-status</code> is
undefined.

<br><dt><code>invalid-password (4)</code>
<dd>Attempt to set a password containing illegal characters, or to use an
incorrect password.

<br><dt><code>string-too-long (5)</code>
<dd>A string was too long (see descriptions of each call.) 
<code>error-status</code> indicates the maximum string length.

<br><dt><code>login-first (6)</code>
<dd>Login is required before issuing the call.  <code>error-status</code> is
undefined.

<br><dt><code>login-disallowed (7)</code>
<dd>The system is in single-user mode.  You need to be privileged to log in
despite this.  <code>error-status</code> is undefined.

<br><dt><code>conference-zero (8)</code>
<dd>Attempt to use conference number 0.  <code>error-status</code> is undefined.

<br><dt><code>undefined-conference (9)</code>
<dd>Attempt to access a non-existent or secret conference. 
<code>error-status</code> contains the conference number in question.

<br><dt><code>undefined-person (10)</code>
<dd>Attempt to access a non-existent or secret person. 
<code>error-status</code> contains the person number in question.

<br><dt><code>access-denied (11)</code>
<dd>No read/write access to something.  This might be returned in response to
an attempt to create a text, when the recipient conference and its super
conferences are read-only, or when attempting to add a member to a
conference without enough permission to do so.  <code>error-status</code>
indicates the object to which we didn't have enough permissions to.

<br><dt><code>permission-denied (12)</code>
<dd>Not enough permissions to do something.  The exact meaning of this
response depends on the call.  <code>error-status</code> indicated the object
for which permission was lacking, or zero.

<br><dt><code>not-member (13)</code>
<dd>The call requires the caller to be a member of some conference that the
caller is not a member of.  <code>error-status</code> indicates the conference
in question.

<br><dt><code>no-such-text (14)</code>
<dd>Attempt to access a text that either does not exist or is secret in some
way.  <code>error-status</code> indicates the text number in question.

<br><dt><code>text-zero (15)</code>
<dd>Attempt to use text number 0.  <code>error-status</code> is undefined.

<br><dt><code>no-such-local-text (16)</code>
<dd>Attempt to access a text using a local text number that does not
represent an existing text.  <code>error-status</code> indicates the offending
number.

<br><dt><code>local-text-zero (17)</code>
<dd>Attempt to use local text number zero.  <code>error-status</code> is undefined.

<br><dt><code>bad-name (18)</code>
<dd>Attempt to use a name that's too long, too short or contains invalid
characters.  <code>error-status</code> is undefined.

<br><dt><code>index-out-of-range (19)</code>
<dd>Attempt to use a number that's out of range.  The range and meaning of
the numbers depends on the call issued.  <code>error-status</code> is
undefined unless stated otherwise in the call documentation.

<br><dt><code>conference-exists (20)</code>
<dd>Attempt to create a conference or person with a name that's already
occupied.  <code>error-status</code> is undefined.

<br><dt><code>person-exists (21)</code>
<dd>Attempt to create a person with a name that's already occupied. 
<code>error-status</code> is undefined.  This error code is probably not used,
but you never know for sure.

<br><dt><code>secret-public (22)</code>
<dd>Attempt to give a conference a type with <code>secret</code> bit set and the
<code>rd-prot</code> bit unset.  This is an error since such a conference type
is inconsistent.  <code>error-status</code> is undefined.

<br><dt><code>letterbox (23)</code>
<dd>Attempt to change the <code>letterbox</code> flag of a conference. 
<code>error-status</code> indicates the conference number.

<br><dt><code>ldb-error (24)</code>
<dd>Database is corrupted.  <code>error-status</code> is an internal code.

<br><dt><code>illegal-misc (25)</code>
<dd>Attempt to create an illegal misc item.  <code>error-status</code> contains the
index of the illegal item.

<br><dt><code>illegal-info-type (26)</code>
<dd>Attempt to use a Misc-Info type (or Info-Type value) that the server
knows nothing about. 
<code>error-status</code> is the type.

<br><dt><code>already-recipient (27)</code>
<dd>Attempt to add a recipient that is already a recipient of the same type. 
<code>error-status</code> contains the recipient that already is.

<br><dt><code>already-comment (28)</code>
<dd>Attempt to add a comment to a text twice over.  <code>error-status</code>
contains the text number of the text that already is a comment.

<br><dt><code>already-footnote (29)</code>
<dd>Attempt to add a footnote to a text twice over.  <code>error-status</code>
contains the text number of the text that already is a footnote.

<br><dt><code>not-recipient (30)</code>
<dd>Attempt to remove a recipient that isn't really a recipient. 
<code>error-status</code> contains the conference number in question.

<br><dt><code>not-comment (31)</code>
<dd>Attempt to remove a comment link that does not exist. 
<code>error-status</code> contains the text number that isn't a comment.

<br><dt><code>not-footnote (32)</code>
<dd>Attempt to remove a footnote link that does not exist. 
<code>error-status</code> contains the text number that isn't a footnote.

<br><dt><code>recipient-limit (33)</code>
<dd>Attempt to add a recipient to a text that already has the maximum number
of recipients.  <code>error-status</code> is the text that has the maximum
number of recipients.

<br><dt><code>comment-limit (34)</code>
<dd>Attempt to add a comment to a text that already has the maximum number
of comments.  <code>error-status</code> is the text with the maximum number of
comments.

<br><dt><code>footnote-limit (35)</code>
<dd>Attempt to add a footnote to a text that already has the maximum number
of footnote.  <code>error-status</code> is the text with the maximum number of
footnotes.

<br><dt><code>mark-limit (36)</code>
<dd>Attempt to add a mark to a text that already has the maximum number
of marks.  <code>error-status</code> is the text with the maximum number of
marks.

<br><dt><code>not-author (37)</code>
<dd>Attempt to manipulate a text in a way that required the user to be the
author of the text, when not in fact the author.  <code>error-status</code>
contains the text number in question.

<br><dt><code>no-connect (38)</code>
<dd>Currently unused.

<br><dt><code>out-of-memory (39)</code>
<dd>The server ran out of memory.

<br><dt><code>server-is-crazy (40)</code>
<dd>Currently unused.

<br><dt><code>client-is-crazy (41)</code>
<dd>The client used an illegal call sequence, such as calling
<code>set-client-version</code> more than once.

<br><dt><code>undefined-session (42)</code>
<dd>Attempt to access a session that does not exist.  <code>error-status</code>
contains the offending session number.

<br><dt><code>regexp-error (43)</code>
<dd>Error using a regexp.  The regexp may be invalid or the server unable to
compile it for other reasons.  <code>error-status</code> is undefined.

<br><dt><code>not-marked (44)</code>
<dd>Attempt to manipulate a text in a way that requires the text to be
marked, when in fact it is not marked.  <code>error-status</code> indicates the
text in question.

<br><dt><code>temporary-failure (45)</code>
<dd>Temporary failure.  Try again later.  <code>error-status</code> is undefined.

<br><dt><code>long-array (46)</code>
<dd>An array sent to the server was too long.  <code>error-status</code> is
undefined.

<br><dt><code>anonymous-rejected (47)</code>
<dd>Attempt to send an anonymous text to a conference that does not accept
anonymous texts.  <code>error-status</code> is undefined.

<br><dt><code>illegal-aux-item (48)</code>
<dd>Attempt to create an invalid aux-item.  Probably the tag or data are
invalid.  <code>error-status</code> contains the index in the aux-item list
where the invalid item appears.

<br><dt><code>aux-item-permission (49)</code>
<dd>Attempt to manipulate an aux-item without enough permissions.  This
response is sent when attempting to delete an item set by someone else
or an item that can't be deleted, and when attempting to create an item
without permissions to do so.  <code>error-status</code> contains the index at
which the item appears in the aux-item list sent to the server.

<br><dt><code>unknown-async (50)</code>
<dd>Sent in response to a request for an asynchronous message the server
does not send.  The call succeeds, but this is sent as a warning to the
client.  <code>error-status</code> contains the message type the server did not
understand.

<br><dt><code>internal-error (51)</code>
<dd>The server has encountered a possibly recoverable internal error. 
<code>error-status</code> is undefined.

<br><dt><code>feature-disabled (52)</code>
<dd>Attempt to use a feature that has been explicitly disabled in the
server.  <code>error-status</code> is undefined.

<br><dt><code>message-not-sent (53)</code>
<dd>Attempt to send an asynchronous message failed for some reason.  Perhaps
the recipient is not accepting messages at the moment or there are no
viable members in the recipient of the message. 
<code>error-status</code> is undefined.

<br><dt><code>invalid-membership-type (54)</code>
<dd>A requested membership type was not compatible with restrictions set on
the server or on a specific conference.  <code>error-status</code> is
undefined unless specifically mentioned in the documentation for a
specific call.

<br><dt><code>invalid-range (55)</code>
<dd>The lower limit of a supplied range is greater than the upper limit. 
<code>error-status</code> is undefined.

<br><dt><code>invalid-range-list (56)</code>
<dd>The lower limit of a supplied range is not greater than the upper
limit of the previous range in the list. 
<code>error-status</code> is undefined.

<br><dt><code>undefined-measurement (57)</code>
<dd>A request for a measurement that the server doesn't make has been
made. 
<code>error-status</code> is undefined.

<br><dt><code>priority-denied (58)</code>
<dd>You don't have enough privileges to lower your priority. 
<code>error-status</code> indicates the lowest priority that you have
access to.

<br><dt><code>weight-denied (59)</code>
<dd>You don't have enough privileges to set the specified weight.

<br><dt><code>weight-zero (60)</code>
<dd>The scheduling weight must be non-zero. 
<code>error-status</code> is undefined.

<br><dt><code>bad-bool (61)</code>
<dd>An argument of type <code>BOOL</code> was given a value that is neither
<code>0</code> nor <code>1</code>. 
<code>error-status</code> is undefined.

</dl>

<p><hr>
Node:<a name="Aux-Item%20Types">Aux-Item Types</a>,
Next:<a rel=next accesskey=n href="#Name%20Expansion">Name Expansion</a>,
Previous:<a rel=previous accesskey=p href="#Error%20Codes">Error Codes</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Aux-Item Types</h2>

<p>Some of the aux-items below (mostly the ones that begin with "mx-") are
used by mail importers.

<dl>
<dt><code>content-type [1] (text)</code>
<dd>Specifies the content type of a text.  Data is a valid MIME type or one
of the special LysKOM types (see <a href="#LysKOM%20Content%20Types">LysKOM Content Types</a>).

<p>This item may only be set by the author of a text.  The inherit, secret
and hide-owner bits are cleared.  Only one content-type item can be
created per creator.

<br><dt><code>fast-reply [2] (text)</code>
<dd>Data is a string that constitutes a brief comment to the text.  This
comment should be displayed immediately after the text body.

<p>An item of this type will never be inherited, can always be deleted, is
never anonymous and is never secret.

<br><dt><code>cross-reference [3] (text, conference, letterbox)</code>
<dd>Data is a cross-reference to something else.  The contents consist of a
letter, a number, and optionally a space and a descriptive text.  The
letter must be one
of T, C or P.  T specifies that the cross-reference points to a text; C
that it points to a conference; and P that it points to a person.  The
number is the id of the target of the cross reference.  The descriptive
text is simply that, a text that describes the cross-reference.  For
example, "T15 Check this out!" is a cross reference to text 15 with a
description that reads "Check this out!", and "T17" is a cross reference
without a description.

<p>The inherit bit is automatically cleared and the item can always be
deleted.

<br><dt><code>no-comments [4] (text)</code>
<dd>When this item is set, the author requests that nobody comments the
text.  This is advisory only; it is still possible to write comments, but
clients should advise the user that this is contrary to the author's
wishes.  Data should be empty.

<p>This item may only be set by the author.  The secret, hide-creator and
inherit bits are automatically cleared.

<br><dt><code>personal-comment [5] (text)</code>
<dd>When this item is set, the author requests only personal comments.  This
is advisory only; it is still possible to create regular comments, but
clients should advise the user that the author prefers a personal
comment.  Data should be empty.

<p>This item may only be set by the author.  The secret, hide-creator and
inherit bits are automatically cleared.

<br><dt><code>request-confirmation [6] (text)</code>
<dd>The author requests that everyone who reads the text confirms having
done so by creating read-confirmation items on the text.  Clients should
ask users if they wish to confirm having read the text when it is
displayed.  Data should be empty.

<p>The hide-creator, secret and inherit bits are automatically cleared.

<br><dt><code>read-confirm [7] (text)</code>
<dd>This item can be taken as confirmation that the item creator has read
the text to which the item is attached.  Clients should never ever create
this item without an explicit confirmation from the user that the text
has indeed been read.

<p>The hide-creator, secret and inherit bits are automatically cleared. 
Once created an item of this type cannot be deleted.

<br><dt><code>redirect [8] (conference, letterbox)</code>
<dd>
This item indicates that texts should not be sent to the conference,
but be directed to some other target instead.  Clients should notify
users that attempt to send texts to the conference of the redirect and
offer to send the text to the target of the redirect instead.  A typical
use of this item would be a user that does not read LysKOM very often
and would like to advise other users to send e-mail instead.

<p>Data is PROTOCOL:ADDRESS where PROTOCOL is either "E-mail" or "LysKOM",
and ADDRESS is either an e-mail address or a LysKOM conference number. 
Hopefully we'll be able to replace this with a forwarding mechanism
later.

<p>This item can only be set by the conference supervisor or in the case of
a mailbox, the person attached to the mailbox.  The hide-creator and
secret bits are cleared automatically.  Only one redirect can be
specified.

<br><dt><code>x-face [9] (conference, letterbox, server)</code>
<dd>
Data is the face of the person in compface format.  Cool, innit?

<p>This item can only be set by the conference supervisor or in the case of
a mailbox, the person attached to the mailbox.  The hide-creator and
secret bits are cleared automatically.

<br><dt><code>alternate-name [10] (text, conference, letterbox)</code>
<dd>
Data is a string that the client may use as an alternate to the name of
a conference or the subject of a text.  Note that the server does not
match against this name when performing name lookups.  Clients should
only display alternate names created by the user currently logged on.

<p>The inherit flag is automatically cleared.

<br><dt><code>pgp-signature [11] (text)</code>
<dd>
Data is a PGP signature of the text.  The signature should be the
equivalent of what <code>pgp -sba</code> in PGP 2.6.2 generates.

<p>The secret, hide-creator and inherit bits are automatically cleared. 
Signatures cannot be deleted once they have been created.

<br><dt><code>pgp-public-key [12] (letterbox)</code>
<dd>
Data is the public key of the person.  It is desirable that the public
key contains a userid of the format "LysKOM &lt;p<var>n</var>@<var>server</var>&gt;+",
where <var>n</var> is the number of the person in the LysKOM server specified
in <var>server</var>.  This rule is currently not enforced.

<p>This item can only be set by the person himself.  The hide-creator,
secret and inherit bits are automatically cleared.

<br><dt><code>e-mail-address [13] (conference, letterbox, server)</code>
<dd>
Data is an RFC 822-style email address.  When set on a mailbox, it
should be the email address of the person.  If the person has multiple
email addresses he may set several e-mail-address aux-items.

<p>The meaning of this aux-item when set on a conference that isn't a
mailbox is vague.  For a conference that is used as to import a mailing
list this should be the email address of the list.  For other conferences
we haven't really defined a sensible use.

<p>When this aux-item is set on the server it should contain the email
address of the administrator (or administrators.)

<p>This aux-item can only be set by the supervisor of a conference or the
server administrator.  The creator cannot be hidden.

<br><dt><code>faq-text [14] (conference, letterbox, server)</code>
<dd>
Data is a decimal text number, which is a FAQ for the conference,
letterbox or server.  Creating an item of this type automatically
causes creation of a faq-for-conf item.

<p>This item can only be set by the supervisor or server administrator.  The
hide-creator, secret, and inherit bits are automatically cleared.

<br><dt><code>creating-software [15] (text)</code>
<dd>
Data is the name and version number of the client that created the
text.  This aux-item can only be set by the author of the text.  Once
set, it cannot be removed or changed.  A typical value would be
<code>elisp-client 0.47.3</code>.  Setting the creating-software aux-item is
optional.

<p>The data should be the client name, a space, and the client version used
in the <code><a href="#set-client-version">set-client-version</a></code> call.  The server may enforce this
restriction.

<br><dt><code>mx-author [16] (text)</code>
<dd>
Data is a string containing the name of the author of an imported
e-mail, extracted from the <code>From</code> header.  This aux-item may be
missing, if the mail address in the <code>From</code> header consists of just
the <code>addr-spec</code> (see the next aux-item).

<p>Clients should display this instead of the actual author of the text
(which will be an importer ID) even if an mx-from aux-item is not present.

<p>Sample contents: <code>Joe Q. Public</code> which may come from a <code>From</code>
header containing <code>"Joe Q. Public" &lt;john.q.public@example.com&gt;</code>.

<br><dt><code>mx-from [17] (text)</code>
<dd>
Data is the proper e-mail address (called <code>addr-spec</code> in the mail
standards) extracted from the <code>From</code> header of an imported
e-mail.

<p>Clients should display this address together with the <code>mx-author</code>,
preferably inside angles.  If <code>mx-author</code> is not present, this address
should be shown anyway.  It can also be used by clients to construct an
address for personal (e-mail) replies to an imported message.

<p>Sample contents: <code>john.q.public@example.com</code> which may come from a
<code>From</code> header containing <code>john.q.public@example.com</code> or
something like <code>"Joe Q. Public" &lt;john.q.public@example.com&gt;</code>.

<br><dt><code>mx-reply-to [18] (text)</code>
<dd>
Data is the proper e-mail address (called <code>addr-spec</code> in the mail
standards) extracted from the <code>Reply-To</code> header of an imported
e-mail.  Clients should use this for constructing replies to imported
messages.

<br><dt><code>mx-to [19] (text)</code>
<dd>
Data is a single e-mail address from an email <code>To</code> header. 
Multiple <code>mx-to</code> items may be present when multiple recipients are
specified in the header.  Clients should display these items along
with the normal LysKOM recipient headers.

<p>Sample contents: Both <code>john.q.public@example.com</code> and
<code>"Joe Q. Public" &lt;john.q.public@example.com&gt;</code> are valid.

<br><dt><code>mx-cc [20] (text)</code>
<dd>
Same as <code>mx-to</code>, but applies to the <code>CC</code> header rather than
the <code>To</code> header.

<br><dt><code>mx-date [21] (text)</code>
<dd>
Data is the date and time from the <code>Date</code> header of an imported
email.  Its format is "YYYY-MM-DD hh:mm:ss TZ". 
YYYY is the year the message was sent, MM is the
month, DD is the day, hh is the hour,
mm is the minute and ss is the second.  This
date and time are given in the
timezone where the message was sent.  TZ is the timezone the date is
valid for.  It must be of the form "+hhmm" or
"-hhmm", where hh is the
number of hours offset from UTC and mm is the number of minutes
offset.  Symbolic timezones are not permitted.  The timezone specification
is recommended but optional, since it is not always available.

<p>Clients should display this information as the date and time a text was
written, since the imported text will have been created at a later
time.  The date and time when the message was imported would then be
displayed elsewhere or not at all.

<br><dt><code>mx-message-id [22] (text)</code>
<dd>
Data is the <code>Message-ID</code> header of an imported e-mail, with
whitespace and comments removed.  The Message-ID should contain the
surrounding angles.

<br><dt><code>mx-in-reply-to [23] (text)</code>
<dd>
Data is a string containing one item of the same form as the
mx-message-id item described above.  This is the Message-ID of
another mail the current text is a comment to.

<p>Hopefully, this information comes from the <code>In-Reply-To</code> header
of the imported e-mail, but it could also have been picked from the end
of the <code>References</code> header line.

<p>If the text really comments more than one other text directly,
it is allowed to attach more than one <code>mx-in-reply-to</code> items to
it.

<br><dt><code>mx-misc [24] (text)</code>
<dd>
Data is a string that contains all of the headers of an imported email,
including <code>Subject</code>, and including those that are redundantly
stored in other aux-items.  The headers are concatenated with "\n".  In
other words, this item contains all headers of an imported e-mail as
they appear in the message.

<p>Clients are encouraged to provide a command to display this information.

<br><dt><code>mx-allow-filter [25] (conference, letterbox)</code>
<dd>
This aux-item has been declared obsolete.  It was intended to supply
the importer with information on how to filter incoming messages
based on regular expressions matching header lines.

<br><dt><code>mx-reject-forward [26] (conference, letterbox)</code>
<dd>
This aux-item has been declared obsolete.  It was intended
to supplement mx-allow-filter by telling where rejected mails should
be sent.

<br><dt><code>notify-comments [27] (letterbox)</code>
<dd>
Data is a decimal text number that the user is interested in.  Clients
should monitor this text for unread comments and present these to the
user in some convenient manner.  This is typically used by users that
want to read comments to some text of theirs as soon as they arrive,
rather than in the normal reading order.

<p>This item can only be set by the owner of the letterbox.  No flags are
forced or cleared.

<br><dt><code>faq-for-conf [28] (text)</code>
<dd>
Data is a decimal number specifying the conference a certain text is a
FAQ for.  The special number zero denotes that the text is a FAQ for the
entire system.  Items of this kind can only be created by the LysKOM
server itself.  Texts with this item are protected from garbage
collection.

<br><dt><code>recommended-conf [29] (server)</code>
<dd>
Data is a decimal number specifying a conference that new members should
automatically be added to, optionally followed by a space and a
recommended priority, optionally followed by a space and a membership
type.  In the future, additional data may be defined; clients should
be prepared to accept and ignore a space and any trailing data that may
follow the membership type.

<p>A few examples might clarify what the data may look like:
<dl>
<dt><code>1</code>
<dd>Conference number 1. 
<br><dt><code>2 32</code>
<dd>Conference number 2, with priority 32. 
<br><dt><code>3 250 11100000</code>
<dd>Conference number 3, with priority 250.  The membership should be
secret, passive and have the invitation bit set. 
<br><dt><code>4 253 01000000 garbage</code>
<dd>Conference number 4, with priority 253.  The membership should be
passive.  The client should ignore the trailing garbage; it is
reserved for future extensions.  Note that
clients are not allowed to create aux-items of this format, but they
should be prepared to handle them correctly. 
</dl>

<p>This is a recommendation only; it is up to the client that creates a new
person to also add him to the conferences that are specified via
<code>recommended-conf</code>.

<br><dt><code>allowed-content-type [30] (conference, letterbox, server)</code>
<dd>
Data is a non-negative decimal priority number, followed by a space,
followed by a LysKOM content type glob pattern.  Clients should send
texts to a conference only if the content-type matches any of the
<code>allowed-content-type</code> glob patterns of that conference.

<p>If the conference doesn't have any <code>allowed-content-type</code>, the
<code>allowed-content-type</code> items of the server should be used.  If the
server also has no <code>allowed-content-type</code> aux-items, it should be
interpreted as if a single <code>allowed-content-type</code> aux-item with the
value <code>1 text/plain</code> exists.

<p>If there are <code>allowed-content-type</code> aux-items with different
priority numbers, it is a hint to the client about which content-type is
most desirable.  Content-types that matches a lower priority number are
preferred.

<p>As an example, consider a conference with the following four
<code>allowed-content-type</code> aux-items:

<br><pre>1 text/plain
2 text/x-kom-basic
2 text/enriched
3 text/*
</pre>

<p>These aux-items taken together means that <code>text/plain</code> is
preferred, that <code>text/x-kom-basic</code> and <code>text/enriched</code> can be
used if there is a reason why <code>text/plain</code> is inadequate, and
that any text type (such as <code>text/html</code>) is acceptable.  Other
content types, such as <code>x-kom/user-area</code>, should not be used.

<p>The server does not currently enforce the above restriction on the
content type of new texts.  This mechanism is currently a hint to the
client (or to the author of a new text).  This may change in the
future, if experience shows that it is desirable to have the server
enforce the content type.

<br><dt><code>canonical-name [31] (server)</code>
<dd>
This should be set to the official domain name of the server,
optionally followed by a colon and the port number.  The port number
should only be used if a non-standard port is used.  Examples:
<code>kom.lysator.liu.se:8300</code>, <code>kom.lysator.liu.se</code>.  The intent
is that the <code>canonical-name</code> should be globally unique among all
LysKOM servers.  Only a single aux-item of this type can be set on the
server.  This aux-item can be used by clients that wish to do certain
things only when connected to a specific server.

<br><dt><code>mx-list-name [32] (conference)</code>
<dd>
This item should only be used if the main purpose of the conference is
to import a single external mailing list.  The data should be the
email address that is used to post to the list, such as
<code>bug-lyskom@lysator.liu.se</code>.

<br><dt><code>send-comments-to [33] (letterbox)</code>
<dd>
Normally, when a comment is created, the LysKOM client adds the author
of the commented text to the recipient list if he isn't a member of
any of the recipients of the comment.  By setting this aux-item on the
letterbox, a person can request different treatment.

<p>Data is a decimal integer (a conference number) optionally followed by
a space character and a decimal number (a recipient type).  In the
future, additional data may be defined; clients must be prepared to
accept and ignore a space and any trailing data that may follow the
recipient type.  Clients must be prepared to accept items of this type
that contain only the conference number.

<p>Comments should be sent to the specified conference number instead of
to the author.  The value <code>0</code> is special and means that the
comment should not be sent to any special conference, even though that
means that the author of the commented text will never see the
comment.  (The value <code>0</code> is useful for mail importers and other
similar robots.)

<p>The recipient type is the type of recipient to add.  If the recipient
type is missing, clients should either assume recipient type zero
(<code>recpt</code>) or ask the user.  Legal recipient types are <code>0</code>
for <code>recpt</code>, <code>1</code> for <code>cc-recpt</code> and <code>15</code> for
<code>bcc-recpt</code> (these are the values used in <code>Info-Type</code>). 
Additional recipient types may be added in the future.  Clients should
treat unknown or invalid recipient types as if they were missing
(i.e. treat them as zero or ask the user).

<p>See <a href="#Recipients%20of%20comments">Recipients of comments</a>, for more information about how the
client should select the conferences that a comment should be sent
to.

<p>This aux-item can only be set by the supervisor of the person.

<br><dt><code>world-readable [34] (text)</code>
<dd>
Texts that has this aux-item set on them can be read by everybody.  It
is not even necessary to log in.

<p>Only the author of the text can set this item.  The data must be the
empty string.  The hide-creator, secret, dont-garb and inherit bits
are automatically cleared.

<br><dt><code>mx-refuse-import [35] (conference, letterbox)</code>
<dd>
This item tells the importer under what circumstances mail should be
imported to the conference or letterbox. If no aux-item of this type is
present, there are no limitations on import to this conference or
letterbox.

<p>If the data is the string <code>all</code>, the importer will never add this
conference or letterbox as a recipient.

<p>If the data is the string <code>spam</code>, the importer will not add this
conference or letterbox as a recipient if the mail is considered to be
spam according to some importer specific criteria (such as the presence
of SpamAssassin flags).

<p>If the data is the string <code>html</code>, the importer will not add this
conference or letterbox as a recipient if the mail is considered to be
in HTML format.

<p>In the future, other alternatives in addition to the above may be
defined for this aux-item. An importer should silently ignore
unrecognized ones. If more than one aux-item of this type is present,
they will be combined in the most restrictive way, i.e. the recipient
will not be added if any of the aux-items forbids import.

<p>Clients are encouraged to provide commands to manage aux-items of this
type for conferences and letterboxes.

<br><dt><code>mx-mime-belongs-to [10100] (text)</code>
<dd>
Data is a decimal text number that this text is an attachment to.  Most
likely, the current text is also a comment (or perhaps a footnote) to
the text mentioned in the aux-item.  A client can use this aux-item to
alter the display format of the text (stating that this is an
attachment, not a normal comment).

<br><dt><code>mx-mime-part-in [10101] (text)</code>
<dd>
Data is a decimal text number of a text that is an attachment to the
current one.  In other words: this is the converse of mx-mime-belongs-to. 
A client can use this aux-item to know which comments to mark as
attachments; the remaining comments are assumed to be normal.

<br><dt><code>mx-mime-misc [10102] (text)</code>
<dd>
Data is a string that contains all of the MIME headers for the current
text.  It is set by the importer.  The fields are concatenated with
"\n".

<p>Clients are encouraged to provide a command to display this.

<br><dt><code>mx-envelope-sender [10103] (text)</code>
<dd>
Data is the envelope sender of an imported text.  The mail server is
supposed to pass this information to the importer, for inclusion here.

<br><dt><code>mx-mime-file-name [10104] (text)</code>
<dd>
Data is the file name of an attachment.  Most likely, the importer gets
this information from a <code>name</code> parameter on a <code>Content-Type</code>
MIME header line.

<p>Clients are encouraged to use this file name as the default file name
when the user chooses to save the text.

</dl>

<p>See also <a href="#Some%20Client-specific%20Aux-Item%20Types">Some Client-specific Aux-Item Types</a>, for information about
some non-standardized aux-item types.

<p><hr>
Node:<a name="Name%20Expansion">Name Expansion</a>,
Next:<a rel=next accesskey=n href="#LysKOM%20Content%20Types">LysKOM Content Types</a>,
Previous:<a rel=previous accesskey=p href="#Aux-Item%20Types">Aux-Item Types</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Name Expansion</h2>

<p>Names in LysKOM can be expanded according to two rules, regexp matching
or KOM conventions.

<h3>Regexp Matching</h3>

<p>This type of expansion, used by the <code><a href="#re-z-lookup">re-z-lookup</a></code>
 call and
its predecessors simply matches <code>ed</code>(1) style
regular expressions to names in the database to find the list of
matching names.  The matching is case sensitive.

<h3>KOM Conventions</h3>

<p>This type of matching is a little more complicated.  Patterns consist of
words and parenthesized expressions, and contain implicit wildcards.  The
<code>lyskomd</code> program implements an approximation of theses
conventions.  Since <code>lyskomd</code> is the trendsetter, these semantics
are good enough.

<p>The rules are simple.  Any parenthesized expressions are removed from the
pattern and the names being checked for matches.  Then the words of the
pattern are examined from beginning to end, and if every pattern word
matches the prefix of the corresponding word in the name, the name
matches the pattern.

<p>For example "L D" matches "LysKOM (client, server and protocol)
Discussion (and) Ideas", but not "LysKOM Protocol Discussion".

<p>The matching is case insensitive.  Character case is converted
according to a collate table in the server.  The collate table can be
retrieved from the server with the <code><a href="#get-collate-table">get-collate-table</a></code>

<p>call.

<p>The current collate table simply maps ISO 8859-1 uppercase and lowercase
letters to equivalents, and also considered braces and suchlike
equivalent according to swascii rules.

<p><hr>
Node:<a name="LysKOM%20Content%20Types">LysKOM Content Types</a>,
Next:<a rel=next accesskey=n href="#The%20User%20Area">The User Area</a>,
Previous:<a rel=previous accesskey=p href="#Name%20Expansion">Name Expansion</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>LysKOM Content Types</h2>

<p>LysKOM defines a few special content types for texts.  They are all
described in this chapter.  In addition to these, clients must support
<code>text/plain</code>, should support <code>text/enriched</code> and are
encouraged to support <code>text/html</code>.

<p>Lines are separated by a single linefeed (ASCII 10) character.  The
linefeed character is used as a line separator, not as a line
terminator.  In other words, there should be no linefeed after the
last line.

<ul>
<li><a accesskey=1 href="#Reformattable%20Text%20(text%2fx-kom-basic)">Reformattable Text (text/x-kom-basic)</a>: 
<li><a accesskey=2 href="#The%20User%20Area%20(x-kom%2fuser-area)">The User Area (x-kom/user-area)</a>: 
</ul>

<p><hr>
Node:<a name="Reformattable%20Text%20(text%2fx-kom-basic)">Reformattable Text (text/x-kom-basic)</a>,
Next:<a rel=next accesskey=n href="#The%20User%20Area%20(x-kom%2fuser-area)">The User Area (x-kom/user-area)</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Content%20Types">LysKOM Content Types</a>
<br>

<h3>Reformattable Text</h3>

<p>This type of content corresponds to the mime type
<code>text/x-kom-basic</code>.  It is raw
text that can be reformatted by the client without ill effects, but
that can be legibly displayed on a text terminal without formatting.

<ul>
<li>Lines must be no longer than 70 characters. 
<li>Each line, except the last, is terminated by a single linefeed character. 
<li>Two linefeed characters in succession signal the end of the paragraph. 
<li>There must be no whitespace or linefeeds after the last character. 
<li>The end of the last line also signals the end of the paragraph. 
</ul>

<p>The following rules apply when reformatting:

<ul>
<li>The indentation of the first line of a paragraph is to be applied
to all lines in the paragraph. 
<li>If the first line of a paragraph matches "&gt;+ *" then the string
that matched that regexp is to be prefixed to all lines of the
paragraph. 
</ul>

<p>This content type was previously erroneously called <code>x-kom/basic</code>, but
as far as we know no client ever created texts that were labeled with
that name.  Please use the new name <code>text/x-kom-basic</code> instead.

<p>Historical note: version 0.46.1 and earlier of the elisp client
created texts labeled with <code>x-kom/text</code>.  Clients may treat that content
type as <code>text/x-kom-basic</code> for improved interoperability.

<p><hr>
Node:<a name="The%20User%20Area%20(x-kom%2fuser-area)">The User Area (x-kom/user-area)</a>,
Previous:<a rel=previous accesskey=p href="#Reformattable%20Text%20(text%2fx-kom-basic)">Reformattable Text (text/x-kom-basic)</a>,
Up:<a rel=up accesskey=u href="#LysKOM%20Content%20Types">LysKOM Content Types</a>
<br>

<h3>The User Area</h3>

<p>This content type indicates that the article contains a user area. 
See <a href="#The%20User%20Area">The User Area</a>.

<p><hr>
Node:<a name="The%20User%20Area">The User Area</a>,
Next:<a rel=next accesskey=n href="#Membership%20visibility">Membership visibility</a>,
Previous:<a rel=previous accesskey=p href="#LysKOM%20Content%20Types">LysKOM Content Types</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>The User Area</h2>

<p>The user area is a regular text that is used to store client-specific
information in the server.  Most clients use this to store settings a
user has made that are specific to a particular server.  There are also
provisions to store settings that are shared between clients.

<p>The user-area is divided into several sub-blocks.  The <code>common</code> block is
shared by all clients, and its formats and contents are dictated by this
protocol specification.  Clients may also create one or more other blocks.

<p>In normal texts, everything up to the first linefeed is considered to
be the subject line.  The user area is an exception: it does not
contain any subject line.

<p>Each block is encoded as a <code>HOLLERITH</code> string.  A table of
contents is also encoded as a <code>HOLLERITH</code> string and added first
in the user area.  There must be at last one space between each
string, and there might be spaces at the beginning and/or end of the
user-area.  Thus, a user-area made up of three blocks will contain
four <code>HOLLERITH</code>-encoded strings, each separated by at least one
space, and maybe with extra spaces at the beginning or end of the
text.

<p>The table of contents consists of one <code>HOLLERITH</code>-encoded string
for each block in the user-area.  Each string contains the name of the
corresponding block.  There is at least one space between each string,
and there may be spaces before the first string and after the last
string.  Clients must never create two or more blocks with the same
name.

<p>This format ensures that clients can copy or read past other clients'
blocks without knowing their structure.

<p><i>Example:</i>
<br><pre>        13H7Hblock-a 1Hb 4Hasdf 5H hjkl
</pre>

<p>In the above example, there are two blocks: <code>block-a</code> and
<code>b</code>.  <code>block-a</code> contains four bytes, <code>asdf</code>, while
<code>b</code> contains five bytes: <code>&nbsp;hjkl</code> (note the leading
space).  Below are a few other ways to encode the same user-area:

<br><pre>        14H 7Hblock-a 1Hb 4Hasdf 5H hjkl
        16H 7Hblock-a  1Hb   4Hasdf  5H hjkl
        13H1Hb 7Hblock-a 5H hjkl 4Hasdf
</pre>

<p>The first two examples embed extra (redundant) spaces, and the last
swaps the order of the two blocks.

<p>The following block names have been defined:
<dl>
<dt><code>common</code>
<dd>The common block shared by all clients.  The format of the common block is
described below. 
<br><dt><code>elisp</code>
<dd>The block created by the Emacs lisp client.  The format is completely
undocumented, but you'll need a lisp reader to parse it. 
<br><dt><code>WWW-kom</code>
<dd>The block created by the web gateway WWW-kom.  It has the same syntax as
the common block, but the keys and values are not documented. 
<br><dt><code>rkom</code>
<dd>Used by Anders Magnusson &lt;ragge@ludd.luth.se&gt;. 
</dl>

<p>If you're writing a client that uses the user-area, please let us know
what you name your client's block.

<h3>The Common Block</h3>

<p>This defines the structure of the common block.  The common block
contains a list of variable settings.  Each variable setting consists
of a name, some whitespace, and a value.  Settings are separated by a
linefeed character.  The values can be of several different types
(such as integers, strings, booleans, lists of stuff) but they are all
encoded as HOLLERITHs.  The reason for this is to simplify for clients
that need to ignore the value, and so it is possible to add new value
types without confusing old clients.

<p>The grammar below defines the syntax of the common block.

<br><pre>common-block    :   settings
settings        :   settings setting
                |   /* empty */
setting         :   variable ' ' value '\n'
variable        :   [A-Za-z-_0-9]+
value           :   HOLLERITH
</pre>

<p>The values contain structure within the HOLLERITH.  The following
grammar defines the data types that are currently used.  Clients must
be prepared to ignore values that have other data types.

<br><pre>boolean         :   1 | 0
integer         :   -?[0-9]+
string-list     :   string-list ' ' HOLLERITH
                |   HOLLERITH
</pre>

<p>Currently the following variables are used, but more may be added, and
clients must cope with variables they know nothing of in the common
block.  (Doing so is easy, as all values are encoded as HOLLERITHs.)

<dl>
<dt><code>created-texts-are-read</code>
<dd>True if the user wants texts s/he creates to be marked as read
automatically.  <code>boolean</code>.

<br><dt><code>dashed-lines</code>
<dd>True if the user wants dashed lines around the text body when it's
displayed.  <code>boolean</code>.

<br><dt><code>presence-messages</code>
<dd>True if the user wants messages about people logging in and logging out
of LysKOM.  <code>boolean</code>.

<br><dt><code>print-number-of-unread-on-entrance</code>
<dd>True if the user wants to see the number of unread texts when entering a
conference.  <code>boolean</code>.

<br><dt><code>read-depth-first</code>
<dd>True if the user wants to read text in depth-first order.  <code>boolean</code>.

<br><dt><code>reading-puts-comments-in-pointers-last</code>
<dd>True if the user wants the client to display comment links after the
text body.  <code>boolean</code>.

<br><dt><code>confirm-multiple-recipients</code>
<dd>True if the user wants the client to ask for confirmation before sending
a text to many conferences.  <code>boolean</code>.

<br><dt><code>default-mark</code>
<dd>The default mark to set on marked texts.  <code>integer</code>.

<br><dt><code>language</code>
<dd>Preferred languages, in priority order.  <code>string-list</code>.

<p>This contains a list of ISO 639 language codes.  ISO 639-2 should be
used for languages that have a 2-character language code.  For other
languages, ISO 639-1 should be used. 
<a href="http://lcweb.loc.gov/standards/iso639-2/langcodes.html">http://lcweb.loc.gov/standards/iso639-2/langcodes.html</a> contains
a list of the current language codes.

<p>The client should configure its user interface to use the first
language in the list that it supports.  Example: a client that
supports English and Swedish would use:
<ul>
<li>Swedish if the list is <code>2Hfr 2Hsv 2Hen</code>
<li>English if the list is <code>2Hen 2Hsv 2Hfr</code>
<li>either if the list is <code>2Hes 2Hfr</code>
</ul>

</dl>

<p><hr>
Node:<a name="Membership%20visibility">Membership visibility</a>,
Next:<a rel=next accesskey=n href="#Garb">Garb</a>,
Previous:<a rel=previous accesskey=p href="#The%20User%20Area">The User Area</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Membership visibility</h2>

<p>The details of the security model isn't properly documented.  Much
information can be extracted from various parts of the protocol
specification, but there is no complete overview.  In time, this
chapter may become such an overview.  For now, it only defines
when a membership is visible.

<p>The various requests that return information about a membership can be
grouped into three categories:

<ul>
<li>Category 1: given a conference, list (some of) the members.

<ul>
<li><code><a href="#get-members">get-members</a></code>
<li><code><a href="#get-members-old">get-members-old</a></code>
</ul>

<p>These requests fail if the conference is secret and you don't have
access to it, even if a membership should be visible to you according
to the rules below.

</p><li>Category 2: given a person, list (some of) the conferences that
the person is a member of.

<ul>
<li><code><a href="#get-membership">get-membership</a></code>
<li><code><a href="#get-membership-10">get-membership-10</a></code>
<li><code><a href="#get-membership-old">get-membership-old</a></code>
<li><code><a href="#get-unread-confs">get-unread-confs</a></code>
</ul>

<p>These requests fail if the person is secret and you don't have access
to it, even if a membership should be visible to you according
to the rules below.

</p><li>Category 3: given a person and a conference, return the membership.

<ul>
<li><code><a href="#query-read-texts">query-read-texts</a></code>
<li><code><a href="#query-read-texts-10">query-read-texts-10</a></code>
<li><code><a href="#query-read-texts-old">query-read-texts-old</a></code>
</ul>

<p>These requests follows the rules below exactly.

</ul>

<p>The rules for membership visibility are given below.  In the
explanation, the variables <var>C</var>, <var>P</var> and <var>V</var> are used like
this:

<ul>
<li>a conference <var>C</var>
<li>a person <var>P</var> who is a member of the conference <var>C</var>
<li>a viewer <var>V</var> who wants to find out about <var>P</var>:s
membership in <var>C</var>. 
</ul>

<p>The following flags also influences how much <var>V</var> can see:

<ul>
<li>the <code>unread-is-secret</code> flag of <var>P</var>
<li>the <code>secret</code> flag of <var>P</var>:s membership in <var>C</var>
</ul>

<p>The following rules determines if a membership is visible to <var>V</var>. 
The first rule that matches is used.

<ul>
<li>If <var>V</var> is supervisor of <var>P</var>, then the membership is visible. 
Both the <code>unread-is-secret</code> and <code>secret</code> flags are
ignored.

<li>If <var>V</var> is supervisor of <var>C</var>, then the membership is visible. 
The <code>secret</code> flag is ignored.  The <code>unread-is-secret</code>
flag is honored.

<li>If <var>V</var> is allowed to see both <var>P</var> and <var>C</var>, and if
<code>secret</code> is unset, then the membership is visible.  The
<code>unread-is-secret</code> flag is honored.

<li>Otherwise, <var>V</var> is not allowed to se the membership. 
</ul>

<p><hr>
Node:<a name="Garb">Garb</a>,
Next:<a rel=next accesskey=n href="#Measured%20Properties">Measured Properties</a>,
Previous:<a rel=previous accesskey=p href="#Membership%20visibility">Membership visibility</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Automatic text removal (the garb)</h2>

<p>Old texts are automatically removed by a process known as <dfn>the
garb</dfn>.  By default, the garb will remove all texts when it looks at
them.  There are several things that can save a text from removal:

<ul>
<li>if the server is configured to never remove any texts.

<li>if text is marked.  See <code><a href="#mark-text">mark-text</a></code>.

<li>if the text is presentation of a conference. 
See <code><a href="#set-presentation">set-presentation</a></code>.

<li>if the text is message of the day for a conference. 
See <code><a href="#set-etc-motd">set-etc-motd</a></code>.

<li>if the text is message of the day for the system. 
See <code><a href="#set-motd-of-lyskom">set-motd-of-lyskom</a></code>.

<li>if the text is message of the user area of a person. 
See <code><a href="#set-user-area">set-user-area</a></code>.

<li>if the text is less than 24 hours old.

<li>if the text has an aux-item with the <code>dont-garb</code> bit set. 
See See <a href="#Aux-Item-Flags">Aux-Item-Flags</a>.

<li>if the text is less than <code>nice</code> days old, for any of the
recipients.  <code>nice</code> is part of the <code>Conference</code> status. 
<code><a href="#set-garb-nice">set-garb-nice</a></code>.  All recipient types, <code>recpt</code>,
<code>cc-recpt</code> and <code>bcc-recpt</code>, counts.  If the text was added
to the conference after its creation, the check is made against the
addition time instead of the creation time. 
See <code><a href="#set-garb-nice">set-garb-nice</a></code>.

<li>if the text was added as a comment or footnote to a text within
the last 24 hours.  See <code><a href="#add-comment">add-comment</a></code> and
<code><a href="#add-footnote">add-footnote</a></code>.

<li>for each comment and footnote to the text, the time when it
became a comment or a footnote of the text is considered.  If it is
less than 24 hours, the text is saved.  If it is less than the
<code>keep-commented</code> field of any of the recipients of the text and
the comment/footnote, it is saved.  All recipient types, <code>recpt</code>,
<code>cc-recpt</code> and <code>bcc-recpt</code>, counts. 
See <code><a href="#set-keep-commented">set-keep-commented</a></code>.

</ul>

<p>Other texts will be removed.  It is an implementation detail of the
server exactly when texts will be removed.

<p><hr>
Node:<a name="Measured%20Properties">Measured Properties</a>,
Next:<a rel=next accesskey=n href="#Extracted%20grammar">Extracted grammar</a>,
Previous:<a rel=previous accesskey=p href="#Garb">Garb</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Measured Properties</h2>

<p>The server measures a number of properties, and can return information
about them to a client via the <code><a href="#get-stats">get-stats</a></code>

<p>request.  A server implementation may include experimental
properties, whose name should begin with <code>X-</code>.  All other
properties should be defined in this chapter.

<p>Some of the properties that are suggested here might prove to be too
hard to measure efficiently, or might prove to expose too much
information.  In that case, a server may select to not implement them. 
Clients must be prepared to receive a <code>feature-disabled</code> or
<code>undefined-measurement</code> error if they call <code>get-stats</code>
with a value that wasn't received from
<code><a href="#get-stats-description">get-stats-description</a></code>.

<p>For each measured value, both the levels and the ascent and descent
rates are returned.  See <a href="#Stats">Stats</a>, for more information.

<p>Ascent and descent rates are always normalized to a number of events
per 100 seconds.

<dl>
<dt><code>run-queue-length</code>
<dd>The number of clients that the server is currently refusing to serve
since its time for the server to process other clients for a while.

<br><dt><code>pending-dns</code>
<dd>The number of pending DNS requests.

<br><dt><code>pending-ident</code>
<dd>The number of pending IDENT requests.

<br><dt><code>clients</code>
<dd>The number of connected clients.

<br><dt><code>reqs</code>
<dd>The number of Protocol A requests that is being processed.  In the
current implementation, this will always be a number between 0 and 1,
but that might change in the future.

<br><dt><code>texts</code>
<dd>The number of existing texts.

<br><dt><code>confs</code>
<dd>The number of existing conferences (including letterboxes).

<br><dt><code>persons</code>
<dd>The number of existing persons.

<br><dt><code>send-queue-bytes</code>
<dt><code>recv-queue-bytes</code>
<dd>The number of bytes waiting in the send and receive queues.

</dl>

<p><hr>
Node:<a name="Extracted%20grammar">Extracted grammar</a>,
Next:<a rel=next accesskey=n href="#Writing%20Clients">Writing Clients</a>,
Previous:<a rel=previous accesskey=p href="#Measured%20Properties">Measured Properties</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Extracted grammars (informative)</h2>

<p>The file <code>Protocol-A.texi</code> is the authoritative standard for
protocol A.  However, it has a two problems:

<ul>
<li>The Texinfo markup makes it hard for a program to extract
information-and once a program is written, we might change the
Texinfo markup, so that the program has to be updated.

<li>We often rename requests and data types, in order to have good
names for the most recommended functions and types.  However, a
program that uses a data type might fail if that type suddenly is
altered.

</ul>

<p>To overcome these problems, and better server client writers that want
to generate the protocol-level code automatically from the
specification, a few variants of the grammar is available as separate
files.  In some of these files, the names have been changed to
<dfn>stable</dfn> names that will not change as the protocol evolves. 
Currently, these three grammars exists:

<dl>
<dt><code>protocol-a-full.txt</code>
<dd>The full Protocol A specification, with stable names.

<br><dt><code>protocol-a-recommended.txt</code>
<dd>The recommended requests and asynchronous messages, and all types they
need, with stable names.

<br><dt><code>protocol-a-current.txt</code>
<dd>The recommended requests and asynchronous messages, with the names
used in this specification.

</dl>

<p>The files are generated by <code>doc/checkargs.py</code> in the
lyskom-server distribution.  Adding more output formats is fairly
easy.  Let us know, preferably via Bugzilla, if a new output format
would be useful for you.  It is the intention that the format of the
above-mentioned files will not change.  The file format should be
self-explanatory once you have read the protocol specification.  It
does contain some comments that should be useful.

<p>The stable names are generated by this process:

<ul>
<li>Don't modify builtin types such as <code>INT32</code>.

<li>Remove the suffixes <code>-old</code>, <code>-older</code> and <code>-Old</code>,
unless that would introduce an ambiguity.

<li>Unless the name already has a version suffix, add one.

</ul>

<p>All files mentioned above are reachable via
<a href="http://www.lysator.liu.se/lyskom/protocol/">http://www.lysator.liu.se/lyskom/protocol/</a>.

<p><hr>
Node:<a name="Writing%20Clients">Writing Clients</a>,
Next:<a rel=next accesskey=n href="#Importing%20and%20Exporting%20E-Mail">Importing and Exporting E-Mail</a>,
Previous:<a rel=previous accesskey=p href="#Extracted%20grammar">Extracted grammar</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Writing Clients (informative)</h2>

<p>This appendix is not really part of the protocol specification, but
it contains some information that may be useful for client writers.

<ul>
<li><a accesskey=1 href="#Common%20Commands">Common Commands</a>:              Common commands and how they're implemented. 
<li><a accesskey=2 href="#Client%20Conventions">Client Conventions</a>:           Conventions clients should follow. 
</ul>

<p><hr>
Node:<a name="Common%20Commands">Common Commands</a>,
Next:<a rel=next accesskey=n href="#Client%20Conventions">Client Conventions</a>,
Up:<a rel=up accesskey=u href="#Writing%20Clients">Writing Clients</a>
<br>

<h3>Common Commands</h3>

<p>Most clients will implement certain commands.  This main purpose of this
section is to get client writers started on some of these commands, and
to answer some questions that seem to come up over and over again.

<ul>
<li><a accesskey=1 href="#What%20do%20I%20have%20unread">What do I have unread</a>:        How to figure out which articles to present. 
</ul>

<p><hr>
Node:<a name="What%20do%20I%20have%20unread">What do I have unread</a>,
Up:<a rel=up accesskey=u href="#Common%20Commands">Common Commands</a>
<br>

<h4>What do I have unread</h4>

<p>Each person has a membership list containing the conferences the person
is a member of.  Each element is an object of type <code>Membership</code>.  Among
other things it contains the number of the conference, the priority of
the membership, when the person most recently marked a text as read in
the conference, and which texts the person has read.

<p>The list of read texts consists of two parts: a local text number called
<code>last-text-read</code> and a list of local text numbers called
<code>read-texts</code>.  The person has marked all texts up to and including
<code>last-text-read</code> as read, and also the texts listed in
<code>read-texts</code>.  All other texts in the conference are unread.  Clients
can use either the <code>query-read-texts</code> or
<code>get-membership</code> calls to get membership data.

<p>The standard procedure for finding out which texts are unread is the
following:

<ol type=1 start=1>
</p><li>Call <code>get-unread-confs</code> for the person. 
This returns a list of conferences in which the person may have unread
texts.  This call may return conferences that do not contain any unread
texts, but it will never forget to return a conference that does contain
an unread text.

<li>Call <code>query-read-texts</code> for each conference returned in
the previous step.  This will return the membership data for all the
conferences that may contain unread texts.

<li>Call <code>get-uconf-stat</code> for each conference returned in
the first step.  The conference status will be needed shortly.  Repeat the
following steps for each conference.

<li>Compare the highest existing local number in the conference (from
the conference status) with the <code>last-text-read</code> field for the
corresponding membership.  If the highest existing local text is higher
than <code>last-text-read</code>, the conference may contain unread texts.

<li>Get part of the local to global map from the conference starting
at <code>last-text-read</code> and ending at the highest existing local
number.  Every local number in the map that is not read according to the
membership data and that has a mapping to a global number is an unread
text.  You might say that you remove the read texts from the map to get
the unread texts.

</ol>

<p>Take care not to call get-map or get-membership too much since they tend
to be expensive operations.  Use <code>get-unread-confs</code> and
<code>query-read-texts</code> to minimize the work.  Another point to remember
is that the server will send asynchronous messages with information
about new texts.  Clients need to listen to these messages.

<p><hr>
Node:<a name="Client%20Conventions">Client Conventions</a>,
Previous:<a rel=previous accesskey=p href="#Common%20Commands">Common Commands</a>,
Up:<a rel=up accesskey=u href="#Writing%20Clients">Writing Clients</a>
<br>

<h3>Client Conventions</h3>

<p>There are certain conventions that most clients follow, and that users
expect.  These are not part of the protocol and are subject to change.  In
particular those conventions that address deficiencies in the protocol
will go away when the protocol is updated to correct these deficiencies.

<ul>
<li><a accesskey=1 href="#Text%20formatting">Text formatting</a>:              The format of texts in the database. 
<li><a accesskey=2 href="#Content%20type%20specification">Content type specification</a>:   Clients can tag the content type of a text. 
<li><a accesskey=3 href="#Client-side%20name%20expansion">Client-side name expansion</a>:   By number, by word, by regexp. 
<li><a accesskey=4 href="#Recipients%20of%20comments">Recipients of comments</a>:       Where comments should be sent. 
<li><a accesskey=5 href="#Order%20of%20misc-info%20groups">Order of misc-info groups</a>:    Footnotes, comments, recipients. 
</ul>

<p><hr>
Node:<a name="Text%20formatting">Text formatting</a>,
Next:<a rel=next accesskey=n href="#Content%20type%20specification">Content type specification</a>,
Up:<a rel=up accesskey=u href="#Client%20Conventions">Client Conventions</a>
<br>

<h4>Text formatting</h4>

<p>Traditionally the only clients for LysKOM were text-based and only
displayed texts exactly as they were stored in the server.  Although
there are a number of clients now that can wrap lines automatically,
texts should still be stored in preformatted style, suitable for display
in a monospaced font.

<p>If the client accepts texts from the user and then reformats them, such
as a client with an editor with a variable-width font, it should ensure
that it follows the following simple rules:

<ul>
<li>Lines should be no longer than 72 characters. 
<li>Lines are terminated with a single linefeed character. 
<li>Paragraphs are separated by two linefeeds in succession. 
<li>There are no empty lines at the end of the text. 
</ul>

<p>Clients that include editors but do not alter the text before sending it
to the server should attempt to ensure that texts confirm to the above
conventions.

<p>The same conventions apply to messages sent with the
<code><a href="#send-message">send-message</a></code>
 call.

<p><hr>
Node:<a name="Content%20type%20specification">Content type specification</a>,
Next:<a rel=next accesskey=n href="#Client-side%20name%20expansion">Client-side name expansion</a>,
Previous:<a rel=previous accesskey=p href="#Text%20formatting">Text formatting</a>,
Up:<a rel=up accesskey=u href="#Client%20Conventions">Client Conventions</a>
<br>

<h4>Content type specification</h4>

<p>This convention is understood by all popular clients.  If the first line
is one of a few predefined strings, then this string specifies the type
of text.  Currently only the strings "html:" and "enriched:" are
supported, specifying <code>text/html</code> and <code>text/enriched</code> respectively.

<p>Starting with protocol version 10, this ugly workaround is obsolete.  Use
aux-items to specify content type instead.

<p><hr>
Node:<a name="Client-side%20name%20expansion">Client-side name expansion</a>,
Next:<a rel=next accesskey=n href="#Recipients%20of%20comments">Recipients of comments</a>,
Previous:<a rel=previous accesskey=p href="#Content%20type%20specification">Content type specification</a>,
Up:<a rel=up accesskey=u href="#Client%20Conventions">Client Conventions</a>
<br>

<h4>Client-side name expansion</h4>

<p>When a client needs to prompt the user for a conference (or person),
it could offer the user several ways of specifying the conference:

<ul>
<li>By conference number
<li>By name, using the <code><a href="#lookup-z-name">lookup-z-name</a></code>
 call. 
<li>By name, using the <code><a href="#re-z-lookup">re-z-lookup</a></code>
 call. 
<li>By name, transforming the string to a case insensitive regular
expression, and then using the <code>re-z-lookup</code> call. 
</ul>

<p>It is beyond the scope of this document to specify how the client
interacts with the user.

<p>The client should offer the user all the methods of specifying a
conference listed above.  At the very least, the two first methods
should be supported.

<p><hr>
Node:<a name="Recipients%20of%20comments">Recipients of comments</a>,
Next:<a rel=next accesskey=n href="#Order%20of%20misc-info%20groups">Order of misc-info groups</a>,
Previous:<a rel=previous accesskey=p href="#Client-side%20name%20expansion">Client-side name expansion</a>,
Up:<a rel=up accesskey=u href="#Client%20Conventions">Client Conventions</a>
<br>

<h4>Recipients of comments</h4>

<p>When a user writes a comment, the user should have full control over
which conferences and/or letterboxes the comment is sent to.  By
default, the recipient list should be all <code>recpt</code> recipients. 
<code>cc-recpt</code> and <code>bcc-recpt</code> recipients should not be
included.

<p>Conferences in the recipient list that have the <code>original</code>
bit set, and a non-zero <code>super-conf</code>, should be replaced by the
<code>super-conf</code>.

<p>If the author of the commented text isn't a member of any of the new
recipients, the client should check if the author has a
<code>send-comments-to</code> aux item.  If it is <code>0</code>, nothing should be
done.  Otherwise, <code>send-comments-to</code> should be a valid conference
number, and that conference should be added as a <code>recpt</code>
recipient.  If there is no <code>send-comments-to</code> aux-item, the user
should be prompted to add the author of the commented text as a
<code>recpt</code> or <code>cc-recpt</code> recipient.

<p>If the author of the new comment is not a member of any of the
recipients, the client should check if the author has a
<code>send-comments-to</code> aux item.  If it is <code>0</code> nothing should be
done.  Otherwise, <code>send-comments-to</code> should be a valid conference
number, and the user should be prompted to add that conference as a
<code>recpt</code> or <code>cc-recpt</code> recipient.  If there is no
<code>send-comments-to</code>, or <code>send-comments-to</code> is invalid, the user
should be prompted to add his letterbox as a <code>recpt</code> or
<code>cc-recpt</code> recipient.

<p>If a recipient is present more than once, all duplicates should be
removed.

<p><hr>
Node:<a name="Order%20of%20misc-info%20groups">Order of misc-info groups</a>,
Previous:<a rel=previous accesskey=p href="#Recipients%20of%20comments">Recipients of comments</a>,
Up:<a rel=up accesskey=u href="#Client%20Conventions">Client Conventions</a>
<br>

<h4>Order of misc-info groups</h4>

<p>The ordering of the groups of <code>Misc-Info</code> items are not defined
by this protocol.  However, when creating a new text, clients are
recommended to use this order:

<ul>
<li>any <code>footn-to</code> items
<li>any <code>comm-to</code> items
<li>any <code>recpt</code> items
<li>any <code>cc-recpt</code> items
<li>any <code>bcc-recpt</code> items
</ul>

<p>This is the order that the elisp-client normally uses, and users have
come to expect that order.

<p><hr>
Node:<a name="Importing%20and%20Exporting%20E-Mail">Importing and Exporting E-Mail</a>,
Next:<a rel=next accesskey=n href="#Some%20Client-specific%20Aux-Item%20Types">Some Client-specific Aux-Item Types</a>,
Previous:<a rel=previous accesskey=p href="#Writing%20Clients">Writing Clients</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Importing and Exporting E-Mail (informative)</h2>

<p>E-mail import has been implemented using various programs since the
first LysKOM server became operational.  Protocol version 10 introduces a
lot of aux-items, a large part of which are intended for use by mail
importers to enhance the functionality.  As of this moment, there is one
mail importer (<code>komimportmail</code>) that is designed to take full
advantage of all the new aux-items.

<p>E-mail export has never been used seriously.  The first person to design
and implement an exporter gets to rewrite this appendix based on his or
her experiences.

<h3>Importing e-mail</h3>

<p>The main job of the mail importer is to figure out where to deliver
mail, how to handle MIME coding and/or structure and how to deal with
threading.  During this, it creates one or more texts and a lot of
aux-items.

<h4>Recipients</h4>

<p>Although a mail message contains <code>To</code> and <code>CC</code> headers, they
are not really useful when importing as it is the envelope recipients,
not the header recipients, that should be used.  To understand this,
consider a mail where the <code>To</code> header contains a personal mail
address.  The mail is received using a tool like <code>procmail</code> and
forwarded to the LysKOM importer.  The envelope address will be correct,
but the <code>To</code> header will still contain the personal address.

<p>The <code>komimportmail</code> importer uses addresses like
"<var>number</var>@<var>server</var>", where <var>number</var> is the number of the
recipient and <var>server</var> is the mail domain reserved for the LysKOM
importer.  For backwards compatibility with earlier importers, it is
allowed to prepend a "p" before the number.  Instead of the number,
<code>komimportmail</code> can accept a name, as long as the name can be
resolved to exactly one conference or letterbox.  Before looking up the
name, any underscore or period is translated into a space.

<p>Care should be taken when a mail is received more than once.  This can
happen if a mail is addressed to more than one address.  For example,
assume that a mail is sent to <code>john.q.public@example.com</code> and
<code>sven.svensson@exempel.se</code>.  Two different mail servers handle the
two recipients, but both eventually decide to forward the mail to the
LysKOM importer (but for different conferences).  The LysKOM importer
will receive the mail twice, with different envelope recipients.

<p>A solution is to keep a database containing a mapping from
<code>Message-ID</code> to LysKOM text number for imported messages.  If a
message is seen more than once, the message is not imported.  Instead,
recipients are added to the existing text.

<p>On the other hand, that will introduce a security hole, where a person
who knows the <code>Message-ID</code> of an interesting imported mail can add
himself or some open conference as a recipient.  Perhaps the importer
should check for matching contents before adding recipients.

<p>The importer needs to be careful not to deliver messages to conferences
that do not allow messages, even though the server might not complain.

<p>For mail delivery to work for any conference, the importer has to use a
privileged person, or it will be unable to deliver mail to secret
conferences.  A potential problem is that this leaks secret information
from the server.  For the time being, the <code>komimportmail</code> importer
avoids this problem by using an unprivileged person and requiring the
members of secret conferences to invite the importer if they want e-mail
import to work.

<h4>Threading</h4>

<p>The importer should do its best to thread messages.  When the importer
sees a new message it needs to look at the <code>In-Reply-To</code> header to
see what the message is a reply to.  If the <code>In-Reply-To</code> header
does not exist, or if it exists but does not contain a valid Message-ID,
the last valid Message-ID of a <code>References</code> header may be used
instead.

<p>If the Message-ID of a previously imported e-mail is found, the new text
should be made a comment of the replied-to text.

<p>If the Message-ID is of the form defined below (see <a href="#Message-ID">Message-ID</a>),
and it refers to a text exported from this server, the new text should
be made a comment of the replied-to text.

<p>This means that the importer will probably have to maintain its own
database of imported texts that maps the message ID to the text number
in the LysKOM database.  There is no other way to find the text number
for a particular imported text.  Fortunately, this is exactly the same
database we need to solve the multiple reception problem described
above.

<p>It has been noted that messages on some mailing lists arrive in peculiar
order, with replies before the original messages.  Perhaps this is due to
moderation.  A smart importer should be prepared to handle this, by
adding a comment link when the original message eventually arrives.

<p>One possible solution is to add a new kind of entry to the Message-ID
database, mapping a Message-ID to a list of text numbers that should
become comments to the message when it is imported.

<h4>MIME issues</h4>

<p>An importer should try to handle e-mail messages containing MIME
appendices as smart as possible.  As the current LysKOM model lacks
hierarchical structuring inside articles, appendices should probably be
imported as comments or footnotes to the main message.

<p>One would think that it is easy to convert the hierarchical MIME
structure to a corresponding LysKOM comment tree.  However, this would
require creating empty interior nodes to attach some comments to.

<p>Therefore, the <code>komimportmail</code> importer currently uses a rather
naive algorithm: All leaf parts are found.  The first one gets to be the
main text, and the rest are included as comments to it.

<p>Appendices encoded with Base64 or Quoted-Printable should be decoded.

<p>When creating aux-items like <code>mx-author</code>, text coded using the
method in RFC 2047 should be decoded.

<h3>Exporting e-mail</h3>

<p>As of this writing, an experimental e-mail exporter exists, but it is
a fairly recent creation.  The author of this document knows very
little about how it works, so this section contains very little
information.

<p><a name="Message-ID"></a>

<h4>Message-ID</h4>

<p>A standard for Message-ID creation has been established.  The general
format is:
<br><pre>    <var>text-no</var>.<var>port</var>.<var>exporter</var>.<var>randomness</var>@<var>server</var>
</pre>

<p>The different parts are explained below:

<dl>
<dt><var>text-no</var>
<dd>The text number of the text that was exported.

<br><dt><var>port</var>
<dt><var>server</var>
<dd>The <code>canonical-name</code> aux item defines a unique name for the LysKOM
system that the text was exported from.  The <var>server</var> and
<var>port</var> fields are set from it.  If no port is specified in the
<code>canonical-name</code>, the <var>port</var> part is set to the empty string.

<br><dt><var>exporter</var>
<dd>The name of the software that exported the text.

<br><dt><var>randomness</var>
<dd>A string that ensures that the Message-ID is unique even if the same
text is exported several times.  This could contain a random string, a
sequence number, or something else that makes the Message-ID unique.

</dl>

<p><hr>
Node:<a name="Some%20Client-specific%20Aux-Item%20Types">Some Client-specific Aux-Item Types</a>,
Next:<a rel=next accesskey=n href="#Future%20changes">Future changes</a>,
Previous:<a rel=previous accesskey=p href="#Importing%20and%20Exporting%20E-Mail">Importing and Exporting E-Mail</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Some Client-specific Aux-Item Types (informative)</h2>

<p>This appendix contains some contributed information from client
writers about some of the aux-item types that they use.  This
information may be updated at any time by the client writers.  How
much the client writer cares about backward compatibility when they
make changes to these aux-item types may be beyond the control of the
authors of the Protocol A specification.

<p>If any of the aux-item types defined here becomes widely used by
different clients, they should probably be standardized and moved to
the <a href="#Aux-Item%20Types">Aux-Item Types</a> chapter.

<dl>

<br><dt><code>elisp-client-read-faq [10000] (letterbox)</code>
<dd>
This item indicates FAQs that the user has read. Data is a decimal
number indicating the conference for which a FAQ has been read,
followed by a space character and a second decimal number indicating
the text number of the FAQ. In the future, additional data may be
defined; clients should be prepared to accept and ignore a space and
any trailing data that may follow the second number.

<p>Note that aux-items of this type should always be secret since they
may contain information about texts of conferences that are not
publicly visible.

<p>A few examples might clarify what the data may look like:
<dl>
<dt><code>459 11215</code>
<dd>FAQ in text 11215 for conference 459 has been read. 
<br><dt><code>459 11215 garbage</code>
<dd>FAQ in text 11215 has been read. Clients must ignore the trailing
garbage. Note that clients are not allowed to create aux-items of this
format, but they should be prepared to handle them correctly. 
</dl>

<p>This aux-item is specific to the elisp client. Other clients are not
required to use or understand this item type.

<br><dt><code>elisp-client-rejected-recommendation [10001] (letterbox)</code>
<dd>
This item indicates a rejected membership recommendation. Data is a
decimal number indicating the conference for which the recommendation
was rejected. In the future, additional data may be defined; clients
should be prepared to accept and ignore a space and any trailing data
that may follow the second number.

<p>Note that aux-items of this type should always be secret since future
extensions may contain sensitive data.

<p>A few examples might clarify what the data may look like:
<dl>
<dt><code>459</code>
<dd>A recommendation for conference 459 has been rejected. 
<br><dt><code>459 garbage</code>
<dd>A recommendation for conference 459 has been rejected. Clients must
ignore the trailing garbage. Note that clients are not allowed to
create aux-items of this format, but they should be prepared to handle
them correctly. 
</dl>

<p>This aux-item is specific to the elisp client. Other clients are not
required to use or understand this item type. 
</dl>

<p><hr>
Node:<a name="Future%20changes">Future changes</a>,
Next:<a rel=next accesskey=n href="#Protocol%20Version%20History">Protocol Version History</a>,
Previous:<a rel=previous accesskey=p href="#Some%20Client-specific%20Aux-Item%20Types">Some Client-specific Aux-Item Types</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Future changes (speculative)</h2>

<p>While useful and stable, this protocol is far from perfect.  Here is a
short list of things the current developers would like to change in
future versions of the protocol.  The list is not sorted.

<p>All changes will be made in a backwards compatible way.  Clients
will still be able to use the old requests.

<ul>
<li>Cryptography!  LysKOM is sometimes used for sensitive information.  It
is unacceptable that everything is sent in the clear.  Should we use
TLS?  This area needs further study.  (This is
<a href="http://bugzilla.lysator.liu.se/show_bug.cgi?id=133">bug 133</a>.)

<li>The information contained in the <code>Misc-Info</code> array should be
integrated into the <code>Text-Stat</code>.  There should be one array of
recipients, one of texts that comments this text, and so on.  This
would make the <code>Misc-Info</code> type obsolete.  (This is
<a href="http://bugzilla.lysator.liu.se/show_bug.cgi?id=134">bug 134</a>.)

<li>The aux-items can be very large.  It was a mistake to include them in
the <code>Text-Stat</code>.  They should probably be separated from the
<code>Text-Stat</code>; retrieving the <code>Text-Stat</code> should only indicate
which aux-items that exists.  (This is
<a href="http://bugzilla.lysator.liu.se/show_bug.cgi?id=135">bug 135</a>.)

<li>The super conference is used for two purposes: to indicate where
followups of original conferences should be sent, and to indicate
where articles created by persons that are not permitted submitters
should be sent.  Occasionally one wants to send followups to one
conference and unauthorized original articles to another conference.

<p>One way to fix this is to remove the <code>original</code> bit and
introduce a <code>followups-to</code> field in the <code>Conference</code>. 
Doing this in a backwards-compatible way requires some thought<small>...</small>
(This is
<a href="http://bugzilla.lysator.liu.se/show_bug.cgi?id=136">bug 136</a>.)

</p><li>The security system is too complex, yet unable to do many useful
things, and should be rethought.  (This is
<a href="http://bugzilla.lysator.liu.se/show_bug.cgi?id=137">bug 137</a>.)

<li>If the client issues several request without waiting for a reply, the
replies will nevertheless always arrive in the same order as the
requests were sent in.  If a threaded version of the LysKOM server is
ever made, it could possibly process two requests from the same client at
the same time, and the answers could be returned in any order. 
However, the current clients are probably not written so that they can
handle such reordering.

<p>In the future, a new call might be added, so that a client can give
the server explicit permission to reorder the replies.  The client
would then have to rely on the <code>ref-no</code> to match each reply to
the corresponding call.  (This is
<a href="http://bugzilla.lysator.liu.se/show_bug.cgi?id=138">bug 138</a>.)

</ul>

<p>For more information about potential future changes, see
<a href="http://bugzilla.lysator.liu.se/">Bugzilla @ Lysator</a>. 
The above list is in no way complete.

<p><hr>
Node:<a name="Protocol%20Version%20History">Protocol Version History</a>,
Next:<a rel=next accesskey=n href="#Document%20Edition%20History">Document Edition History</a>,
Previous:<a rel=previous accesskey=p href="#Future%20changes">Future changes</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Protocol Version History (informative)</h2>

<h3>Protocol version 11 (first implemented in lyskomd 2.1.0)</h3>

<dl>

<br><dt>New Server Calls
<dd>
These new calls have status Recommended.

<ul>
<li>107=query-read-texts
<li>108=get-membership
<li>109=mark-as-unread
<li>110=set-read-ranges
<li>111=get-stats-description
<li>112=get-stats
<li>113=get-boottime-info
<li>114=first-unused-conf-no
<li>115=first-unused-text-no
<li>116=find-next-conf-no
<li>117=find-previous-conf-no
<li>120=set-connection-time-format
<li>121=local-to-global-reverse
<li>122=map-created-texts-reverse
</ul>

<p>These new calls have status Experimental.

<ul>
<li>118=get-scheduling
<li>119=set-scheduling
</ul>

<br><dt>Status change
<dd>
The following calls have change status from Experimental to Recommended.

<ul>
<li>105=set-keep-commented
</ul>

<p>The following calls have changed status from Recommended or
Experimental to Obsolete.

<ul>
<li>98=query-read-texts-10
<li>99=get-membership-10
</ul>

<br><dt>New and Modified Types
<dd>
<ul>
<li>Read-Range
<li>Membership
<li>Membership-Type
<li>Stats
<li>Stats-Description
<li>Static-Server-Info
<li>FLOAT
</ul>

<br><dt>New Asynchronous Messages
<dd>
<ul>
<li>19=async-new-user-area
<li>20=async-new-presentation
<li>21=async-new-motd
<li>22=async-text-aux-changed
</ul>

<br><dt>New aux-items
<dd>
See <a href="#Document%20Edition%20History">Document Edition History</a>, as new aux-items are added between
protocol versions.

<br><dt>New error codes
<dd>
See <a href="#Document%20Edition%20History">Document Edition History</a>.

<br><dt>Notes
<dd>
<ul>
<li>The <code>reserved1</code> bit of
<code>Membership-Type</code> has been renamed to
<code>passive-message-invert</code>.  See <a href="#Membership%20Information">Membership Information</a>. This
affects <code><a href="#async-send-message">async-send-message</a></code> and <code><a href="#send-message">send-message</a></code>.

<li>The following requests can no longer be used until you have
logged in: <code><a href="#get-last-text">get-last-text</a></code>, <code><a href="#find-next-text-no">find-next-text-no</a></code> and
<code><a href="#find-previous-text-no">find-previous-text-no</a></code>.

<li>You can now modify the type of a recipient with the
<code><a href="#add-recipient">add-recipient</a></code> call if you are the supervisor of either the
author, recipient or sender.  The check used to be more restrictive.

<li>The following asynchronous messages are also sent to recipients
of texts linked to the relevant text via comment or footnote links:
<code><a href="#async-new-text-old">async-new-text-old</a></code>, <code><a href="#async-deleted-text">async-deleted-text</a></code>,
<code><a href="#async-new-text">async-new-text</a></code>, <code><a href="#async-new-recipient">async-new-recipient</a></code> and
<code><a href="#async-sub-recipient">async-sub-recipient</a></code>.

<li>All requests that take a <code>BOOL</code> argument now return the
error <code>bad-bool</code> if the argument is anything but <code>0</code> or
<code>1</code>.

</ul>

</dl>

<h3>Protocol version 10 (first implemented in lyskomd 2.0.0)</h3>

<dl>

<br><dt>Error codes
<dd>
The error codes are now documented.  Several error codes were changed to
more sane values while documenting the new behavior.

<br><dt>New Server Calls
<dd>
These new calls have status Recommended.

<ul>
<li>85=get-collate-table
<li>86=create-text
<li>87=create-anonymous-text
<li>88=create-conf
<li>89=create-person
<li>90=get-text-stat
<li>91=get-conf-stat
<li>92=modify-text-info
<li>93=modify-conf-info
<li>94=get-info
<li>95=modify-system-info
<li>96=query-predefined-aux-items
<li>98=query-read-texts
<li>99=get-membership
<li>100=add-member
<li>101=get-members
<li>102=set-membership-type
<li>103=local-to-global
<li>104=map-created-texts
<li>106=set-pers-flags
</ul>

<p>These new calls have status Experimental.

<ul>
<li>97=set-expire
<li>105=set-keep-commented
</ul>

<br><dt>Name changes
<dd>
<p><table><tr align="left"><td valign="top">Old name                 </td><td valign="top">New name
<br></td></tr><tr align="left"><td valign="top">5=create-person          </td><td valign="top">5=create-person-old
<br></td></tr><tr align="left"><td valign="top">9=query-read-texts       </td><td valign="top">9=query-read-texts-old
<br></td></tr><tr align="left"><td valign="top">10=create-conf           </td><td valign="top">10=create-conf-old
<br></td></tr><tr align="left"><td valign="top">13=get-conf-stat-old     </td><td valign="top">13=get-conf-stat-older
<br></td></tr><tr align="left"><td valign="top">14=add-member            </td><td valign="top">14=add-member-old
<br></td></tr><tr align="left"><td valign="top">26=get-text-stat         </td><td valign="top">26=get-text-stat-old
<br></td></tr><tr align="left"><td valign="top">28=create-text           </td><td valign="top">28=create-text-old
<br></td></tr><tr align="left"><td valign="top">36=get-info              </td><td valign="top">36=get-info-old
<br></td></tr><tr align="left"><td valign="top">46=get-membership        </td><td valign="top">46=get-membership-old
<br></td></tr><tr align="left"><td valign="top">48=get-members           </td><td valign="top">48=get-members-old
<br></td></tr><tr align="left"><td valign="top">50=get-conf-stat         </td><td valign="top">50=get-conf-stat-old
<br></td></tr><tr align="left"><td valign="top">59=create-anonymous-text </td><td valign="top">59=create-anonymous-text-old
<br></td></tr></table>

<br><dt>Status change
<dd>
The following calls have change status from Experimental to Recommended.

<ul>
<li>58=get-last-text
<li>77=set-last-read
<li>78=get-uconf-stat
</ul>

<p>The following calls have changed status from Recommended or
Experimental to Obsolete.

<ul>
<li>5=create-person-old
<li>9=query-read-texts-old
<li>10=create-conf-old
<li>14=add-member-old
<li>26=get-text-stat-old
<li>28=create-text-old
<li>36=get-info-old
<li>46=get-membership-old
<li>47=get-created-texts
<li>48=get-members-old
<li>50=get-conf-stat-old
<li>59=create-anonymous-text-old
</ul>

<br><dt>New and Modified Structures
<dd>
<ul>
<li>Aux-Item
<li>Aux-Item-Input
<li>Conference
<li>Info
<li>Member
<li>Membership
<li>Membership-Type
<li>Misc-Info
<li>Text-Stat
</ul>

<br><dt>Renamed Asynchronous Messages
<dd>A <code>async-</code> prefix has been added to the name of all asynchronous
messages.  In addition, 0=new-text has been renamed to
0=async-new-text-old, and it is now considered obsolete.  Clients should
use 80=accept-async to listen to 15=async-new-text instead.

<br><dt>New Asynchronous Messages
<dd>
<ul>
<li>14=async-deleted-text
<li>15=async-new-text
<li>16=async-new-recipient
<li>17=async-sub-recipient
<li>18=async-new-membership
</ul>

<br><dt>Notes
<dd>
<ul>
<li>Since protocol version 9 setting a priority of zero for a
conference was supposed to indicate passive membership in a conference. 
It was largely up to the client to implement this.  True passive
memberships have been introduced in this protocol version through the
Membership-type extension to the Membership type.  In order to maintain
compatibility with clients that interpret priority 0 as passive
membership, the old calls <code><a href="#add-member-old">add-member-old</a></code> and
<code><a href="#get-membership-old">get-membership-old</a></code> perform magic, translating between priorities
and membership types.  The magic is documented with each call. 
</ul>
</dl>

<h3>Protocol version 9 (first implemented in lyskomd 1.9.0)</h3>

<dl>
<dt>New functionality
<dd>
<ul>
<li>The server shall now reply with error <code>not-implemented</code> when
a client attempts to use an unimplemented call.  This feature requires
that the client uses linefeed as call terminator. 
</ul>
<br><dt>Added Commands
<dd>
<ul>
<li>79=set-info: Can change server information. 
<li>80=accept-async: Can select asynchronous messages to receive. 
<li>81=query-async: Can query which messages are being send. 
<li>82=user-active
<li>83=who-is-on-dynamic
<li>84=get-static-session-info
</ul>
<br><dt>Changed names
<dd>
<ul>
<li><code>change-conference</code> was previously called <code>pepsi</code>.  The
name was changed, but not the functionality. 
</ul>
<br><dt>Status change
<dd>
<ul>
<li>63=<code>who-is-on-ident</code> is now considered obsolete. 
<li>64=<code>get-session-info-ident</code> is now considered obsolete. 
</ul>
</dl>

<h3>Protocol version 8 (first implemented in lyskomd 1.8.0)</h3>

<dl>
<dt>Added Functionality
<dd>
<ul>
<li>30=add-recipient: Can change <code>recpt</code> to <code>cc-recpt</code> and vice versa. 
<li>21=set-conf-type: Accepts <code>Conf-Type</code> and <code>Extended-Conf-Type</code>. 
<li>10=create-conf: Accepts <code>Conf-Type</code> and <code>Extended-Conf-Type</code>. 
</ul>

<br><dt>New Commands
<dd>
<ul>
<li>77=set-last-read
<li>78=get-uconf-stat
</ul>
</dl>

<h3>Protocol version 7 (first implemented in lyskomd 1.7.0)</h3>

<dl>
<dt>Added Functionality
<dd>
<ul>
<li>53=send-message: Recipient can be a conference or a person. 
</ul>

<br><dt>New Commands
<dd>
<ul>
<li>74=re-z-lookup
<li>75=get-version-info
<li>76=lookup-z-name
</ul>

<br><dt>Other
<dd>
<ul>
<li>The asynchronous message 1=i-am-off has been removed
</ul>
</dl>

<h3>Protocol Version 6 (first implemented in lyskomd 1.4.0)</h3>

<dl>
<dt>New Calls
<dd>
<ul>
<li>67=lookup-person
<li>68=lookup-conf
<li>69=set-client-version
<li>70=get-client-name
<li>71=get-client-version
<li>72=mark-text
<li>73=unmark-text
</ul>
</dl>

<h3>Protocol Version 5 (first implemented in lyskomd 1.3.0)</h3>

<dl>
<dt>New Calls
<dd>
<ul>
<li>65=re-lookup-person
<li>66=re-lookup-conf
</ul>
</dl>

<h3>Protocol Version 4 (first implemented in lyskomd 1.1.1)</h3>

<dl>
<dt>New Calls
<dd>
<ul>
<li>62=login
<li>63=who-is-on-ident
<li>64=get-session-info-ident
</ul>
</dl>

<h3>Protocol Version 3 (first implemented in lyskomd 1.1.0)</h3>

<dl>
<dt>New Calls
<dd>
<ul>
<li>61=find-previous-text-no
<li>60=find-next-text-no
<li>59=create-anonymous-text
<li>58=get-last-text
</ul>
</dl>

<h3>Protocol Version 2 (first implemented in lyskomd 0.30.0)</h3>

<dl>
<dt>New Calls
<dd>
<ul>
<li>57=set-user-area
</ul>
</dl>

<h3>Protocol Version 1 (first implemented in lyskomd 0.29.2)</h3>

<dl>
<dt>New Calls
<dd>All calls from 0-56. 
</dl>

<p><hr>
Node:<a name="Document%20Edition%20History">Document Edition History</a>,
Next:<a rel=next accesskey=n href="#Index">Index</a>,
Previous:<a rel=previous accesskey=p href="#Protocol%20Version%20History">Protocol Version History</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Document Edition History (informative)</h2>

<dl>

<br><dt>11.1: 2003-08-30
<dd>
<em>Modified aux-item:</em> <code>mx-refuse-import</code> [35] now supports the
value <code>html</code>.  See <a href="#Aux-Item%20Types">Aux-Item Types</a>.

<p><em>Previously undocumented stuff:</em> See <a href="#Garb">Garb</a>, for information
about how the garb works.

<p><em>New appendix:</em> See <a href="#Extracted%20grammar">Extracted grammar</a>, for information about
machine-readable grammars extracted from this specification.

<p><em>Typographic improvements:</em> The section heading of all
asynchronous messages now contains the async number.

<p><em>Fixed errors:</em> In the info manual, the status codes in the menus
of request and asynchronous messages were set to <code>r</code> instead of
<code>O</code> for <code>who-is-on-ident</code>, <code>get-session-info-ident</code> and
<code>async-new-text-old</code>.  Several section headings for obsolete
requests was missing information about when the request became
obsolete.

<p>Distributed with lyskomd 2.1.2.

<br><dt>11.0: 2003-08-24
<dd>
<em>New aux-items:</em> <code>mx-refuse-import</code> [35].  See <a href="#Aux-Item%20Types">Aux-Item Types</a>.

<p><em>New types:</em> <code>Read-Range</code> and <code>Membership</code> (the old
<code>Membership</code> was renamed to <code>Membership-10</code>). 
See <a href="#Membership%20Information">Membership Information</a>.

<p><code>Stats</code> and <code>Stats-Description</code>.  See <a href="#Statistics">Statistics</a>.

<p><code>Static-Server-Info</code>.  See <a href="#Server%20Information">Server Information</a>.

<p><code>FLOAT</code>.  See <a href="#Simple%20Data%20Types">Simple Data Types</a>.

<p><em>Status change:</em> The <code><a href="#query-read-texts-10">query-read-texts-10</a></code> and
<code><a href="#get-membership-10">get-membership-10</a></code> requests are now obsolete.  The
<code><a href="#set-keep-commented">set-keep-commented</a></code> request is now recommended.

<p><em>New calls:</em>
<ul>
<li><code><a href="#query-read-texts">query-read-texts</a></code>
<li><code><a href="#get-membership">get-membership</a></code>
<li><code><a href="#mark-as-unread">mark-as-unread</a></code>
<li><code><a href="#set-read-ranges">set-read-ranges</a></code>
<li><code><a href="#get-stats-description">get-stats-description</a></code>
<li><code><a href="#get-stats">get-stats</a></code>
<li><code><a href="#get-boottime-info">get-boottime-info</a></code>
<li><code><a href="#first-unused-conf-no">first-unused-conf-no</a></code>
<li><code><a href="#first-unused-text-no">first-unused-text-no</a></code>
<li><code><a href="#find-next-conf-no">find-next-conf-no</a></code>
<li><code><a href="#find-previous-conf-no">find-previous-conf-no</a></code>
<li><code><a href="#get-scheduling">get-scheduling</a></code>
<li><code><a href="#set-scheduling">set-scheduling</a></code>
<li><code><a href="#set-connection-time-format">set-connection-time-format</a></code>
<li><code><a href="#local-to-global-reverse">local-to-global-reverse</a></code>
<li><code><a href="#map-created-texts-reverse">map-created-texts-reverse</a></code>
</ul>

<p><em>New error codes:</em> <code>invalid-range</code>,
<code>invalid-range-list</code>, <code>priority-denied</code>,
<code>weight-denied</code>, <code>weight-zero</code>,
<code>undefined-measurement</code> and <code>bad-bool</code>.

<p><em>New async messages:</em>
<ul>
<li><code><a href="#async-new-user-area">async-new-user-area</a></code>
<li><code><a href="#async-new-presentation">async-new-presentation</a></code>
<li><code><a href="#async-new-motd">async-new-motd</a></code>
<li><code><a href="#async-text-aux-changed">async-text-aux-changed</a></code>
</ul>

<p><em>Protocol change:</em> Renamed the <code>reserved1</code> bit of
<code>Membership-Type</code> to <code>passive-message-invert</code>. 
See <a href="#Membership%20Information">Membership Information</a>. This affects
<code><a href="#async-send-message">async-send-message</a></code> and <code><a href="#send-message">send-message</a></code>.

<p>The following requests can no longer be used until you have logged in:
<code><a href="#get-last-text">get-last-text</a></code>, <code><a href="#find-next-text-no">find-next-text-no</a></code> and
<code><a href="#find-previous-text-no">find-previous-text-no</a></code>.

<p>You can now modify the type of a recipient with the
<code><a href="#add-recipient">add-recipient</a></code> call if you are the supervisor of either the
author, recipient or sender.  The check used to be more restrictive.

<p>Aux-item tags 10200-10299 are now reserved for private test use. 
See <a href="#Client-Specific%20Aux-Item%20Types">Client-Specific Aux-Item Types</a>.

<p>The following asynchronous messages are also sent to recipients of
texts linked to the relevant text via comment or footnote links:
<code><a href="#async-new-text-old">async-new-text-old</a></code>, <code><a href="#async-deleted-text">async-deleted-text</a></code>,
<code><a href="#async-new-text">async-new-text</a></code>, <code><a href="#async-new-recipient">async-new-recipient</a></code> and
<code><a href="#async-sub-recipient">async-sub-recipient</a></code>.

<p>Two requests can now return more error codes than they used to:
<dl>
<dt><code><a href="#add-comment">add-comment</a></code>
<dd><code>already-comment</code> and <code>already-footnote</code>. 
<br><dt><code><a href="#add-footnote">add-footnote</a></code>
<dd><code>already-comment</code>. 
</dl>

<p>The field <code>later-texts-exists</code> in <code>Text-Mapping</code> has been
renamed to <code>more-texts-exists</code>, as this name is more meaningful
for the new requests <code><a href="#local-to-global-reverse">local-to-global-reverse</a></code> and
<code><a href="#map-created-texts-reverse">map-created-texts-reverse</a></code>.

<p><em>Fixed errors:</em> The description of the error
<code>index-out-of-range</code> was wrong for
<code><a href="#add-footnote">add-footnote</a></code>,missing for <code><a href="#create-person-old">create-person-old</a></code>,
<code><a href="#create-person">create-person</a></code>, <code><a href="#create-conf-old">create-conf-old</a></code>,
<code><a href="#create-conf">create-conf</a></code> and <code><a href="#create-text-old">create-text-old</a></code>, and incomplete
for <code><a href="#create-text">create-text</a></code>.

<p><code><a href="#async-leave-conf">async-leave-conf</a></code> is not sent when the person is deleted,
so don't say that it is.

<p>Distributed with lyskomd 2.1.0.

<br><dt>10.7: 2002-11-03
<dd>
<em>Fixed errors:</em> The description of common block of the user area
was just plain wrong.  See <a href="#The%20User%20Area">The User Area</a>, for the updated
specification.

<p>The documentation for no-of-created-texts in the <code>Person</code> structure
was wrong.  See <a href="#Person">Person</a>.

<p>The documentation for the privilege bits <code>create-conf</code> and
<code>create-pers</code> stated that they are by default on.  In fact, they
are by default ignored, but off.  See <a href="#Security">Security</a>.

<p>The example for <code><a href="#re-z-lookup">re-z-lookup</a></code> was wrong.

<p>An example for <code><a href="#lookup-z-name">lookup-z-name</a></code> was wrong.

<p><em>Protocol change:</em> Added a new "language" value to the common
block of the user area.  See <a href="#The%20User%20Area">The User Area</a>.

<p><em>New aux-items:</em> <code>world-readable</code> [34].  See <a href="#Aux-Item%20Types">Aux-Item Types</a>.

<p><code>elisp-client-read-faq</code> [10000] and
<code>elisp-client-rejected-recommendation</code> [10001]. 
See <a href="#Some%20Client-specific%20Aux-Item%20Types">Some Client-specific Aux-Item Types</a>.

<p><em>Modified aux-item:</em> <code>send-comments-to</code> [33] may now also
contain an optional recipient type.  See <a href="#Aux-Item%20Types">Aux-Item Types</a>.

<p><em>Previously undocumented stuff:</em> The rules for when a membership
is visible are now documented.  See <a href="#Membership%20visibility">Membership visibility</a>.

<p>Documented the <code>unread-is-secret</code> flag of <code>Person</code>. 
See <a href="#Personal-Flags">Personal-Flags</a>.

<p>The documentation for <code><a href="#get-person-stat-old">get-person-stat-old</a></code>
 was
improved.

<p>The Message-ID of exported texts is now documented. 
See <a href="#Message-ID">Message-ID</a>.

<p>A client should offer to add the author as a recipient of a text he is
creating if he isn't a member of any of the recipients. 
See <a href="#Recipients%20of%20comments">Recipients of comments</a>.

<p>There should be no linefeed after the last line of a text. 
See <a href="#LysKOM%20Content%20Types">LysKOM Content Types</a>.  See <a href="#Reformattable%20Text%20(text%2fx-kom-basic)">Reformattable Text (text/x-kom-basic)</a>.

<p>Added a recommendation for how groups of <code>Misc-Info</code> items should
be sorted.  See <a href="#Order%20of%20misc-info%20groups">Order of misc-info groups</a>.

<p><em>Editorial changes:</em> Several spelling errors, typos, et c were
fixed.

<p>Distributed with lyskomd 2.0.7.

<br><dt>10.6: 2002-03-29
<dd>
<em>Fixed errors:</em> The format of the user area was plain wrong.  The
examples for <code>query-read-texts-10</code> and <code>get-membership-10</code> were
wrong.  The <code>idle-time</code> field is only affected by the
<code>user-active</code> request, not by all activity (see <a href="#Session%20Information">Session Information</a>).

<p><em>Protocol change:</em> Expanded the documentation of
<code>super-conf</code>.  See <a href="#Conference%20Status%20Types">Conference Status Types</a>.  Simplified the
rules for <code>super-conf</code>; a setting of 0 no longer means anything. 
A new section contains a summary of how a client should decide where
to send a comment, and it contains the new rules.  <a href="#Recipients%20of%20comments">Recipients of comments</a>.  Most clients already implemented the new rules; the old
rules were overly complex.

<p><em>New aux-item:</em> <code>send-comments-to</code> [33].

<p><em>Modified aux-item:</em> <code>faq-text</code> [14] may now be set on a
letterbox.

<p><em>Previously undocumented stuff:</em> Expanded the documentation of
<code>permitted-submitters</code>.  See <a href="#set-permitted-submitters">set-permitted-submitters</a>.

<p>Clarify that a person is a supervisor of himself, except for the
<code>set-supervisor</code> call; see <a href="#Conferences">Conferences</a>.

<p>Document the <code>change-name</code> privilege bit; see <a href="#Security">Security</a>.

<p>Document that <code>last-login</code> is also updated on logout;
see <a href="#Person%20Status%20Types">Person Status Types</a>.

<p>Clarify that the address part of <code>redirect</code> [8] is a conference
number.

<p><em>Compatibility info:</em> Mention that the elisp client used to enter
texts as <code>x-kom/text</code> instead of <code>text/x-kom-basic</code>.

<p><em>Administrativia:</em> Updated "Future changes" (see <a href="#Future%20changes">Future changes</a>), and mention that we now use Bugzilla to keep track of bugs
and feature requests.

<p><em>Editorial changes:</em> Added some of Texinfo markup and cross
references.  Several spelling errors, typos, et c were fixed.

<p>Distributed with lyskomd 2.0.6.

<br><dt>10.5: 2001-09-30
<dd>
A new section (see <a href="#Client-side%20name%20expansion">Client-side name expansion</a>) in the informative
Client Conventions appendix was written.  Distributed with lyskomd
2.0.5.

<br><dt>10.4: 2001-05-24
<dd>
<em>Fixed errors:</em>  Fixed the description of the <code>old-pwd</code> argument
to <code><a href="#set-passwd">set-passwd</a></code>.  The content-type <code>x-kom/basic</code> was renamed
to <code>text/x-kom-basic</code>.

<p><em>Previously undocumented stuff:</em>  Documented several previously
undocumented aspects of the protocol: the hello string used during
connection establishment, the <code>items-to-delete</code> and
<code>items-to-add</code> arguments of <code>modify-system-info</code>, the
<code>type</code> argument of <code>add-member</code> (including the fact that the
invitation membership flag is automatically set in some
circumstances), that a client can issue many requests at once (and
that the replies are sent back in order).

<p><em>New stuff:</em>  Registered the "rkom" user-area block.

<p><em>New aux-items:</em>  The following predefined aux-items were added:
<code>canonical-name</code> [31], <code>mx-list-name</code> [32]
<code>mx-mime-belongs-to</code> [10100], <code>mx-mime-part-in</code> [10101],
<code>mx-mime-misc</code> [10102], <code>mx-envelope-sender</code> [10103] and
<code>mx-mime-file-name</code> [10104].  Those aux-items with a number higher
than 10000 were previously documented in this document, but they now
have the status of predefined aux-items.

<p><em>Editorial changes:</em>  Lots of editorial changes needed to publish an
online version on the web at
<a href="http://www.lysator.liu.se/lyskom/protocol/">http://www.lysator.liu.se/lyskom/protocol/</a>.  Many minor syntax
errors corrected, and much missing Texinfo markup added.  The document
now makes heavy use of Texinfo macros.  Due to bugs in the current
version of <code>texinfo.tex</code> this file cannot currently be typeset
using TeX.  (All bugs are reported to the Texinfo maintainers.)

<p><code>get-membership-old</code>, <code>get-membership-10</code> and <code>login</code> used to
take an argument of type <code>BITSTRING(<var>a-single-field</var>)</code>.  The
type has now been changed to <code>BOOL</code> instead, to simplify the
description.  The encoding of the protocol is unchanged.

<p>The indices are now joined into a single index.  More terms have been
added to it.  Many sections of text were moved around to make it
easier to find information.  Some non-normative information was moved
to appendices.  Removed a few non-normative empty sections.

<p>This edition was published on the web; no lyskomd release was imminent
when the edition was finished.  Future editions will also be published
on the web; most of them will likely be published at the same time as
a lyskomd release is made.  They will continue to be included in the
lyskomd releases.

<br><dt>10.3: 2000-09-09
<dd>Several aux-items can be set on letterboxes and not only conferences.  A
few can now be set on the server.  The <code>allowed-content-type</code> and
<code>recommended-conf</code> aux-items were added.  The
<code>mx-allow-filter</code> and <code>mx-reject-forward</code> aux-items are marked
obsolete.  Text regarding mail import was improved, based on actual
experience in writing an email importer.  Reserved a range of aux-items
for komimportmail.  Several minor corrections and clarifications made. 
Distributed with lyskomd 2.0.4.

<br><dt>10.2: 1999-07-23
<dd>Some typos and other minor errors were fixed.  Distributed with lyskomd
2.0.2.

<br><dt>10.1: 1999-07-12
<dd>Call <code>sub-comment</code> was incorrectly marked obsolete.  This has been
corrected.  Regexps are case sensitive.  The Info-Type enumeration was
introduced in the description of the protocol.  (Previous versions of
the protocol had broken definitions of <code>add-recipient</code>,
<code>async-new-recipient</code> and <code>async-sub-recipient</code>.)  Distributed
with lyskomd 2.0.1.

<br><dt>10.0: 1999-06-27
<dd>The specification was translated to English and converted to Texinfo by
David Byers.  Protocol version 10.  Distributed with lyskomd 2.0.0. 
Note: this edition incorrectly marked the <code>sub-comment</code> call as
obsolete, and stated that regexp lookup was case insensitive.  Both
statements were wrong, and has since been fixed.

<br><dt>9.0: 1996-08-04
<dd>Protocol version 9.  Distributed with lyskomd 1.9.0.

<br><dt>8.0: 1995-11-10
<dd>Protocol version 8.  Distributed with lyskomd 1.8.0.

<br><dt>7.1: 1995-01-08.
<dd>Protocol and document revision history were added by Per Cederqvist.  Outline
mode was used to make the document more manageable.  This version was
distributed with lyskomd 1.7.1.

<br><dt>7.0: 1994-12-31.
<dd>The first specification with a version number.  All calls that had been added
since 1991-06-25 were documented.  Pell and Per Cederqvist did the deed.  This
version was distributed with lyskomd 1.7.0.

<br><dt>1993-05-19.
<dd>Linus Tolke wrote comments for some calls that were without comments.

<br><dt>1992-07-06.
<dd>Linus Tolke converted the document to ISO 8859-1.

<br><dt>1991-08-12.
<dd>Per Cederqvist started using version control for documentation.

<br><dt>1991-06-25.
<dd>Lars Aronsson documented the protocol that was in use at the time. 
</dl>

<p><hr>
Node:<a name="Index">Index</a>,
Previous:<a rel=previous accesskey=p href="#Document%20Edition%20History">Document Edition History</a>,
Up:<a rel=up accesskey=u href="#Top">Top</a>
<br>

<h2>Index</h2>

<ul compact>
<li><code>accept-async</code>: <a href="#accept-async">accept-async</a>
<li><code>add-comment</code>: <a href="#add-comment">add-comment</a>
<li><code>add-footnote</code>: <a href="#add-footnote">add-footnote</a>
<li><code>add-member</code>: <a href="#add-member">add-member</a>
<li><code>add-member-old</code>: <a href="#add-member-old">add-member-old</a>
<li><code>add-recipient</code>: <a href="#add-recipient">add-recipient</a>
<li><code>Any-Conf-Type</code>: <a href="#Conference%20Types">Conference Types</a>
<li><code>ARRAY</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>async-broadcast</code>: <a href="#async-broadcast">async-broadcast</a>
<li><code>async-deleted-text</code>: <a href="#async-deleted-text">async-deleted-text</a>
<li><code>async-i-am-off</code>: <a href="#async-i-am-off">async-i-am-off</a>
<li><code>async-i-am-on</code>: <a href="#async-i-am-on">async-i-am-on</a>
<li><code>async-i-am-on-obsolete</code>: <a href="#async-i-am-on-obsolete">async-i-am-on-obsolete</a>
<li><code>async-leave-conf</code>: <a href="#async-leave-conf">async-leave-conf</a>
<li><code>async-login</code>: <a href="#async-login">async-login</a>
<li><code>async-logout</code>: <a href="#async-logout">async-logout</a>
<li><code>async-new-membership</code>: <a href="#async-new-membership">async-new-membership</a>
<li><code>async-new-motd</code>: <a href="#async-new-motd">async-new-motd</a>
<li><code>async-new-name</code>: <a href="#async-new-name">async-new-name</a>
<li><code>async-new-presentation</code>: <a href="#async-new-presentation">async-new-presentation</a>
<li><code>async-new-recipient</code>: <a href="#async-new-recipient">async-new-recipient</a>
<li><code>async-new-text</code>: <a href="#async-new-text">async-new-text</a>
<li><code>async-new-text-old</code>: <a href="#async-new-text-old">async-new-text-old</a>
<li><code>async-new-user-area</code>: <a href="#async-new-user-area">async-new-user-area</a>
<li><code>async-rejected-connection</code>: <a href="#async-rejected-connection">async-rejected-connection</a>
<li><code>async-send-message</code>: <a href="#async-send-message">async-send-message</a>
<li><code>async-sub-recipient</code>: <a href="#async-sub-recipient">async-sub-recipient</a>
<li><code>async-sync-db</code>: <a href="#async-sync-db">async-sync-db</a>
<li><code>async-text-aux-changed</code>: <a href="#async-text-aux-changed">async-text-aux-changed</a>
<li><code>Aux-Item</code>: <a href="#Auxiliary%20Information">Auxiliary Information</a>
<li><code>Aux-Item-Flags</code>: <a href="#Auxiliary%20Information">Auxiliary Information</a>
<li><code>Aux-Item-Input</code>: <a href="#Auxiliary%20Information">Auxiliary Information</a>
<li><code>Aux-No</code>: <a href="#Auxiliary%20Information">Auxiliary Information</a>
<li><code>BITSTRING</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>BOOL</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>broadcast</code>: <a href="#broadcast">broadcast</a>
<li><code>change-conference</code>: <a href="#change-conference">change-conference</a>
<li><code>change-name</code>: <a href="#change-name">change-name</a>
<li><code>change-what-i-am-doing</code>: <a href="#change-what-i-am-doing">change-what-i-am-doing</a>
<li>character set: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>Conf-List-Archaic</code>: <a href="#Archaic%20way%20to%20list%20conferences">Archaic way to list conferences</a>
<li><code>Conf-No</code>: <a href="#Common%20Types">Common Types</a>
<li><code>Conf-Type</code>: <a href="#Conference%20Types">Conference Types</a>
<li><code>Conf-Z-Info</code>: <a href="#Conference%20Search%20Results">Conference Search Results</a>
<li><code>Conference</code>: <a href="#Conference%20Status%20Types">Conference Status Types</a>
<li><code>Conference-Old</code>: <a href="#Conference%20Status%20Types">Conference Status Types</a>
<li><code>create-anonymous-text</code>: <a href="#create-anonymous-text">create-anonymous-text</a>
<li><code>create-anonymous-text-old</code>: <a href="#create-anonymous-text-old">create-anonymous-text-old</a>
<li><code>create-conf</code>: <a href="#create-conf">create-conf</a>
<li><code>create-conf-old</code>: <a href="#create-conf-old">create-conf-old</a>
<li><code>create-person</code>: <a href="#create-person">create-person</a>
<li><code>create-person-old</code>: <a href="#create-person-old">create-person-old</a>
<li><code>create-text</code>: <a href="#create-text">create-text</a>
<li><code>create-text-old</code>: <a href="#create-text-old">create-text-old</a>
<li><code>delete-conf</code>: <a href="#delete-conf">delete-conf</a>
<li><code>delete-text</code>: <a href="#delete-text">delete-text</a>
<li><code>disconnect</code>: <a href="#disconnect">disconnect</a>
<li><code>Dynamic-Session-Info</code>: <a href="#Session%20Information">Session Information</a>
<li><code>enable</code>: <a href="#enable">enable</a>
<li><code>ENUMERATION</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>Extended-Conf-Type</code>: <a href="#Conference%20Types">Conference Types</a>
<li><code>find-next-conf-no</code>: <a href="#find-next-conf-no">find-next-conf-no</a>
<li><code>find-next-text-no</code>: <a href="#find-next-text-no">find-next-text-no</a>
<li><code>find-previous-conf-no</code>: <a href="#find-previous-conf-no">find-previous-conf-no</a>
<li><code>find-previous-text-no</code>: <a href="#find-previous-text-no">find-previous-text-no</a>
<li><code>first-unused-conf-no</code>: <a href="#first-unused-conf-no">first-unused-conf-no</a>
<li><code>first-unused-text-no</code>: <a href="#first-unused-text-no">first-unused-text-no</a>
<li><code>FLOAT</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>Garb-Nice</code>: <a href="#Conference%20Status%20Types">Conference Status Types</a>
<li><code>get-boottime-info</code>: <a href="#get-boottime-info">get-boottime-info</a>
<li><code>get-client-name</code>: <a href="#get-client-name">get-client-name</a>
<li><code>get-client-version</code>: <a href="#get-client-version">get-client-version</a>
<li><code>get-collate-table</code>: <a href="#get-collate-table">get-collate-table</a>
<li><code>get-conf-stat</code>: <a href="#get-conf-stat">get-conf-stat</a>
<li><code>get-conf-stat-old</code>: <a href="#get-conf-stat-old">get-conf-stat-old</a>
<li><code>get-conf-stat-older</code>: <a href="#get-conf-stat-older">get-conf-stat-older</a>
<li><code>get-created-texts</code>: <a href="#get-created-texts">get-created-texts</a>
<li><code>get-info</code>: <a href="#get-info">get-info</a>
<li><code>get-info-old</code>: <a href="#get-info-old">get-info-old</a>
<li><code>get-last-text</code>: <a href="#get-last-text">get-last-text</a>
<li><code>get-map</code>: <a href="#get-map">get-map</a>
<li><code>get-marks</code>: <a href="#get-marks">get-marks</a>
<li><code>get-members</code>: <a href="#get-members">get-members</a>
<li><code>get-members-old</code>: <a href="#get-members-old">get-members-old</a>
<li><code>get-membership</code>: <a href="#get-membership">get-membership</a>
<li><code>get-membership-10</code>: <a href="#get-membership-10">get-membership-10</a>
<li><code>get-membership-old</code>: <a href="#get-membership-old">get-membership-old</a>
<li><code>get-person-stat</code>: <a href="#get-person-stat">get-person-stat</a>
<li><code>get-person-stat-old</code>: <a href="#get-person-stat-old">get-person-stat-old</a>
<li><code>get-scheduling</code>: <a href="#get-scheduling">get-scheduling</a>
<li><code>get-session-info</code>: <a href="#get-session-info">get-session-info</a>
<li><code>get-session-info-ident</code>: <a href="#get-session-info-ident">get-session-info-ident</a>
<li><code>get-static-session-info</code>: <a href="#get-static-session-info">get-static-session-info</a>
<li><code>get-stats</code>: <a href="#get-stats">get-stats</a>
<li><code>get-stats-description</code>: <a href="#get-stats-description">get-stats-description</a>
<li><code>get-text</code>: <a href="#get-text">get-text</a>
<li><code>get-text-stat</code>: <a href="#get-text-stat">get-text-stat</a>
<li><code>get-text-stat-old</code>: <a href="#get-text-stat-old">get-text-stat-old</a>
<li><code>get-time</code>: <a href="#get-time">get-time</a>
<li><code>get-uconf-stat</code>: <a href="#get-uconf-stat">get-uconf-stat</a>
<li><code>get-unread-confs</code>: <a href="#get-unread-confs">get-unread-confs</a>
<li><code>get-version-info</code>: <a href="#get-version-info">get-version-info</a>
<li><code>HOLLERITH</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>Info</code>: <a href="#Server%20Information">Server Information</a>
<li><code>Info-Old</code>: <a href="#Server%20Information">Server Information</a>
<li><code>Info-Type</code>: <a href="#Article%20Information">Article Information</a>
<li><code>INT16</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>INT32</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>INT8</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>Local-Text-No</code>: <a href="#Common%20Types">Common Types</a>
<li><code>local-to-global</code>: <a href="#local-to-global">local-to-global</a>
<li><code>Local-To-Global-Block</code>: <a href="#Mapping%20Local%20to%20Global%20Text%20Numbers">Mapping Local to Global Text Numbers</a>
<li><code>local-to-global-reverse</code>: <a href="#local-to-global-reverse">local-to-global-reverse</a>
<li><code>login</code>: <a href="#login">login</a>
<li><code>login-old</code>: <a href="#login-old">login-old</a>
<li><code>logout</code>: <a href="#logout">logout</a>
<li><code>lookup-conf</code>: <a href="#lookup-conf">lookup-conf</a>
<li><code>lookup-name</code>: <a href="#lookup-name">lookup-name</a>
<li><code>lookup-person</code>: <a href="#lookup-person">lookup-person</a>
<li><code>lookup-z-name</code>: <a href="#lookup-z-name">lookup-z-name</a>
<li><code>map-created-texts</code>: <a href="#map-created-texts">map-created-texts</a>
<li><code>map-created-texts-reverse</code>: <a href="#map-created-texts-reverse">map-created-texts-reverse</a>
<li><code>Mark</code>: <a href="#Article%20Marks">Article Marks</a>
<li><code>mark-as-read</code>: <a href="#mark-as-read">mark-as-read</a>
<li><code>mark-as-unread</code>: <a href="#mark-as-unread">mark-as-unread</a>
<li><code>mark-text</code>: <a href="#mark-text">mark-text</a>
<li><code>mark-text-old</code>: <a href="#mark-text-old">mark-text-old</a>
<li><code>Member</code>: <a href="#Membership%20Information">Membership Information</a>
<li><code>Membership</code>: <a href="#Membership%20Information">Membership Information</a>
<li><code>Membership-10</code>: <a href="#Membership%20Information">Membership Information</a>
<li><code>Membership-Old</code>: <a href="#Membership%20Information">Membership Information</a>
<li><code>Membership-Type</code>: <a href="#Membership%20Information">Membership Information</a>
<li><code>Misc-Info</code>: <a href="#Article%20Information">Article Information</a>
<li><code>modify-conf-info</code>: <a href="#modify-conf-info">modify-conf-info</a>
<li><code>modify-system-info</code>: <a href="#modify-system-info">modify-system-info</a>
<li><code>modify-text-info</code>: <a href="#modify-text-info">modify-text-info</a>
<li><code>Pers-No</code>: <a href="#Common%20Types">Common Types</a>
<li><code>Person</code>: <a href="#Person%20Status%20Types">Person Status Types</a>
<li><code>Personal-Flags</code>: <a href="#Person%20Status%20Types">Person Status Types</a>
<li><code>Priv-Bits</code>: <a href="#Person%20Status%20Types">Person Status Types</a>
<li><code>query-async</code>: <a href="#query-async">query-async</a>
<li><code>query-predefined-aux-items</code>: <a href="#query-predefined-aux-items">query-predefined-aux-items</a>
<li><code>query-read-texts</code>: <a href="#query-read-texts">query-read-texts</a>
<li><code>query-read-texts-10</code>: <a href="#query-read-texts-10">query-read-texts-10</a>
<li><code>query-read-texts-old</code>: <a href="#query-read-texts-old">query-read-texts-old</a>
<li><code>re-lookup-conf</code>: <a href="#re-lookup-conf">re-lookup-conf</a>
<li><code>re-lookup-person</code>: <a href="#re-lookup-person">re-lookup-person</a>
<li><code>re-z-lookup</code>: <a href="#re-z-lookup">re-z-lookup</a>
<li><code>Read-Range</code>: <a href="#Membership%20Information">Membership Information</a>
<li><code>RPC</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>Scheduling-Info</code>: <a href="#Session%20Information">Session Information</a>
<li><code>SELECTION</code>: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>send-message</code>: <a href="#send-message">send-message</a>
<li><code>Session-Flags</code>: <a href="#Session%20Information">Session Information</a>
<li><code>Session-Info</code>: <a href="#Session%20Information">Session Information</a>
<li><code>Session-Info-Ident</code>: <a href="#Session%20Information">Session Information</a>
<li><code>Session-No</code>: <a href="#Common%20Types">Common Types</a>
<li><code>set-client-version</code>: <a href="#set-client-version">set-client-version</a>
<li><code>set-conf-type</code>: <a href="#set-conf-type">set-conf-type</a>
<li><code>set-connection-time-format</code>: <a href="#set-connection-time-format">set-connection-time-format</a>
<li><code>set-etc-motd</code>: <a href="#set-etc-motd">set-etc-motd</a>
<li><code>set-expire</code>: <a href="#set-expire">set-expire</a>
<li><code>set-garb-nice</code>: <a href="#set-garb-nice">set-garb-nice</a>
<li><code>set-info</code>: <a href="#set-info">set-info</a>
<li><code>set-keep-commented</code>: <a href="#set-keep-commented">set-keep-commented</a>
<li><code>set-last-read</code>: <a href="#set-last-read">set-last-read</a>
<li><code>set-membership-type</code>: <a href="#set-membership-type">set-membership-type</a>
<li><code>set-motd-of-lyskom</code>: <a href="#set-motd-of-lyskom">set-motd-of-lyskom</a>
<li><code>set-passwd</code>: <a href="#set-passwd">set-passwd</a>
<li><code>set-permitted-submitters</code>: <a href="#set-permitted-submitters">set-permitted-submitters</a>
<li><code>set-pers-flags</code>: <a href="#set-pers-flags">set-pers-flags</a>
<li><code>set-presentation</code>: <a href="#set-presentation">set-presentation</a>
<li><code>set-priv-bits</code>: <a href="#set-priv-bits">set-priv-bits</a>
<li><code>set-read-ranges</code>: <a href="#set-read-ranges">set-read-ranges</a>
<li><code>set-scheduling</code>: <a href="#set-scheduling">set-scheduling</a>
<li><code>set-super-conf</code>: <a href="#set-super-conf">set-super-conf</a>
<li><code>set-supervisor</code>: <a href="#set-supervisor">set-supervisor</a>
<li><code>set-unread</code>: <a href="#set-unread">set-unread</a>
<li><code>set-user-area</code>: <a href="#set-user-area">set-user-area</a>
<li><code>shutdown-kom</code>: <a href="#shutdown-kom">shutdown-kom</a>
<li><code>Static-Server-Info</code>: <a href="#Server%20Information">Server Information</a>
<li><code>Static-Session-Info</code>: <a href="#Session%20Information">Session Information</a>
<li><code>Stats</code>: <a href="#Statistics">Statistics</a>
<li><code>Stats-Description</code>: <a href="#Statistics">Statistics</a>
<li><code>sub-comment</code>: <a href="#sub-comment">sub-comment</a>
<li><code>sub-footnote</code>: <a href="#sub-footnote">sub-footnote</a>
<li><code>sub-member</code>: <a href="#sub-member">sub-member</a>
<li><code>sub-recipient</code>: <a href="#sub-recipient">sub-recipient</a>
<li><code>sync-kom</code>: <a href="#sync-kom">sync-kom</a>
<li><code>Text-List</code>: <a href="#Common%20Types">Common Types</a>
<li><code>Text-Mapping</code>: <a href="#Mapping%20Local%20to%20Global%20Text%20Numbers">Mapping Local to Global Text Numbers</a>
<li><code>Text-No</code>: <a href="#Common%20Types">Common Types</a>
<li><code>Text-Number-Pair</code>: <a href="#Mapping%20Local%20to%20Global%20Text%20Numbers">Mapping Local to Global Text Numbers</a>
<li><code>Text-Stat</code>: <a href="#Article%20Information">Article Information</a>
<li><code>Text-Stat-Old</code>: <a href="#Article%20Information">Article Information</a>
<li><code>Time</code>: <a href="#Common%20Types">Common Types</a>
<li><code>UConference</code>: <a href="#Conference%20Status%20Types">Conference Status Types</a>
<li>Unicode: <a href="#Simple%20Data%20Types">Simple Data Types</a>
<li><code>unmark-text</code>: <a href="#unmark-text">unmark-text</a>
<li><code>user-active</code>: <a href="#user-active">user-active</a>
<li><code>Version-Info</code>: <a href="#Server%20Information">Server Information</a>
<li><code>who-am-i</code>: <a href="#who-am-i">who-am-i</a>
<li><code>Who-Info</code>: <a href="#Who%20Information">Who Information</a>
<li><code>Who-Info-Ident</code>: <a href="#Who%20Information">Who Information</a>
<li><code>Who-Info-Old</code>: <a href="#Who%20Information">Who Information</a>
<li><code>who-is-on</code>: <a href="#who-is-on">who-is-on</a>
<li><code>who-is-on-dynamic</code>: <a href="#who-is-on-dynamic">who-is-on-dynamic</a>
<li><code>who-is-on-ident</code>: <a href="#who-is-on-ident">who-is-on-ident</a>
<li><code>who-is-on-old</code>: <a href="#who-is-on-old">who-is-on-old</a>
</ul>


<hr><h4>Footnotes</h4>
<ol type="1">
<li><a name="fn-1"></a>
<p>Or in modern terms, enabling
technology for Computer-Supported Cooperative Work (CSCW).</p>

<li><a name="fn-2"></a>
<p>Also known as "PottaKOM" and
"BortaKOM."</p>

<li><a name="fn-3"></a>
<p>The number
is not truly global; it is local to a specific LysKOM server.</p>

<li><a name="fn-4"></a>
<p>The LysKOM server is normally
configured so that anybody can create new conferences, even if they do
not have this privilege.</p>

<li><a name="fn-5"></a>
<p>The LysKOM server is normally
configured so that anybody can create new persons, even if they do not
have this privilege.</p>

<li><a name="fn-6"></a>
<p>The default port for a LysKOM server is 4894. 
That port was registered with IANA 2001-06-20.</p>

<li><a name="fn-7"></a>
<p>In the early 1990s
there was much discussion about the next generation LysKOM protocol,
called "Protocol B", and at one point in time it was believed that
"Protocol B" would arrive at the same time as "Emacs 19".  "Emacs
19" arrived and was obsoleted by new versions.  Meanwhile, it was
discovered that "Protocol A" was more extensible that first
believed.  "Protocol A" will continue to evolve, but it is unlikely
that it will ever be superseded by "Protocol B".</p>

<li><a name="fn-8"></a>
<p>Client writers are encouraged to write the clients
so that they are prepared for replies that are sent out-of-order. 
See <a href="#Future%20changes">Future changes</a>, for speculations about how that may benefit the
client in the future.</p>

<li><a name="fn-9"></a>
<p>The <code>supervisor</code> may be a person, in which
case the members of that person's mailbox become supervisors.</p>

<li><a name="fn-10"></a>
<p><code>permitted-submitters</code> can be
a person, in which case all persons who are members of the associated
mailbox are allowed to submit articles to the conference.</p>

<li><a name="fn-11"></a>
<p>This is true if the text is created
using <code><a href="#create-text">create-text</a></code>, <code><a href="#create-anonymous-text">create-anonymous-text</a></code>,
<code><a href="#create-anonymous-text-old">create-anonymous-text-old</a></code> or <code><a href="#create-text-old">create-text-old</a></code>. 
Future requests that create texts may have other semantics.</p>

<li><a name="fn-12"></a>
<p>RFC 2782 (DNS SRV) provided
inspiration when the <code>Scheduling-Info</code> structure was defined.</p>

<li><a name="fn-13"></a>
<p>This conference is a standard Lysator
conference.  It's all Padrone's fault.</p>

<li><a name="fn-14"></a>
<p>Another client might
create a new text immediately before the server processes this
<code>set-unread</code> call, so you might end up setting
<code>last-text-read</code> to something unexpected.</p>

<li><a name="fn-15"></a>
<p>This
difference was not intentional, but it is now too late to change the
semantics of either <code>get-map</code> or <code>get-created-texts</code>. 
Besides, they are both obsolete calls.</p>

</ol><hr>

</body></html>

